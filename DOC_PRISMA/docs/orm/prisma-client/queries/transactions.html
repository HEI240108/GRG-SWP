<!DOCTYPE html>
<html><head><meta charSet="utf-8">     <meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="generator" content="Gatsby 4.22.1"><meta name="viewport" content="width=device-width, initial-scale=1" data-gatsby-head="true"><meta name="description" content="This page explains the transactions API of Prisma Client." data-gatsby-head="true"><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"><meta name="twitter:site" content="@prisma" data-gatsby-head="true"><meta name="twitter:title" content="Transactions and batch queries (Reference)" data-gatsby-head="true"><meta name="twitter:description" content="This page explains the transactions API of Prisma Client." data-gatsby-head="true"><meta name="twitter:creator" content="@prisma" data-gatsby-head="true"><meta name="twitter:image" content="https://www.prisma.io/docs/social/docs-social.png" data-gatsby-head="true"><meta property="og:url" content="https://www.prisma.io/docs/orm/prisma-client/queries/transactions" data-gatsby-head="true"><meta property="og:title" content="Transactions and batch queries (Reference)" data-gatsby-head="true"><meta property="og:description" content="This page explains the transactions API of Prisma Client." data-gatsby-head="true"><meta property="og:site_name" content="Prisma" data-gatsby-head="true"><meta property="og:type" content="website" data-gatsby-head="true"><meta property="og:image" content="https://www.prisma.io/docs/social/docs-social.png" data-gatsby-head="true"><meta property="og:image:alt" content="Database tools for modern developers" data-gatsby-head="true"><meta property="og:image:type" content="image/png" data-gatsby-head="true"><meta property="og:image:width" content="1200" data-gatsby-head="true"><meta property="og:image:height" content="630" data-gatsby-head="true"><style data-href="/docs/styles.92ec0decfbab4f969876.css" data-identity="gatsby-global-css">.pre-highlight{position:relative}code[class*=language-],pre[class*=language-],pre[class*=language-] code{word-wrap:normal;border-radius:8px;color:var(--main-font-color)!important;display:inline-grid;font-family:JetBrainsMono,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:14px;font-variant:no-common-ligatures no-discretionary-ligatures no-historical-ligatures no-contextual;grid-template-rows:max-content;-webkit-hyphens:none;hyphens:none;line-height:1.5;overflow:auto;tab-size:4;text-align:left;white-space:pre;width:100%;word-break:normal;word-spacing:normal}code[class*=language-].is-terminal,pre[class*=language-].is-terminal,pre[class*=language-].is-terminal code{background-color:var(--main-font-color)!important;color:var(--code-inline-bgd-color)!important}code[class*=language-].is-terminal ::selection,code[class*=language-].is-terminal::selection,pre[class*=language-].is-terminal ::selection,pre[class*=language-].is-terminal::selection{background-color:#a0aec0}@media (prefers-color-scheme:dark){code[class*=language-].is-terminal,pre[class*=language-].is-terminal,pre[class*=language-].is-terminal code{background-color:#2d3748!important;color:var(--main-font-color)!important}.token.punctuation{color:#a0aec0!important}}.is-terminal .line-no{color:var(--header-btn-color)!important}.is-terminal .copy-button svg rect{fill:var(--tag-media-color)}pre[class*=language-]{margin:0;overflow:auto;padding:1em 0}:not(pre)>code[class*=language-],pre[class*=language-]{background:var(--code-bgd-color)!important}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.inline-code,code.inline-code,inlinecode{font-feature-settings:"clig" 0,"calt" 0;background:var(--code-inline-bgd-color);border-radius:5px;color:var(--main-font-color);display:inline;font-family:JetBrainsMono;font-size:14px;font-style:normal;font-variant:no-common-ligatures no-discretionary-ligatures no-historical-ligatures no-contextual;font-weight:500;line-height:24px;padding:.05em .3em .2em;vertical-align:baseline}inlinecode{font-size:inherit}.inline-code{background-color:var(--border-color)}.top-section h1 inlinecode{font-size:2rem}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:var(--code-inner-color)!important;font-style:normal!important}.token.namespace{opacity:.7}.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag,.token.type-args{color:var(--code-token4-color)!important}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:var(--code-token5-color)!important}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:var(--code-token6-color)!important}.token.atrule,.token.attr-value,.token.keyword{color:var(--code-token1-color)!important}.token.boolean,.token.class-name,.token.function,.token[class*=class-name]{color:var(--code-token2-color)!important}.token.important,.token.regex,.token.variable{color:var(--code-token7-color)!important}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.annotation{color:var(--code-token3-color)!important}.fa{font-family:var(--fa-style-family,"Font Awesome 6 Pro");font-weight:var(--fa-style,900)}.fa,.fa-brands,.fa-classic,.fa-duotone,.fa-light,.fa-regular,.fa-sharp,.fa-sharp-solid,.fa-solid,.fa-thin,.fab,.fad,.fal,.far,.fas,.fasl,.fasr,.fass,.fat{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:var(--fa-display,inline-block);font-style:normal;font-variant:normal;line-height:1;text-rendering:auto}.fa-classic,.fa-light,.fa-regular,.fa-solid,.fa-thin,.fal,.far,.fas,.fat{font-family:Font Awesome\ 6 Pro}.fa-brands,.fab{font-family:Font Awesome\ 6 Brands}.fa-classic.fa-duotone,.fa-duotone,.fad{font-family:Font Awesome\ 6 Duotone}.fa-sharp,.fasl,.fasr,.fass{font-family:Font Awesome\ 6 Sharp}.fa-sharp,.fass{font-weight:900}.fa-1x{font-size:1em}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-6x{font-size:6em}.fa-7x{font-size:7em}.fa-8x{font-size:8em}.fa-9x{font-size:9em}.fa-10x{font-size:10em}.fa-2xs{font-size:.625em;line-height:.1em;vertical-align:.225em}.fa-xs{font-size:.75em;line-height:.08333em;vertical-align:.125em}.fa-sm{font-size:.875em;line-height:.07143em;vertical-align:.05357em}.fa-lg{font-size:1.25em;line-height:.05em;vertical-align:-.075em}.fa-xl{font-size:1.5em;line-height:.04167em;vertical-align:-.125em}.fa-2xl{font-size:2em;line-height:.03125em;vertical-align:-.1875em}.fa-fw{text-align:center;width:1.25em}.fa-ul{list-style-type:none;margin-left:var(--fa-li-margin,2.5em);padding-left:0}.fa-ul>li{position:relative}.fa-li{left:calc(var(--fa-li-width, 2em)*-1);line-height:inherit;position:absolute;text-align:center;width:var(--fa-li-width,2em)}.fa-border{border-color:var(--fa-border-color,#eee);border-radius:var(--fa-border-radius,.1em);border-style:var(--fa-border-style,solid);border-width:var(--fa-border-width,.08em);padding:var(--fa-border-padding,.2em .25em .15em)}.fa-pull-left{float:left;margin-right:var(--fa-pull-margin,.3em)}.fa-pull-right{float:right;margin-left:var(--fa-pull-margin,.3em)}.fa-beat{animation-delay:var(--fa-animation-delay,0s);animation-direction:var(--fa-animation-direction,normal);animation-duration:var(--fa-animation-duration,1s);animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-name:fa-beat;animation-timing-function:var(--fa-animation-timing,ease-in-out)}.fa-bounce{animation-delay:var(--fa-animation-delay,0s);animation-direction:var(--fa-animation-direction,normal);animation-duration:var(--fa-animation-duration,1s);animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-name:fa-bounce;animation-timing-function:var(--fa-animation-timing,cubic-bezier(.28,.84,.42,1))}.fa-fade{animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-name:fa-fade;animation-timing-function:var(--fa-animation-timing,cubic-bezier(.4,0,.6,1))}.fa-beat-fade,.fa-fade{animation-delay:var(--fa-animation-delay,0s);animation-direction:var(--fa-animation-direction,normal);animation-duration:var(--fa-animation-duration,1s)}.fa-beat-fade{animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-name:fa-beat-fade;animation-timing-function:var(--fa-animation-timing,cubic-bezier(.4,0,.6,1))}.fa-flip{animation-delay:var(--fa-animation-delay,0s);animation-direction:var(--fa-animation-direction,normal);animation-duration:var(--fa-animation-duration,1s);animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-name:fa-flip;animation-timing-function:var(--fa-animation-timing,ease-in-out)}.fa-shake{animation-duration:var(--fa-animation-duration,1s);animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-name:fa-shake;animation-timing-function:var(--fa-animation-timing,linear)}.fa-shake,.fa-spin{animation-delay:var(--fa-animation-delay,0s);animation-direction:var(--fa-animation-direction,normal)}.fa-spin{animation-duration:var(--fa-animation-duration,2s);animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-name:fa-spin;animation-timing-function:var(--fa-animation-timing,linear)}.fa-spin-reverse{--fa-animation-direction:reverse}.fa-pulse,.fa-spin-pulse{animation-direction:var(--fa-animation-direction,normal);animation-duration:var(--fa-animation-duration,1s);animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-name:fa-spin;animation-timing-function:var(--fa-animation-timing,steps(8))}@media (prefers-reduced-motion:reduce){.fa-beat,.fa-beat-fade,.fa-bounce,.fa-fade,.fa-flip,.fa-pulse,.fa-shake,.fa-spin,.fa-spin-pulse{animation-delay:-1ms;animation-duration:1ms;animation-iteration-count:1;transition-delay:0s;transition-duration:0s}}@keyframes fa-beat{0%,90%{transform:scale(1)}45%{transform:scale(var(--fa-beat-scale,1.25))}}@keyframes fa-bounce{0%{transform:scale(1) translateY(0)}10%{transform:scale(var(--fa-bounce-start-scale-x,1.1),var(--fa-bounce-start-scale-y,.9)) translateY(0)}30%{transform:scale(var(--fa-bounce-jump-scale-x,.9),var(--fa-bounce-jump-scale-y,1.1)) translateY(var(--fa-bounce-height,-.5em))}50%{transform:scale(var(--fa-bounce-land-scale-x,1.05),var(--fa-bounce-land-scale-y,.95)) translateY(0)}57%{transform:scale(1) translateY(var(--fa-bounce-rebound,-.125em))}64%{transform:scale(1) translateY(0)}to{transform:scale(1) translateY(0)}}@keyframes fa-fade{50%{opacity:var(--fa-fade-opacity,.4)}}@keyframes fa-beat-fade{0%,to{opacity:var(--fa-beat-fade-opacity,.4);transform:scale(1)}50%{opacity:1;transform:scale(var(--fa-beat-fade-scale,1.125))}}@keyframes fa-flip{50%{transform:rotate3d(var(--fa-flip-x,0),var(--fa-flip-y,1),var(--fa-flip-z,0),var(--fa-flip-angle,-180deg))}}@keyframes fa-shake{0%{transform:rotate(-15deg)}4%{transform:rotate(15deg)}24%,8%{transform:rotate(-18deg)}12%,28%{transform:rotate(18deg)}16%{transform:rotate(-22deg)}20%{transform:rotate(22deg)}32%{transform:rotate(-12deg)}36%{transform:rotate(12deg)}40%,to{transform:rotate(0deg)}}@keyframes fa-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.fa-rotate-90{transform:rotate(90deg)}.fa-rotate-180{transform:rotate(180deg)}.fa-rotate-270{transform:rotate(270deg)}.fa-flip-horizontal{transform:scaleX(-1)}.fa-flip-vertical{transform:scaleY(-1)}.fa-flip-both,.fa-flip-horizontal.fa-flip-vertical{transform:scale(-1)}.fa-rotate-by{transform:rotate(var(--fa-rotate-angle,none))}.fa-stack{display:inline-block;height:2em;line-height:2em;position:relative;vertical-align:middle;width:2.5em}.fa-stack-1x,.fa-stack-2x{left:0;position:absolute;text-align:center;width:100%;z-index:var(--fa-stack-z-index,auto)}.fa-stack-1x{line-height:inherit}.fa-stack-2x{font-size:2em}.fa-inverse{color:var(--fa-inverse,#fff)}.fa-arrow-up-right:before{content:"\e09f"}.fa-arrows-rotate:before{content:"\f021"}.fa-bars:before{content:"\f0c9"}.fa-bolt:before{content:"\f0e7"}.fa-book-open:before{content:"\f518"}.fa-book-open-alt:before,.fa-book-open-cover:before{content:"\e0c0"}.fa-box:before{content:"\f466"}.fa-chart-line-up:before{content:"\e0e5"}.fa-chart-simple:before{content:"\e473"}.fa-chevron-down:before{content:"\f078"}.fa-circle-exclamation:before{content:"\f06a"}.fa-comment:before{content:"\f075"}.fa-comment-alt-edit:before{content:"\f4a4"}.fa-comment-quote:before{content:"\e14c"}.fa-database:before{content:"\f1c0"}.fa-envelope:before{content:"\f0e0"}.fa-exclamation-circle:before{content:"\f06a"}.fa-file-binary:before{content:"\e175"}.fa-folder-magnifying-glass:before,.fa-folder-search:before{content:"\e18b"}.fa-globe:before{content:"\f0ac"}.fa-grid-2:before{content:"\e196"}.fa-hands-heart:before,.fa-hands-holding-heart:before{content:"\f4c3"}.fa-headset:before{content:"\f590"}.fa-layer-group:before{content:"\f5fd"}.fa-message-edit:before,.fa-message-pen:before{content:"\f4a4"}.fa-navicon:before{content:"\f0c9"}.fa-refresh:before{content:"\f021"}.fa-server:before{content:"\f233"}.fa-signal-stream:before{content:"\f8dd"}.fa-slash:before{content:"\f715"}.fa-star:before{content:"\f005"}.fa-sync:before{content:"\f021"}.fa-terminal:before{content:"\f120"}.fa-triangle:before{content:"\f2ec"}.fa-user:before{content:"\f007"}.fa-users-viewfinder:before{content:"\e595"}.fa-zap:before{content:"\f0e7"}.fa-sr-only,.fa-sr-only-focusable:not(:focus),.sr-only,.sr-only-focusable:not(:focus){clip:rect(0,0,0,0);border-width:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.fa-brands,.fab{font-weight:400}:host,:root{--fa-style-family-brands:"Font Awesome 6 Brands";--fa-font-brands:normal 400 1em/1 "Font Awesome 6 Brands"}@font-face{font-display:block;font-family:Font Awesome\ 6 Brands;font-style:normal;font-weight:400;src:url(../../../fonts/fa-brands-400.woff2) format("woff2"),url(https://www.prisma.io/fonts/fa-brands-400.woff2) format("woff2")}@font-face{font-display:block;font-family:Font Awesome\ 6 Pro;font-style:normal;font-weight:900;src:url(../../../fonts/fa-solid-900.woff2) format("woff2"),url(https://www.prisma.io/fonts/fa-solid-900.woff2) format("woff2")}.fa-rabbit-fast:before,.fa-rabbit-running:before{content:"\f709"}.fa-discord:before{content:"\f392"}.fa-github:before{content:"\f09b"}.fa-slack-hash:before,.fa-slack:before{content:"\f198"}.fa-twitter:before{content:"\f099"}.fa-youtube:before{content:"\f167"}.fa-x-twitter:before{content:"\e61b"}

/*!
 * Font Awesome Pro 6.4.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license (Commercial License)
 * Copyright 2023 Fonticons, Inc.
 */:host,:root{--fa-font-light:normal 300 1em/1 "Font Awesome 6 Pro"}@font-face{font-display:block;font-family:Font Awesome\ 6 Pro;font-style:normal;font-weight:300;src:url(../../../fonts/fa-light-300.woff2) format("woff2"),url(https://www.prisma.io/fonts/fa-light-300.woff2) format("woff2")}.fa-light,.fal{font-weight:300}

/*!
 * Font Awesome Pro 6.4.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license (Commercial License)
 * Copyright 2023 Fonticons, Inc.
 */:host,:root{--fa-style-family-classic:"Font Awesome 6 Pro";--fa-font-regular:normal 400 1em/1 "Font Awesome 6 Pro"}@font-face{font-display:block;font-family:Font Awesome\ 6 Pro;font-style:normal;font-weight:400;src:url(../../../fonts/fa-regular-400.woff2) format("woff2"),url(https://www.prisma.io/fonts/fa-regular-400.woff2) format("woff2")}.fa-regular,.far{font-weight:400}.fa-arrow-right:before{content:"\f061"}

/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}@font-face{font-display:swap;font-family:Inter;font-style:normal;font-weight:400;src:url(../../../fonts/Inter-Regular.woff2),url(../../../../fonts/Inter-Regular.woff2)}@font-face{font-display:swap;font-family:Inter;font-style:normal;font-weight:500;src:url(../../../fonts/Inter-Medium.woff2),url(../../../../fonts/Inter-Medium.woff2)}@font-face{font-display:swap;font-family:Inter;font-style:italic;font-weight:400;src:url(../../../fonts/Inter-Italic.woff2),url(../../../../fonts/Inter-Italic.woff2)}@font-face{font-display:swap;font-family:Inter;font-style:normal;font-weight:600;src:url(../../../fonts/Inter-SemiBold.woff2),url(../../../../fonts/Inter-SemiBold.woff2)}@font-face{font-display:swap;font-family:Inter;font-style:italic;font-weight:600;src:url(../../../fonts/Inter-SemiBoldItalic.woff2),url(../../../../fonts/Inter-SemiBoldItalic.woff2)}@font-face{font-display:swap;font-family:Inter;font-style:normal;font-weight:700;src:url(../../../fonts/Inter-Bold.woff2),url(../../../../fonts/Inter-Bold.woff2)}@font-face{font-display:swap;font-family:Inter;font-style:italic;font-weight:700;src:url(../../../fonts/Inter-BoldItalic.woff2),url(../../../../fonts/Inter-BoldItalic.woff2)}@font-face{font-display:swap;font-family:Barlow;font-style:normal;font-weight:600;src:url(../../../fonts/Barlow-Bold.woff2),url(../../../../fonts/Barlow-Bold.woff2)}@font-face{font-display:swap;font-family:JetBrainsMono;font-style:normal;font-weight:400;src:url(../../../fonts/JetBrainsMono-Regular.woff2),url(../../../../fonts/JetBrainsMono-Regular.woff2)}html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;box-sizing:border-box;font-size:16px;overflow-y:scroll}body,html{font-family:Inter,sans-serif}body{--main-font-color:#2d3748;--main-bgd-color:#f7fafc;--header-bg-color:#fff;--selection-bgd-color:#0c344b;--white-color:#fff;--link-color:#3182ce;--border-color:#e2e8f0;--code-bgd-color:#f6f8fa;--code-inline-bgd-color:#edf2f7;--list-bullet-color:#a0aec0;--search-highlight-bg-color:#ebf8ff;--tag-media-color:#2d3748;--gradient1-color:#2f3747;--gradient2-color:#0d0f14;--header-btn-color:#4a5568;--code-inner-color:#718096;--code-token1-color:#d5408c;--code-token2-color:#805ad5;--code-token3-color:#319795;--code-token4-color:#dd6b21;--code-token5-color:#690;--code-token6-color:#9a6e3a;--code-token7-color:#e90;--code-linenum-color:#cbd5e0;--code-added-color:#47bb78;--code-added-bg-color:#d9f4e6;--code-deleted-color:#e53e3e;--code-deleted-bg-color:#f5e4e7;--code-highlight-color:#a0aec0;--code-highlight-bg-color:#e2e8f0;--code-edit-bg-color:#c3dafe;--code-result-bg-color:#e7edf3;--red-color:#ff4f56;--green-color:#15bd76;--grey-color:#3d556b;--grey-bg-color:#8fa6b2;--dark-color:#0c344b;word-wrap:break-word;background-color:var(--white-color);color:var(--main-font-color);font-weight:400;margin:0}@media (prefers-color-scheme:dark){body{--main-font-color:#e2e8f0;--main-bgd-color:#1a202c;--border-color:#2d3748;--header-bg-color:#1a202c;--selection-bgd-color:#0c344b;--white-color:#fff;--link-color:#7f9cf5;--code-bgd-color:#2d3748;--code-inline-bgd-color:#2d3748;--list-bullet-color:#a0aec0;--search-highlight-bg-color:#ebf8ff;--tag-media-color:#2d3748;--gradient1-color:#2f3747;--gradient2-color:#0d0f14;--header-btn-color:#4a5568;--code-inner-color:#718096;--code-token1-color:#d5408c;--code-token2-color:#805ad5;--code-token3-color:#319795;--code-token4-color:#dd6b21;--code-token5-color:#690;--code-token6-color:#9a6e3a;--code-token7-color:#e90;--code-linenum-color:#cbd5e0;--code-added-color:#47bb78;--code-added-bg-color:#d9f4e6;--code-deleted-color:#e53e3e;--code-deleted-bg-color:#f5e4e7;--code-highlight-color:#a0aec0;--code-highlight-bg-color:#4a5568;--code-edit-bg-color:#c3dafe;--code-result-bg-color:#e7edf3;--red-color:#ff4f56;--green-color:#15bd76;--grey-color:#3d556b;--grey-bg-color:#8fa6b2;--dark-color:#0c344b;background-color:var(--main-bgd-color);color:var(--main-font-color)}.gatsby-resp-image-image{box-shadow:none!important}kbd{background:var(--main-bgd-color)!important}.planetscale{path{fill:#e2e8f0!important}}}::selection,code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:var(--selection-bgd-color);color:var(--white-color)}pre{margin:0}a{color:var(--link-color)}h3{display:block;margin-block-end:1em;margin-block-start:1em}h4{margin-block-end:1.33em;margin-block-start:1.33em}h5{margin-block-end:1.67em;margin-block-start:1.67em}h6{margin-block-end:2.33em;margin-block-start:2.33em}h1,h2,h3,h4,h5,h6{margin-inline-end:0;margin-inline-start:0}html{-webkit-text-size-adjust:unset;line-height:unset}body{font-family:Inter,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI}h1,h2,h3,h4,h5,h6{font-family:Inter,sans-serif;font-weight:500}h1.inline-code{display:inline-block}h2{margin:0;margin-block-end:0;margin-block-start:0}section h2,section h3,section h4,section h5,section h6{color:var(--main-font-color);font-weight:600;margin-top:2em;text-decoration:none}section h2{margin-bottom:0}.title-link{opacity:0}h2:hover .title-link,h3:hover .title-link,h4:hover .title-link,h5:hover .title-link,h6:hover .title-link{opacity:1}h2 code,h3 code,h4 code,h5 code,h6 code{font-size:inherit}*{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;box-sizing:border-box}img{margin:0 0 1.45rem;max-width:100%;padding:0}p{margin:1rem 0}li,p{font-family:Inter,sans-serif;font-size:16px;font-style:normal;font-weight:400;line-height:24px}kbd{background:var(--white-color);border-bottom:1px solid rgba(47,55,71,.2);border-radius:4px;box-shadow:0 1px 1px rgba(47,55,71,.6),0 1px 4px rgba(47,55,71,.2);font-family:JetBrainsMono!important;font-size:14px!important;padding:2px 6px;vertical-align:baseline}table{border:1px solid var(--border-color);border-radius:8px;border-spacing:0;margin:0 0 20px;white-space:inherit;width:100%;word-break:normal}table *{font-size:13px}table th{font-size:14px;font-weight:600;padding:12px;text-align:left}table td{border-top:1px solid var(--border-color);padding:12px;vertical-align:top}table code{white-space:nowrap}blockquote{color:var(--code-inner-color);font-family:Inter;font-size:16px;font-style:normal;font-weight:600;line-height:24px;margin:2rem 0;padding-bottom:8px;padding-left:2rem;position:relative}blockquote pre{font-weight:400}blockquote:before{background:var(--code-bgd-color);border-radius:5px;content:"";height:100%;left:0;position:absolute;width:8px}blockquote code{color:var(--code-inner-color)}blockquote p{margin:0}hr{background:var(--border-color);border:0;height:1px;margin:2rem -40px}.list{margin-left:24px;padding:0}.list li{margin-top:10px;padding-left:8px}.list li::marker{color:var(--list-bullet-color);content:"\2022";display:inline-block;font-size:20px;margin-left:-1em;width:1em}.o-list li{margin-top:10px}.clearfix{clear:both}.list li pre .line-no{width:45px}@media (min-width:0px) and (max-width:767px){.pre-highlight,hr{margin-left:-24px;margin-right:-24px}.pre-highlight pre{border-radius:0}.tab-content .copy-button{right:40px}.list li pre .pre-highlight{margin-left:0;margin-right:0}}a.question,span.api,span.concept,span.guide{background:#bee3f8;border-radius:4px;color:#3182ce;font-size:12px;font-weight:600;line-height:24px;padding:2px;text-decoration:none}span.api:before{content:"API"}span.concept:before{content:"CONCEPT"}span.guide:before{content:"GUIDE"}a.question{border-radius:10px;padding:2px 6px}a.question:before{content:"?"}.videoWrapper{height:0;padding-bottom:56.25%;position:relative}.videoWrapper iframe{height:100%;left:0;position:absolute;top:0;width:100%}.gatsby-resp-image-wrapper{margin-left:0!important}@media only percy{iframe,section img{visibility:hidden}#onetrust-consent-sdk{display:none}}#kapa-widget-container .mantine-Button-root{z-index:1000}#kapa-widget-container .mantine-Image-root{height:2rem}#kapa-widget-container .mantine-Text-root{color:#71e8df;filter:drop-shadow(0 .724px 1.251px rgba(14,18,28,.02)) drop-shadow(0 1.608px 2.909px rgba(14,18,28,.04)) drop-shadow(0 2.793px 5.225px rgba(14,18,28,.06)) drop-shadow(0 4.55px 8.671px rgba(14,18,28,.07)) drop-shadow(0 7.485px 14.285px rgba(14,18,28,.08)) drop-shadow(0 13.358px 24.966px rgba(14,18,28,.09)) drop-shadow(0 33px 54px rgba(14,18,28,.07));font-size:1rem}#kapa-widget-container .mantine-Image-image{height:2.5rem!important;width:2.5rem!important}#kapa-widget-container .mantine-Button-root{border:2px solid #71e8df!important;border-radius:8px;height:4rem!important;width:4rem!important}#kapa-widget-container .mantine-Stack-root{margin-top:0!important}.mantine-Modal-body img{margin-bottom:0}.gatsby-resp-image-wrapper{margin-left:inherit!important}:root{--toastify-color-light:#fff;--toastify-color-dark:#121212;--toastify-color-info:#3498db;--toastify-color-success:#07bc0c;--toastify-color-warning:#f1c40f;--toastify-color-error:#e74c3c;--toastify-color-transparent:hsla(0,0%,100%,.7);--toastify-icon-color-info:var(--toastify-color-info);--toastify-icon-color-success:var(--toastify-color-success);--toastify-icon-color-warning:var(--toastify-color-warning);--toastify-icon-color-error:var(--toastify-color-error);--toastify-toast-width:320px;--toastify-toast-background:#fff;--toastify-toast-min-height:64px;--toastify-toast-max-height:800px;--toastify-font-family:sans-serif;--toastify-z-index:9999;--toastify-text-color-light:#757575;--toastify-text-color-dark:#fff;--toastify-text-color-info:#fff;--toastify-text-color-success:#fff;--toastify-text-color-warning:#fff;--toastify-text-color-error:#fff;--toastify-spinner-color:#616161;--toastify-spinner-color-empty-area:#e0e0e0;--toastify-color-progress-light:linear-gradient(90deg,#4cd964,#5ac8fa,#007aff,#34aadc,#5856d6,#ff2d55);--toastify-color-progress-dark:#bb86fc;--toastify-color-progress-info:var(--toastify-color-info);--toastify-color-progress-success:var(--toastify-color-success);--toastify-color-progress-warning:var(--toastify-color-warning);--toastify-color-progress-error:var(--toastify-color-error)}.Toastify__toast-container{box-sizing:border-box;color:#fff;padding:4px;position:fixed;-webkit-transform:translate3d(0,0,var(--toastify-z-index) px);width:var(--toastify-toast-width);z-index:var(--toastify-z-index)}.Toastify__toast-container--top-left{left:1em;top:1em}.Toastify__toast-container--top-center{left:50%;top:1em;transform:translateX(-50%)}.Toastify__toast-container--top-right{right:1em;top:1em}.Toastify__toast-container--bottom-left{bottom:1em;left:1em}.Toastify__toast-container--bottom-center{bottom:1em;left:50%;transform:translateX(-50%)}.Toastify__toast-container--bottom-right{bottom:1em;right:1em}@media only screen and (max-width:480px){.Toastify__toast-container{left:0;margin:0;padding:0;width:100vw}.Toastify__toast-container--top-center,.Toastify__toast-container--top-left,.Toastify__toast-container--top-right{top:0;transform:translateX(0)}.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-right{bottom:0;transform:translateX(0)}.Toastify__toast-container--rtl{left:auto;right:0}}.Toastify__toast{border-radius:4px;box-shadow:0 1px 10px 0 rgba(0,0,0,.1),0 2px 15px 0 rgba(0,0,0,.05);box-sizing:border-box;cursor:pointer;direction:ltr;display:flex;font-family:var(--toastify-font-family);justify-content:space-between;margin-bottom:1rem;max-height:var(--toastify-toast-max-height);min-height:var(--toastify-toast-min-height);overflow:hidden;padding:8px;position:relative;z-index:0}.Toastify__toast--rtl{direction:rtl}.Toastify__toast-body{align-items:center;display:flex;flex:1 1 auto;margin:auto 0;padding:6px}.Toastify__toast-body>div:last-child{flex:1 1}.Toastify__toast-icon{display:flex;flex-shrink:0;margin-inline-end:10px;width:20px}.Toastify--animate{animation-duration:.7s;animation-fill-mode:both}.Toastify--animate-icon{animation-duration:.3s;animation-fill-mode:both}@media only screen and (max-width:480px){.Toastify__toast{border-radius:0;margin-bottom:0}}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--colored.Toastify__toast--default,.Toastify__toast-theme--light{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{background:var(--toastify-color-info);color:var(--toastify-text-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{background:var(--toastify-color-success);color:var(--toastify-text-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{background:var(--toastify-color-warning);color:var(--toastify-text-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{background:var(--toastify-color-error);color:var(--toastify-text-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning{background:var(--toastify-color-transparent)}.Toastify__close-button{align-self:flex-start;background:transparent;border:none;color:#fff;cursor:pointer;opacity:.7;outline:none;padding:0;transition:.3s ease}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:focus,.Toastify__close-button:hover{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{bottom:0;height:5px;left:0;opacity:.7;position:absolute;transform-origin:left;width:100%;z-index:var(--toastify-z-index)}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{left:auto;right:0;transform-origin:right}.Toastify__spinner{animation:Toastify__spin .65s linear infinite;border:2px solid;border-color:var(--toastify-spinner-color-empty-area);border-radius:100%;border-right-color:var(--toastify-spinner-color);box-sizing:border-box;height:20px;width:20px}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,0,0)}to{opacity:0;transform:translate3d(2000px,0,0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,0,0)}to{opacity:0;transform:translate3d(-2000px,0,0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,-10px,0)}40%,45%{opacity:1;transform:translate3d(0,20px,0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,10px,0)}40%,45%{opacity:1;transform:translate3d(0,-20px,0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--bottom-left,.Toastify__bounce-enter--top-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--bottom-right,.Toastify__bounce-enter--top-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--bottom-left,.Toastify__bounce-exit--top-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--bottom-right,.Toastify__bounce-exit--top-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{animation-timing-function:ease-in;opacity:0;transform:perspective(400px) rotateX(90deg)}40%{animation-timing-function:ease-in;transform:perspective(400px) rotateX(-20deg)}60%{opacity:1;transform:perspective(400px) rotateX(10deg)}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:perspective(400px)}30%{opacity:1;transform:perspective(400px) rotateX(-20deg)}to{opacity:0;transform:perspective(400px) rotateX(90deg)}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translateZ(0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translateZ(0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translateZ(0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translateZ(0)}}@keyframes Toastify__slideOutRight{0%{transform:translateZ(0)}to{transform:translate3d(110%,0,0);visibility:hidden}}@keyframes Toastify__slideOutLeft{0%{transform:translateZ(0)}to{transform:translate3d(-110%,0,0);visibility:hidden}}@keyframes Toastify__slideOutDown{0%{transform:translateZ(0)}to{transform:translate3d(0,500px,0);visibility:hidden}}@keyframes Toastify__slideOutUp{0%{transform:translateZ(0)}to{transform:translate3d(0,-500px,0);visibility:hidden}}.Toastify__slide-enter--bottom-left,.Toastify__slide-enter--top-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--bottom-right,.Toastify__slide-enter--top-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--bottom-left,.Toastify__slide-exit--top-left{animation-name:Toastify__slideOutLeft}.Toastify__slide-exit--bottom-right,.Toastify__slide-exit--top-right{animation-name:Toastify__slideOutRight}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown}@keyframes Toastify__spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}</style><title data-gatsby-head="true">Transactions and batch queries (Reference)</title><link rel="canonical" href="transactions.html" data-gatsby-head="true"><link rel="icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAGX0lEQVR4AaWXA3AsWxeFz0xybdu2bSNOnm3btm37Xdu2bZuxnWmsf+3KnK6uP75vVX0Tzz5n99qIKqtS0zM9RJ08f7m8YZq3A/g0z2cEEQXAQ1RZkJey4vln4SovgPmZ2Tk4ce6S4TMMUJ8QZZqWl6jSIi+lx7ICiQLwZG6eD6PvftanWgwyHnr7SxtUTm7eAKJs2/YSVRrkpVQwsJeoS9FxLQAkffjLNKhWg+1ag8Lg6Tza2H3kJKgpRH43gKjSIC+lgocIIEqC8PmjWt8gs2q/IFTuNRFykLte+RhUbkpaRmeibMBLVEnoT4pF3ygnLy8IVPhjr1uq82h4u47Fzc+9h4jH34DqMMKQg1HfE2Xxb4gqCf1JcXiImrViQ2UAR+as3CjBrDqDw6HaDcP8NVtw/NwlqKb97Sc//A5U2pW4hBZEAfD+5ypwGe+t1IxMtBl/q1G+x3hU7x+CSr0nYf+x0xCNv+8FlOs2zmBgUB/kZ8EOJKo4iv2hNl5CcmpXANnPf/Yzbz3crk3jle8xAW0n3oY0Hkq0cstuqCb97Le++wtU7LEzF+oR3RuuOQM6hUv3HD2JCj3Gm1X7BqHGgBCoTqMR9NArEPERQTT4lsdQo3+IkZSaDuoFoizbDiSqKIr8gVNKpnUrqFF3Pm2K8SR4zQGhUO2H47Wvf4dIeoJI/KEa9ra++mcuqLPLN+2sSnQWSp8Bbbz9x8/UAXDh19lLJfWWBHYy0HEU5q7aBBFbMkQmP3YJvQdNRt5gZrFLUg/qLJQtAzQeUQC+jk5IQsNhUUZF1nu1fsFS/6jSJ0g+x4nzlyCiXyQ4RL/PXQbVoJf11/wVoA4FPfRyOaKzUHIGtPHSMrIGy3vf9/pntmo/Avr21Rm4XPfx6Bxyt5N627YFiOTmLcbchE5Bd5n+zNxMdCMruRXLSZVSctrN63bulzZrVu8fLMHd6cd1T70FEQ8LLf0ovvhrNrPQ25q3ejOobURxcHmI+n/cX7hr/jGOV/SOetAMYLeTmtcHkEzQD3jv5ylOUC2dhaTUNNRhqQ646VELFB/rZFJoFtzDxkPU+auxzQAkfPL7DKi2w+yaA/NTr2GZQaph6cYdfuNZcEt74Y1v/4Rq1Mdcs30fqJVE8bBeotw4n+jeDeDv0xevSiCzcu/JYjYneDUZPn0mQxrRhaux8N8OVIEsXI6JR8WeEzDh/hdsf6kOJQWyoJ97AFFcLCaCinryTUt1HKmN5yBeCOw2Dr2iHnCaj42C0ll58oPvoJoNMHceOg5qtn9hCSiwkLhKZPOi9dtk2JhiNndwx4AdRuK2Fz8oYEAtXZYiKVMa1r7xmXdAmemZWT0JLw0vUYITfNvewzWlh9/1/PvS5Wz37TW6A3759xzHgEVJH+7Olz+Caj3EPHrmAqjf9MJS6EICYCfHLqTr1SjkAFINsgOwPIvNgHs+7D16CrKwPPjWF6Cy4pNS2hJnzsgnjgd4o3D/wlHAA2JGGb/1h0YhOj7RMVxRsolhmBCFPfa6DC/Db9zP3TFd/d/2Evn837OXo1FrQKhZmQElsPv2g25+DEVJDiRZ4UWcz0UrOKppRuuNb/8Cdf7TP2ZWJBLLow8gZvQQdebS1cYAYr6bOl82HscL8pHmxP1vfq6droNKQPm6wGFOX7yCn2ctwbDbn4Kq18N69J2vIe+9YvOuakQfoOD2wze7C9TIQkbwD9MXwr+CF+gB3Bmxdd8RvMox3S3ifnjaDrXYjIy6g8PNu1/9xIxLTAb1u/sRFLeELD544iwq9Zpo6iEkW5DUtNuAcUkpmM094I6XPkKDYVGyFVmq5SCjY8jd1itf/Yat+4/Y2Tm5oPKYlSmkup45hR5A/2cTk5DUHkD6Oz/8A1nDxAP1hkbiYnQc+JikFDHq7mdRods4m0uIWaHrWGPsfc/bP81YJKnXBo0mU8ktV2ITGpECi2pJi+gzeT4fekbcb6hOo6QToh5vGdAmP7W8sXnv659BmpcMIMq0gYMAPqEvRm7ctb8yUX502j2l3QmdsSxppw98XErMvjc8bL/NrOw+csKWw1EZdv6weZJdrpOnwzAvUX500EDiLdNSqicXzdZZUhlLA529dNUWAThDfuUnkecuR9cjSuO/YaD7tte8FXMn8BKVkp7RhHFfBPC2z2eMmLF0bQWiNHK7ArcsJf8DLMRetFCfZDMAAAAASUVORK5CYII=" data-gatsby-head="true"><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript> <style data-styled="" data-styled-version="5.3.11">.jcobFZ{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;max-width:100%;text-align:left;z-index:1000;margin:4px;width:-webkit-max-content;width:-moz-max-content;width:max-content;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;box-sizing:border-box;border-radius:6px;-webkit-text-decoration:none;text-decoration:none;cursor:pointer;position:relative;line-height:1;-webkit-transition:background-color .1s ease,color .2s ease;transition:background-color .1s ease,color .2s ease;font-family:"Inter",system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:700;font-size:18px;border:none;border:1px solid #16A394;background-color:#16A394;color:white;padding:16px 24px;false;}/*!sc*/
.jcobFZ:hover{border:1px solid #187367;background-color:#187367;color:white;}/*!sc*/
.jcobFZ:hover:before{background-color:white;}/*!sc*/
.jcobFZ:hover > .btn-arrow{-webkit-transform:translate(4px,-50%);-ms-transform:translate(4px,-50%);transform:translate(4px,-50%);}/*!sc*/
.jcobFZ:focus:after{content:"";position:absolute;width:calc(100% + 4px);height:calc(100% + 4px);left:-4px;top:-4px;border-radius:9px;box-sizing:content-box;border:2px solid white;}/*!sc*/
.jcobFZ:active{border:1px solid #154F47;background-color:#154F47;color:white;}/*!sc*/
.jcobFZ:active:before{background-color:white;}/*!sc*/
data-styled.g1[id="button__StyledLink-sc-187srku-0"]{content:"jcobFZ,"}/*!sc*/
.kKQHTI{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;max-width:100%;text-align:left;z-index:1000;margin:4px;width:-webkit-max-content;width:-moz-max-content;width:max-content;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;box-sizing:border-box;border-radius:6px;-webkit-text-decoration:none;text-decoration:none;cursor:pointer;position:relative;line-height:1;-webkit-transition:background-color .1s ease,color .2s ease;transition:background-color .1s ease,color .2s ease;font-family:"Inter",system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:700;font-size:18px;border:none;border:1px solid #5A67D8;background-color:#5A67D8;color:white;padding:16px 24px;false;}/*!sc*/
.kKQHTI:hover{border:1px solid #4C51BF;background-color:#4C51BF;color:white;}/*!sc*/
.kKQHTI:hover:before{background-color:white;}/*!sc*/
.kKQHTI:hover > .btn-arrow{-webkit-transform:translate(4px,-50%);-ms-transform:translate(4px,-50%);transform:translate(4px,-50%);}/*!sc*/
.kKQHTI:focus:after{content:"";position:absolute;width:calc(100% + 4px);height:calc(100% + 4px);left:-4px;top:-4px;border-radius:9px;box-sizing:content-box;border:2px solid white;}/*!sc*/
.kKQHTI:active{border:1px solid #434190;background-color:#434190;color:white;}/*!sc*/
.kKQHTI:active:before{background-color:white;}/*!sc*/
data-styled.g2[id="button__StyledBtn-sc-187srku-1"]{content:"kKQHTI,"}/*!sc*/
.iKeFqQ form{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin-bottom:48px;}/*!sc*/
@media only screen and (min-width:768px){.iKeFqQ form{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;margin-bottom:0;}}/*!sc*/
.iKeFqQ .input-name{margin-bottom:24px;width:100%;}/*!sc*/
@media only screen and (min-width:768px){.iKeFqQ .input-name{max-width:264px;width:auto;}}/*!sc*/
.iKeFqQ .input-email{margin-bottom:32px;width:100%;}/*!sc*/
@media only screen and (min-width:768px){.iKeFqQ .input-email{width:auto;max-width:312px;}}/*!sc*/
.iKeFqQ .input-name,.iKeFqQ .input-email{position:relative;width:100%;}/*!sc*/
.iKeFqQ .input-name .leading-icon,.iKeFqQ .input-email .leading-icon{left:24px;color:#718096;display:none;position:absolute;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);}/*!sc*/
@media only screen and (min-width:360px){.iKeFqQ .input-name .leading-icon,.iKeFqQ .input-email .leading-icon{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}/*!sc*/
@media only screen and (min-width:768px){.iKeFqQ .input-name,.iKeFqQ .input-email{margin-right:24px;margin-bottom:0;width:auto;}}/*!sc*/
.iKeFqQ .input-el{box-sizing:border-box;width:100%;line-height:1.25rem;font-size:18px;height:48px;border:none;border-radius:10px;border:1px solid #E2E8F0;outline:0;padding:12px 25px 12px 58px;}/*!sc*/
.iKeFqQ .input-el:focus{outline:1px solid #2D3748;}/*!sc*/
.iKeFqQ .input-el::-webkit-input-placeholder{color:#718096;}/*!sc*/
.iKeFqQ .input-el::-moz-placeholder{color:#718096;}/*!sc*/
.iKeFqQ .input-el:-ms-input-placeholder{color:#718096;}/*!sc*/
.iKeFqQ .input-el::placeholder{color:#718096;}/*!sc*/
.iKeFqQ button{content:'Subscribe for updates';max-height:48px;white-space:nowrap;width:100%;}/*!sc*/
@media only screen and (min-width:768px){.iKeFqQ button{width:-webkit-max-content;width:-moz-max-content;width:max-content;}}/*!sc*/
.iKeFqQ button .button{background-color:transparent;background-image:none;color:inherit;cursor:pointer;font-weight:inherit;line-height:inherit;font-size:100%;margin:0;padding:0;border:0;}/*!sc*/
data-styled.g4[id="FooterNewsletterForm__Container-sc-1diux8q-0"]{content:"iKeFqQ,"}/*!sc*/
.hyHLmQ{background:transparent;border:none;padding:0;cursor:pointer;}/*!sc*/
.geWZl{background:transparent;border:none;padding:0;cursor:pointer;color:var(--link-color);cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline;}/*!sc*/
data-styled.g5[id="customLink__CustomButton-sc-1xpvtl4-0"]{content:"hyHLmQ,geWZl,"}/*!sc*/
.gyaQPC{background:transparent;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;color:#A0AEC0;}/*!sc*/
.gyaQPC > div{width:100%;}/*!sc*/
@media (prefers-color-scheme:dark){.gyaQPC form i{color:#E2E8F0 !important;}.gyaQPC form .input-el{background:#2D3748 !important;border-color:#4A5568 !important;color:#F7FAFC !important;}.gyaQPC form .input-el::-webkit-input-placeholder{color:#E2E8F0;}.gyaQPC form .input-el::-moz-placeholder{color:#E2E8F0;}.gyaQPC form .input-el:-ms-input-placeholder{color:#E2E8F0;}.gyaQPC form .input-el::placeholder{color:#E2E8F0;}}/*!sc*/
data-styled.g6[id="footer__FooterWrapper-sc-1ha7kr1-0"]{content:"gyaQPC,"}/*!sc*/
.HLahV{box-sizing:border-box;margin:auto;width:100%;padding:0 2rem;}/*!sc*/
@media only screen and (min-width:940px){.HLahV{padding:0 1.5rem;max-width:1248px;}}/*!sc*/
data-styled.g7[id="footer__Container-sc-1ha7kr1-1"]{content:"HLahV,"}/*!sc*/
.cRpoei{position:absolute;left:0;background-color:#1A202C;padding:72px 0 24px;width:100%;}/*!sc*/
@media only screen and (min-width:768px){.cRpoei{padding:46px 0 100px;}}/*!sc*/
data-styled.g8[id="footer__Container-sc-1ha7kr1-2"]{content:"cRpoei,"}/*!sc*/
.iihKZd{font-family:'Inter',system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI';}/*!sc*/
@media only screen and (min-width:940px){.iihKZd{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}/*!sc*/
data-styled.g9[id="footer__Row-sc-1ha7kr1-3"]{content:"iihKZd,"}/*!sc*/
.OgrUt{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/
data-styled.g10[id="footer__SocialLinksWrapper-sc-1ha7kr1-4"]{content:"OgrUt,"}/*!sc*/
.ilLHHY{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}/*!sc*/
.ilLHHY .prisma-logo-img{margin-bottom:0.5rem;}/*!sc*/
data-styled.g11[id="footer__PrismaLogo-sc-1ha7kr1-5"]{content:"ilLHHY,"}/*!sc*/
.kxtyct{font-family:'Inter',system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI';color:white;font-size:1.125rem;font-weight:400;}/*!sc*/
data-styled.g12[id="footer__PrismaDataText-sc-1ha7kr1-6"]{content:"kxtyct,"}/*!sc*/
.cCVpUT{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-family:'Inter',system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI';-webkit-flex-direction:column-reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse;}/*!sc*/
@media only screen and (min-width:768px){.cCVpUT{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}/*!sc*/
data-styled.g13[id="footer__FooterWrapper-sc-1ha7kr1-7"]{content:"cCVpUT,"}/*!sc*/
.ksIreH{margin-bottom:0;}/*!sc*/
.ksIreH > h4{margin-bottom:16px;margin-right:32px;}/*!sc*/
@media only screen and (min-width:768px){.ksIreH{padding:64px 0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin-bottom:64px;border-top:1px solid #E2E8F0;border-bottom:1px solid #E2E8F0;}}/*!sc*/
@media only screen and (min-width:1024px){.ksIreH{margin-top:64px;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.ksIreH > h4{margin-bottom:0;}}/*!sc*/
data-styled.g14[id="footer__NewsletterRow-sc-1ha7kr1-8"]{content:"ksIreH,"}/*!sc*/
.eFLlKD{margin-bottom:48px;}/*!sc*/
@media only screen and (min-width:940px){.eFLlKD{margin-bottom:0;padding:0 0.5rem;-webkit-flex:1;-ms-flex:1;flex:1;}}/*!sc*/
data-styled.g15[id="footer__Column-sc-1ha7kr1-9"]{content:"eFLlKD,"}/*!sc*/
.ebqDAJ{text-transform:uppercase;font-weight:400;font-size:1rem;color:white;-webkit-letter-spacing:0.08em;-moz-letter-spacing:0.08em;-ms-letter-spacing:0.08em;letter-spacing:0.08em;margin-top:0;margin-bottom:1rem;}/*!sc*/
@media only screen and (min-width:940px){.ebqDAJ{margin-bottom:0;}}/*!sc*/
data-styled.g16[id="footer__Title-sc-1ha7kr1-10"]{content:"ebqDAJ,"}/*!sc*/
.bXdhxN{color:white;font-size:1.125rem;font-weight:400;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;cursor:pointer;font-weight:500;box-sizing:border-box;-webkit-text-decoration:none;text-decoration:none;line-height:1.3888888888888888;padding:1rem 0;}/*!sc*/
@media only screen and (min-width:940px){.bXdhxN{padding:0.5rem 0;}}/*!sc*/
.bXdhxN:hover{color:#5A67D8;}/*!sc*/
.bXdhxN > i{margin:5px 0 0 3px;}/*!sc*/
.bXdhxN > span{margin-left:6px;}/*!sc*/
.bXdhxN .link-title-label{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/
.bXdhxN .link-title-label .label{margin-left:8px;background:#5A67D8;border-radius:99px;padding:6px 8px;font-family:'Barlow';font-style:normal;font-weight:700;font-size:8px;line-height:100%;white-space:nowrap;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-letter-spacing:0.1em;-moz-letter-spacing:0.1em;-ms-letter-spacing:0.1em;letter-spacing:0.1em;text-transform:uppercase;color:white;}/*!sc*/
data-styled.g17[id="footer__StyledLink-sc-1ha7kr1-11"]{content:"bXdhxN,"}/*!sc*/
.iAgQES{-webkit-box-pack:start;-webkit-justify-content:start;-ms-flex-pack:start;justify-content:start;gap:20px;display:none;}/*!sc*/
@media only screen and (min-width:768px){.iAgQES{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}/*!sc*/
.iAgQES a{font-size:1.375rem;color:white;}/*!sc*/
.iAgQES a:hover{color:#5A67D8;}/*!sc*/
.iAgQES i{pointer-events:none;}/*!sc*/
data-styled.g18[id="footer__SocialLinksContainer-sc-1ha7kr1-12"]{content:"iAgQES,"}/*!sc*/
.jOgsrP{color:#718096 !important;line-height:1.6rem;font-weight:normal;margin:0;}/*!sc*/
.jOgsrP a,.jOgsrP button{color:#718096 !important;-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
.jOgsrP a:hover,.jOgsrP button:hover,.jOgsrP a:focus,.jOgsrP button:focus{color:#4A5568 !important;-webkit-text-decoration:underline;text-decoration:underline;cursor:pointer;}/*!sc*/
@media (prefers-color-scheme:dark){.jOgsrP a,.jOgsrP button{color:#A0AEC0 !important;}.jOgsrP a:hover,.jOgsrP button:hover,.jOgsrP a:focus,.jOgsrP button:focus{color:#718096 !important;}}/*!sc*/
data-styled.g19[id="parentTitleComp__BreadcrumbTitle-sc-f3mbxz-0"]{content:"jOgsrP,"}/*!sc*/
.jkqxtT{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;max-width:1240px;width:100%;margin:0 auto;padding:12px 16px;border-radius:8px;border:1px solid #cbd5e0;background:#fff;-webkit-transition:-webkit-transform 50ms ease-out;-webkit-transition:transform 50ms ease-out;transition:transform 50ms ease-out;-webkit-transform-origin:center left;-ms-transform-origin:center left;transform-origin:center left;}/*!sc*/
.jkqxtT form{width:100%;position:relative;height:36px;-webkit-transition:-webkit-transform 50ms ease-out;-webkit-transition:transform 50ms ease-out;transition:transform 50ms ease-out;}/*!sc*/
.jkqxtT.opened{position:relative;z-index:100001;max-width:1240px;width:100%;background:#fff;box-shadow:0px 25px 50px -12px #00000040;border:2px solid #667eea;border-radius:8px;-webkit-transform-origin:center;-ms-transform-origin:center;transform-origin:center;-webkit-transform:scaleY(1.1) translate(-1px,-5px);-ms-transform:scaleY(1.1) translate(-1px,-5px);transform:scaleY(1.1) translate(-1px,-5px);}/*!sc*/
.jkqxtT.opened .clear{border-radius:6px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}/*!sc*/
.jkqxtT.opened .clear svg path{stroke:#4A5568;}/*!sc*/
.jkqxtT.opened form{-webkit-transform:scaleY(0.9);-ms-transform:scaleY(0.9);transform:scaleY(0.9);}/*!sc*/
@media (max-width:360){.jkqxtT{width:auto;-webkit-flex:1;-ms-flex:1;flex:1;}.jkqxtT form{width:100%;}}/*!sc*/
.jkqxtT .clear{display:none;}/*!sc*/
.jkqxtT form{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/
.jkqxtT form button.ais-SearchBox-submit{display:none;}/*!sc*/
.jkqxtT form button.ais-SearchBox-reset{background:transparent;border:transparent;outline:none;}/*!sc*/
.jkqxtT form input{width:100%;background:transparent;outline:none;padding:0rem 2rem;font-family:"Inter",system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-style:normal;font-weight:normal;font-size:1rem;line-height:100%;border-width:0;}/*!sc*/
.jkqxtT form input::-webkit-input-placeholder{content:'Search Documentation...';color:#A0AEC0;opacity:1;}/*!sc*/
.jkqxtT form input::-moz-placeholder{content:'Search Documentation...';color:#A0AEC0;opacity:1;}/*!sc*/
.jkqxtT form input:-ms-input-placeholder{content:'Search Documentation...';color:#A0AEC0;opacity:1;}/*!sc*/
.jkqxtT form input::placeholder{content:'Search Documentation...';color:#A0AEC0;opacity:1;}/*!sc*/
.jkqxtT form input[type='search']::-webkit-search-decoration,.jkqxtT form input[type='search']::-webkit-search-cancel-button,.jkqxtT form input[type='search']::-webkit-search-results-button,.jkqxtT form input[type='search']::-webkit-search-results-decoration{-webkit-appearance:none;}/*!sc*/
.jkqxtT .slash{border:1px solid #CBD5E0;border-radius:4px;color:#CBD5E0;min-width:18px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}/*!sc*/
@media (min-width:0px) and (max-width:768){.jkqxtT .slash{display:none;}}/*!sc*/
@media (prefers-color-scheme:dark){.jkqxtT{background:#2D3748;border-color:#4A5568;}.jkqxtT form input{color:#F7FAFC;}.jkqxtT form input::-webkit-input-placeholder{color:#CBD5E0;}.jkqxtT form input::-moz-placeholder{color:#CBD5E0;}.jkqxtT form input:-ms-input-placeholder{color:#CBD5E0;}.jkqxtT form input::placeholder{color:#CBD5E0;}.jkqxtT form svg path{stroke:#CBD5E0;}.jkqxtT.opened{background:#2D3748;}.jkqxtT.opened .clear svg path{stroke:#F7FAFC;}}/*!sc*/
data-styled.g21[id="input__SearchBoxDiv-sc-1nmahfx-0"]{content:"jkqxtT,"}/*!sc*/
.gZvrwL{min-width:1em;pointer-events:none;position:absolute;}/*!sc*/
data-styled.g22[id="input__SearchIcon-sc-1nmahfx-1"]{content:"gZvrwL,"}/*!sc*/
.jRFKZl{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(8,35,51,0.3);opacity:0;pointer-events:none;z-index:10000;margin-top:-80px;height:100vh;opacity:0;pointer-events:none;}/*!sc*/
data-styled.g25[id="overlay__StyledOverlay-sc-1uuldzq-0"]{content:"jRFKZl,"}/*!sc*/
.iVglbw{list-style:none;padding:0;margin:0.75rem 0 1.5rem;}/*!sc*/
.iVglbw.has-border{border-left:2px solid #E2E8F0;margin-left:-0.75rem;}/*!sc*/
data-styled.g27[id="treeNode__List-sc-a5dz51-0"]{content:"iVglbw,"}/*!sc*/
.iPyMQq{font-size:.875rem;line-height:1.25;margin-bottom:0.75rem;position:relative;}/*!sc*/
.iPyMQq a{-webkit-transition:color 150ms ease 0s;transition:color 150ms ease 0s;color:#718096 !important;-webkit-text-decoration:none;text-decoration:none;vertical-align:middle;}/*!sc*/
.iPyMQq a:hover{color:#1A202C !important;}/*!sc*/
.iPyMQq a .tag{position:absolute;right:0;color:#A0AEC0;font-size:.875rem;font-style:normal;font-weight:600;background:#EDF2F7;border-radius:5px;padding:2px 5px;text-transform:capitalize;}/*!sc*/
.iPyMQq a .tag.small{font-size:12px;}/*!sc*/
.iPyMQq a .item-collapser{background:transparent;position:absolute;left:-15px;top:7px;padding:0;border:0;}/*!sc*/
.iPyMQq a .item-collapser .right,.iPyMQq a .item-collapser .down{-webkit-transition:opacity 0.5s linear;transition:opacity 0.5s linear;}/*!sc*/
.iPyMQq a .item-collapser .right.open,.iPyMQq a .item-collapser .down.close{display:none;opacity:0;}/*!sc*/
.iPyMQq a .item-collapser .right.close,.iPyMQq a .item-collapser .down.open{display:block;opacity:1;position:absolute;margin-top:-4px;}/*!sc*/
.iPyMQq a .item-collapser .down.open{margin-top:-2px;}/*!sc*/
.iPyMQq a .item-collapser:hover,.iPyMQq a .item-collapser:focus,.iPyMQq a .item-collapser:active{outline:none;}/*!sc*/
.iPyMQq .active-item{color:#3182CE !important;font-weight:700;}/*!sc*/
.iPyMQq.top-level{margin-top:2rem;}/*!sc*/
.iPyMQq.top-level > a{font-size:1.125rem;color:#1A202C !important;font-weight:600;-webkit-letter-spacing:-0.01em;-moz-letter-spacing:-0.01em;-ms-letter-spacing:-0.01em;letter-spacing:-0.01em;}/*!sc*/
.iPyMQq.top-level > ul{margin-top:0.75rem;}/*!sc*/
.iPyMQq.bottom-level{margin-left:1.25rem;}/*!sc*/
.iPyMQq.static-link{margin-top:1.25rem;}/*!sc*/
.iPyMQq.static-link > a{color:#1A202C !important;text-transform:uppercase;font-weight:bold;font-size:.75rem;line-height:0.875rem;-webkit-letter-spacing:0.02em;-moz-letter-spacing:0.02em;-ms-letter-spacing:0.02em;letter-spacing:0.02em;}/*!sc*/
.iPyMQq.static-link > a:hover{color:#1A202C !important;}/*!sc*/
.iPyMQq.last-level{padding-left:1.5rem;}/*!sc*/
.iPyMQq .collapse-title{position:relative;cursor:pointer;}/*!sc*/
.iPyMQq .collapse-title svg{-webkit-transition:-webkit-transform 0.2s ease;-webkit-transition:transform 0.2s ease;transition:transform 0.2s ease;}/*!sc*/
@media (prefers-color-scheme:dark){.iPyMQq a{color:#A0AEC0 !important;}.iPyMQq a:hover{color:#CBD5E0 !important;}.iPyMQq a .tag{color:#F7FAFC !important;background:#2D3748 !important;}.iPyMQq .active-item{color:#7F9CF5 !important;}.iPyMQq.top-level > a,.iPyMQq.static-link > a{color:#F7FAFC !important;}.iPyMQq.top-level > a:hover,.iPyMQq.static-link > a:hover{color:#F7FAFC !important;}}/*!sc*/
data-styled.g28[id="treeNode__ListItem-sc-a5dz51-1"]{content:"iPyMQq,"}/*!sc*/
.cyByzh{width:272px;height:100%;}/*!sc*/
data-styled.g29[id="sidebar__SidebarContainer-sc-u94sja-0"]{content:"cyByzh,"}/*!sc*/
.bMsMoj{margin:0;overflow:auto;height:auto;}/*!sc*/
.bMsMoj .mobile-only{display:none;width:100%;background:#F7FAFC;padding:0.5rem 1rem;}/*!sc*/
@media only screen and (max-width:1024px){.bMsMoj .mobile-only{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.bMsMoj .mobile-only > ul{width:100%;}}/*!sc*/
data-styled.g30[id="sidebar__Sidebar-sc-u94sja-1"]{content:"bMsMoj,"}/*!sc*/
.fzetWo{list-style:none;padding:0 7px 0 1rem;margin:-1.25rem 0 0;}/*!sc*/
@media only screen and (min-width:1024px){.fzetWo{padding-top:16px;}}/*!sc*/
data-styled.g31[id="sidebar__List-sc-u94sja-2"]{content:"fzetWo,"}/*!sc*/
.beNtqd{height:26px;fill:#2d3748;}/*!sc*/
.clMfPP{height:26px;fill:#ffffff;}/*!sc*/
data-styled.g32[id="Logo-sc-c81z3l-0"]{content:"beNtqd,clMfPP,"}/*!sc*/
.gMrSws{max-width:1240px;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;gap:16px;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/
.gMrSws .log-btn{padding:6px 16px;font-size:16px;font-weight:700;line-height:22.4px;}/*!sc*/
@media (min-width:0px) and (max-width:600px){.gMrSws .log-btn{display:none;}}/*!sc*/
.gMrSws .log-btn-mobile{font-size:20px;line-height:28px;padding:10px;width:calc(100% - 70px);margin:24px 35px 0 35px;}/*!sc*/
@media (min-width:600px){.gMrSws .log-btn-mobile{display:none;}}/*!sc*/
.gMrSws > *{padding:0;}/*!sc*/
.gMrSws > * a{-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
.gMrSws > * .container{padding:0;}/*!sc*/
.gMrSws > * .menu{background:transparent;border:0;}/*!sc*/
.gMrSws > * .list{z-index:120;}/*!sc*/
.gMrSws > * .menu a,.gMrSws > * .list a{color:currentcolor !important;-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
.gMrSws > * .menu a:hover,.gMrSws > * .list a:hover{color:#fff !important;}/*!sc*/
@media (min-width:0px) and (max-width:940px){.gMrSws{-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}}/*!sc*/
data-styled.g33[id="header__BucketHeader-sc-1w16195-0"]{content:"gMrSws,"}/*!sc*/
.itgNGF{background:#fff;border-radius:5px;color:#4A5568;display:none;padding:0 0.875rem;height:40px;margin-left:0.5rem;font-weight:600;position:relative;z-index:3;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;cursor:pointer;}/*!sc*/
.itgNGF svg{margin-left:0.5rem;}/*!sc*/
@media (min-width:0px) and (max-width:940px){.itgNGF{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}}/*!sc*/
data-styled.g34[id="header__DocsMobileButton-sc-1w16195-1"]{content:"itgNGF,"}/*!sc*/
.hAoImM{background:var(--header-bg-color);padding:0 16px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;border-bottom:1px solid #e2e8f0;position:relative;z-index:202;width:100%;}/*!sc*/
@media (min-width:0px) and (max-width:768){.hAoImM{padding:12px 16px;}}/*!sc*/
@media (min-width:0px) and (max-width:940px){.hAoImM{z-index:105;padding:20px 16px;}}/*!sc*/
.hAoImM .dark{display:none;}/*!sc*/
.hAoImM .light{display:block;}/*!sc*/
@media (prefers-color-scheme:dark){.hAoImM{border-color:#242c3a;}.hAoImM .dark{display:block;}.hAoImM .light{display:none;}}/*!sc*/
data-styled.g37[id="header__HeaderWrapper-sc-1w16195-4"]{content:"hAoImM,"}/*!sc*/
.fFnNKf{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:1rem;}/*!sc*/
.fFnNKf a,.fFnNKf button{padding:30px 8px;border-bottom:2px solid transparent;}/*!sc*/
.fFnNKf a:hover,.fFnNKf button:hover{border-bottom:2px solid black;}/*!sc*/
@media (min-width:0px) and (max-width:940px){.fFnNKf{display:none;}}/*!sc*/
data-styled.g38[id="header__NonMobileMenu-sc-1w16195-5"]{content:"fFnNKf,"}/*!sc*/
.lcEBVH{-webkit-transition:all 0.1s ease-in;transition:all 0.1s ease-in;color:#CBD5E0 !important;}/*!sc*/
@media (min-width:0px) and (max-width:768){.lcEBVH{margin:0;padding:0;}}/*!sc*/
data-styled.g39[id="header__NavLink-sc-1w16195-6"]{content:"lcEBVH,"}/*!sc*/
.cMhiDt{color:#2D3748 !important;font-family:Inter;font-size:16px;font-weight:600;line-height:100%;font-weight:600;-webkit-text-decoration:none;text-decoration:none;white-space:nowrap;cursor:pointer;}/*!sc*/
.cMhiDt span{padding:8px;border-radius:8px;}/*!sc*/
.cMhiDt.link{padding:0;margin:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#718096 !important;}/*!sc*/
.cMhiDt .menu-item{padding:32px 30px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-top:1px solid #E2E8F0;color:#718096;font-weight:600;}/*!sc*/
.cMhiDt .menu-item:hover{color:#1A202C;}/*!sc*/
.cMhiDt:hover{border-color:#4C51BF !important;}/*!sc*/
.cMhiDt.active-item span{background:#EDF2F7;color:#4C51BF !important;}/*!sc*/
@media (min-width:0px) and (max-width:768){.cMhiDt.active-item{background:transparent;color:#4A5568 !important;padding:0.25rem 0.5rem;}.cMhiDt svg{display:block;}}/*!sc*/
@media (min-width:768) and (max-width:940px){.cMhiDt{font-size:14px;}}/*!sc*/
@media (prefers-color-scheme:dark){.cMhiDt{color:var(--main-font-color) !important;}.cMhiDt.active-item span{background:#2D3748;color:#7F9CF5 !important;}}/*!sc*/
.fqsarI{color:#2D3748 !important;font-family:Inter;font-size:16px;font-weight:600;line-height:100%;font-weight:600;-webkit-text-decoration:none;text-decoration:none;white-space:nowrap;cursor:pointer;}/*!sc*/
.fqsarI span{padding:8px;border-radius:8px;}/*!sc*/
.fqsarI.link{padding:0;margin:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#718096 !important;}/*!sc*/
.fqsarI .menu-item{padding:32px 30px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-top:1px solid #E2E8F0;color:#718096;font-weight:600;}/*!sc*/
.fqsarI .menu-item:hover{color:#1A202C;}/*!sc*/
.fqsarI:hover{border-color:#187367 !important;}/*!sc*/
.fqsarI.active-item span{background:#EDF2F7;color:#187367 !important;}/*!sc*/
@media (min-width:0px) and (max-width:768){.fqsarI.active-item{background:transparent;color:#4A5568 !important;padding:0.25rem 0.5rem;}.fqsarI svg{display:block;}}/*!sc*/
@media (min-width:768) and (max-width:940px){.fqsarI{font-size:14px;}}/*!sc*/
@media (prefers-color-scheme:dark){.fqsarI{color:var(--main-font-color) !important;}.fqsarI.active-item span{background:#2D3748;color:#71E8DF !important;}}/*!sc*/
data-styled.g40[id="header__DarkNavLink-sc-1w16195-7"]{content:"cMhiDt,fqsarI,"}/*!sc*/
.deKFiy{position:absolute;top:80px;left:50%;display:block;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%);-webkit-transition:all 50ms ease-out;transition:all 50ms ease-out;padding:16px;width:100%;z-index:101;background:#F7FAFC;}/*!sc*/
@media (min-width:1025px){.deKFiy{position:absolute;display:none;}}/*!sc*/
@media (prefers-color-scheme:dark){.deKFiy{background:#242c3a;}}/*!sc*/
data-styled.g42[id="header__SearchComponentDesktop-sc-1w16195-9"]{content:"deKFiy,"}/*!sc*/
.kWvzUe{margin-left:48px;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}/*!sc*/
@media (min-width:0px) and (max-width:940px){.kWvzUe{margin:92px 0 0 0;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}/*!sc*/
.kWvzUe > div{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;gap:16px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:2px;}/*!sc*/
data-styled.g43[id="header__SecondLevelNav-sc-1w16195-10"]{content:"kWvzUe,"}/*!sc*/
.euTKSS{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/
.euTKSS button{color:var(--main-font-color);-webkit-transition:-webkit-transform 0.18s ease-out;-webkit-transition:transform 0.18s ease-out;transition:transform 0.18s ease-out;}/*!sc*/
.euTKSS button:hover{-webkit-transform:translateY(-2px);-ms-transform:translateY(-2px);transform:translateY(-2px);}/*!sc*/
.euTKSS button:first-of-type svg{height:36px;}/*!sc*/
.euTKSS button:last-of-type{font-family:'Inter';font-size:22px;font-style:normal;font-weight:500;padding-left:22px;position:relative;line-height:100%;}/*!sc*/
.euTKSS button:last-of-type:before{position:absolute;content:'/';left:6px;color:#a0aec0;}/*!sc*/
data-styled.g44[id="header__HomeIcons-sc-1w16195-11"]{content:"euTKSS,"}/*!sc*/
.jVdqoJ{margin-left:auto;}/*!sc*/
@media (min-width:0px) and (max-width:600px){.jVdqoJ{display:none;}}/*!sc*/
.jVdqoJ > svg{height:35px;width:31px;}/*!sc*/
data-styled.g46[id="header__GithubLink-sc-1w16195-13"]{content:"jVdqoJ,"}/*!sc*/
.cEYuIU{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;max-width:1240px;width:100%;margin:0 auto;padding:8px 16px;border-radius:8px;border:1px solid #cbd5e0;background:#fff;}/*!sc*/
.cEYuIU form{width:100%;position:relative;height:36px;}/*!sc*/
.cEYuIU.opened{position:relative;z-index:100001;max-width:1240px;width:100%;height:77px;background:#fff;padding:1.25rem;border-bottom:1px solid #E2E8F0;border-radius:5px;border-color:#fff;}/*!sc*/
.cEYuIU.opened form{max-width:100%;}/*!sc*/
.cEYuIU.opened form input{color:#4A5568;}/*!sc*/
.cEYuIU.opened .clear{background:#E2E8F0;border-radius:6px;height:36px;width:36px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}/*!sc*/
.cEYuIU.opened .clear svg path{stroke:#4A5568;}/*!sc*/
@media (max-width:360){.cEYuIU{width:auto;-webkit-flex:1;-ms-flex:1;flex:1;}.cEYuIU form{width:100%;}}/*!sc*/
.cEYuIU .clear{display:none;}/*!sc*/
.cEYuIU form{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/
.cEYuIU form button.ais-SearchBox-submit{display:none;}/*!sc*/
.cEYuIU form button.ais-SearchBox-reset{background:transparent;border:transparent;outline:none;}/*!sc*/
.cEYuIU form input{width:100%;background:transparent;outline:none;padding:0rem 2rem;font-family:"Inter",system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-style:normal;font-weight:normal;font-size:1rem;line-height:100%;border-width:0;}/*!sc*/
.cEYuIU form input::-webkit-input-placeholder{content:'Search Documentation...';color:#A0AEC0;opacity:1;}/*!sc*/
.cEYuIU form input::-moz-placeholder{content:'Search Documentation...';color:#A0AEC0;opacity:1;}/*!sc*/
.cEYuIU form input:-ms-input-placeholder{content:'Search Documentation...';color:#A0AEC0;opacity:1;}/*!sc*/
.cEYuIU form input::placeholder{content:'Search Documentation...';color:#A0AEC0;opacity:1;}/*!sc*/
.cEYuIU form input[type='search']::-webkit-search-decoration,.cEYuIU form input[type='search']::-webkit-search-cancel-button,.cEYuIU form input[type='search']::-webkit-search-results-button,.cEYuIU form input[type='search']::-webkit-search-results-decoration{-webkit-appearance:none;}/*!sc*/
.cEYuIU .slash{border:1px solid #CBD5E0;border-radius:4px;color:#CBD5E0;min-width:18px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}/*!sc*/
@media (min-width:0px) and (max-width:768){.cEYuIU .slash{display:none;}}/*!sc*/
@media (prefers-color-scheme:dark){.cEYuIU{background:#2D3748;border-color:#4A5568;}.cEYuIU form input{color:#F7FAFC;}.cEYuIU form input::-webkit-input-placeholder{color:#CBD5E0;}.cEYuIU form input::-moz-placeholder{color:#CBD5E0;}.cEYuIU form input:-ms-input-placeholder{color:#CBD5E0;}.cEYuIU form input::placeholder{color:#CBD5E0;}.cEYuIU form svg path{stroke:#CBD5E0;}.cEYuIU.opened{background:#2D3748;}}/*!sc*/
data-styled.g47[id="minimalInput__SearchBoxDiv-sc-15ifbjd-0"]{content:"cEYuIU,"}/*!sc*/
.epYiQK{min-width:1em;pointer-events:none;position:absolute;}/*!sc*/
data-styled.g48[id="minimalInput__SearchIcon-sc-15ifbjd-1"]{content:"epYiQK,"}/*!sc*/
.gmXMnO{pointer-events:none;position:absolute;right:0;}/*!sc*/
@media (prefers-color-scheme:dark){.gmXMnO path{stroke:#4A5568;}}/*!sc*/
data-styled.g49[id="minimalInput__SearchSlashIcon-sc-15ifbjd-2"]{content:"gmXMnO,"}/*!sc*/
.lfvhpa{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}/*!sc*/
data-styled.g50[id="admonition__FlexContainer-sc-htoeam-0"]{content:"lfvhpa,"}/*!sc*/
.dDjWVR{margin:0;}/*!sc*/
data-styled.g51[id="admonition__ChildDiv-sc-htoeam-1"]{content:"dDjWVR,"}/*!sc*/
.kwPClj{font-family:Inter;font-style:normal;font-size:16px;line-height:24px;color:#718096 !important;padding-left:1.5rem;padding-bottom:8px;margin:2rem 0px;position:relative;display:block;max-width:100%;}/*!sc*/
.kwPClj pre{font-weight:normal;}/*!sc*/
.kwPClj::before{content:'';position:absolute;width:8px;height:100%;left:0px;background:#EDF2F7 !important;border-radius:5px;}/*!sc*/
.kwPClj.alert{min-height:50px;}/*!sc*/
.kwPClj .alert-circle{position:absolute;width:34px;height:100%;left:0px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:12px 0;background:#EDF2F7 !important;border-radius:5px;}/*!sc*/
.kwPClj code{color:#718096 !important;}/*!sc*/
.kwPClj p{margin:0;}/*!sc*/
@media (prefers-color-scheme:dark){.kwPClj{color:#A0AEC0 !important;}}/*!sc*/
.kzCMZj{font-family:Inter;font-style:normal;font-size:16px;line-height:24px;color:#718096 !important;padding-left:1.5rem;padding-bottom:8px;margin:2rem 0px;position:relative;display:block;max-width:100%;}/*!sc*/
.kzCMZj pre{font-weight:normal;}/*!sc*/
.kzCMZj::before{content:'';position:absolute;width:8px;height:100%;left:0px;background:#FBD38D !important;border-radius:5px;}/*!sc*/
.kzCMZj.alert{min-height:50px;}/*!sc*/
.kzCMZj .alert-circle{position:absolute;width:34px;height:100%;left:0px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:12px 0;background:#FBD38D !important;border-radius:5px;}/*!sc*/
.kzCMZj code{color:#718096 !important;}/*!sc*/
.kzCMZj p{margin:0;}/*!sc*/
@media (prefers-color-scheme:dark){.kzCMZj{color:#A0AEC0 !important;}}/*!sc*/
data-styled.g53[id="admonition__AdmonitionWrapper-sc-htoeam-3"]{content:"kwPClj,kzCMZj,"}/*!sc*/
.jdLDrK{font-family:"Inter",system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";}/*!sc*/
.jdLDrK{position:relative;cursor:pointer;display:inline-block;}/*!sc*/
@-webkit-keyframes copying{0%{opacity:0;-webkit-transform:translate(-50%,0);-ms-transform:translate(-50%,0);transform:translate(-50%,0);}50%{opacity:1;}100%{opacity:0;-webkit-transform:translate(-50%,30px);-ms-transform:translate(-50%,30px);transform:translate(-50%,30px);}}/*!sc*/
@keyframes copying{0%{opacity:0;-webkit-transform:translate(-50%,0);-ms-transform:translate(-50%,0);transform:translate(-50%,0);}50%{opacity:1;}100%{opacity:0;-webkit-transform:translate(-50%,30px);-ms-transform:translate(-50%,30px);transform:translate(-50%,30px);}}/*!sc*/
.jdLDrK .indicator{position:absolute;top:20px;left:0;-webkit-transform:translate(-50%,0);-ms-transform:translate(-50%,0);transform:translate(-50%,0);-webkit-animation:copying 700ms linear;animation:copying 700ms linear;}/*!sc*/
data-styled.g57[id="copy__CopyComponent-sc-eodafv-0"]{content:"jdLDrK,"}/*!sc*/
.dhygHl{color:inherit;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/
.dhygHl svg{margin-right:0.5rem;}/*!sc*/
@media (max-width:768){.dhygHl{font-size:.875rem;}}/*!sc*/
data-styled.g58[id="fileWithIcon__FileNameWrapper-sc-13l4knb-0"]{content:"dhygHl,"}/*!sc*/
.cbTKLY{margin-top:1.5rem;margin-bottom:1.5rem;}/*!sc*/
.cbTKLY .file{font-weight:600;color:#718096;font-size:.875rem;font-family:"Inter",system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";margin-bottom:0.5rem;}/*!sc*/
data-styled.g59[id="code__CodeWrapper-sc-8eixcc-0"]{content:"cbTKLY,"}/*!sc*/
.fcPKpO{-webkit-transition:opacity 100ms ease;transition:opacity 100ms ease;position:absolute;top:20px;right:16px;z-index:2;}/*!sc*/
.fcPKpO > div{right:-0.5rem;top:-6px;}/*!sc*/
.fcPKpO .dark{display:none;}/*!sc*/
.fcPKpO .light{display:block;}/*!sc*/
@media (prefers-color-scheme:dark){.fcPKpO .dark{display:block;}.fcPKpO .light{display:none;}}/*!sc*/
data-styled.g60[id="code__AbsoluteCopyButton-sc-8eixcc-1"]{content:"fcPKpO,"}/*!sc*/
.glKhkr{margin-top:2rem;text-align:left;margin:0 0 16px 0;padding:2rem 1rem 1rem 1rem;webkit-overflow-scrolling:touch;overflow-x:visible;}/*!sc*/
.glKhkr.wrap-content{overflow-x:auto;}/*!sc*/
.glKhkr.wrap-content code{white-space:break-spaces;}/*!sc*/
.glKhkr.wrap-content code .token-line{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;}/*!sc*/
.glKhkr.wrap-content code .token-line > span:last-child{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;}/*!sc*/
.glKhkr:not(.wrap-content)::-webkit-scrollbar{width:10px;height:10px;background-color:transparent;}/*!sc*/
.glKhkr:not(.wrap-content)::-webkit-scrollbar-thumb{border-radius:10px;background-color:#c5c6c8;}/*!sc*/
.glKhkr:not(.wrap-content)::-webkit-scrollbar-track{border-radius:10px;background-color:transparent;}/*!sc*/
.glKhkr:not(.wrap-content)::-webkit-scrollbar-corner{background-color:transparent;border-color:transparent;}/*!sc*/
.glKhkr:not(.wrap-content).not-scrollable{overflow-x:hidden;}/*!sc*/
.glKhkr:not(.wrap-content).not-scrollable code{display:inline;}/*!sc*/
data-styled.g61[id="code__Pre-sc-8eixcc-2"]{content:"glKhkr,"}/*!sc*/
.eskRzB{display:block;}/*!sc*/
@media (prefers-color-scheme:dark){.eskRzB.highlighted-line .token.plain{color:#1A202C;}}/*!sc*/
data-styled.g62[id="code__Line-sc-8eixcc-3"]{content:"eskRzB,"}/*!sc*/
.fEIrRl{padding:0 1rem;}/*!sc*/
.fEIrRl.break-words{display:inline-table;white-space:break-spaces;width:95%;}/*!sc*/
.fEIrRl.token-line{line-height:1.3rem;height:1.3rem;}/*!sc*/
data-styled.g64[id="code__LineContent-sc-8eixcc-5"]{content:"fEIrRl,"}/*!sc*/
.bXKDlh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}/*!sc*/
.bXKDlh .tabHeading{margin-right:10px;font-weight:600;color:#718096;cursor:pointer;font-size:.875rem;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:3px 5px;}/*!sc*/
.bXKDlh .tabHeading svg{margin-right:0.5rem;}/*!sc*/
.bXKDlh .tabHeading.getting-started{padding:6px 12px;margin-right:4px;border-radius:4px 4px 0 0 !important;background-color:var(--border-color);}/*!sc*/
.bXKDlh .tabHeading.active{color:#1A202C;background:#F7FAFC;border-radius:5px;}/*!sc*/
.bXKDlh .tabHeading.active svg path{stroke:#718096;}/*!sc*/
.bXKDlh .tabHeading.active.getting-started{background-color:#5A67D8;color:var(--white-color);}/*!sc*/
data-styled.g89[id="tabbedContent__Tabs-sc-19zdpko-0"]{content:"bXKDlh,"}/*!sc*/
.cqEcvg{margin-top:1.5rem;position:relative;font-size:.875rem;}/*!sc*/
.cqEcvg tab pre > *{margin-top:0.5em;}/*!sc*/
data-styled.g90[id="tabbedContent__Wrapper-sc-19zdpko-1"]{content:"cqEcvg,"}/*!sc*/
.jewaNT{overflow-x:auto;margin-top:1em;}/*!sc*/
@media (min-width:0px) and (max-width:768){.jewaNT{margin-right:-1.5rem;margin-left:-1.5rem;}.jewaNT table{border-left:0;border-right:0;border-radius:0 !important;}}/*!sc*/
@media (prefers-color-scheme:dark){.jewaNT table,.jewaNT th,.jewaNT td,.jewaNT tr{border-color:#2D3748;color:#F7FAFC;}}/*!sc*/
.jewaNT code.inline-code,.jewaNT .inline-code,.jewaNT inlinecode{font-size:13px;}/*!sc*/
.jewaNT::-webkit-scrollbar{width:10px;height:10px;background-color:transparent;}/*!sc*/
.jewaNT::-webkit-scrollbar-thumb{border-radius:10px;background-color:#c5c6c8;}/*!sc*/
.jewaNT::-webkit-scrollbar-track{border-radius:10px;background-color:transparent;}/*!sc*/
.jewaNT::-webkit-scrollbar-corner{background-color:transparent;border-color:transparent;}/*!sc*/
.jewaNT.not-scrollable{overflow-x:hidden;}/*!sc*/
.jewaNT.not-scrollable code{display:inline;}/*!sc*/
data-styled.g91[id="table__TableWrapper-sc-18kfzv9-0"]{content:"jewaNT,"}/*!sc*/
.gTwDYR{padding:1rem;background-color:#F7FAFC;border-radius:8px;min-height:100px;margin:2rem 0;position:relative;}/*!sc*/
.gTwDYR::before{content:'💡';position:absolute;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:1.1rem;top:-15px;left:-10px;width:50px;height:50px;border-bottom-right-radius:50%;background-color:white;z-index:999;}/*!sc*/
.gTwDYR > div{margin-left:1.5rem;}/*!sc*/
@media (prefers-color-scheme:dark){.gTwDYR{background-color:#2D3748;}}/*!sc*/
data-styled.g92[id="tip__Wrapper-sc-1dwv1cj-0"]{content:"gTwDYR,"}/*!sc*/
.ljSUQr{font-family:"Inter",system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-style:normal;font-weight:bold;font-size:.875rem;line-height:100%;-webkit-letter-spacing:0.01em;-moz-letter-spacing:0.01em;-ms-letter-spacing:0.01em;letter-spacing:0.01em;text-transform:uppercase;color:#1A202C;margin:0 0;}/*!sc*/
@media (prefers-color-scheme:dark){.ljSUQr{color:#E2E8F0;}}/*!sc*/
data-styled.g102[id="toc__ChapterTitle-sc-40h8sh-0"]{content:"ljSUQr,"}/*!sc*/
.iQoQzq{padding:0 0 1em;list-style-type:none;margin:0;}/*!sc*/
.iQoQzq li{font-size:.875rem;padding:0.75rem 0 0;line-height:1rem;}/*!sc*/
.iQoQzq li ul{margin-left:0.75rem;}/*!sc*/
.iQoQzq li a{-webkit-text-decoration:none;text-decoration:none;color:#718096;}/*!sc*/
.iQoQzq li a:hover{color:#1A202C;}/*!sc*/
@media (prefers-color-scheme:dark){.iQoQzq li a{color:#A0AEC0;}.iQoQzq li a:hover{color:#718096;}}/*!sc*/
data-styled.g103[id="toc__HeadingList-sc-40h8sh-1"]{content:"iQoQzq,"}/*!sc*/
.kduPiy > a{-webkit-text-decoration:none;text-decoration:none;background-image:linear-gradient(currentColor,var(--dark-color));background-position:0% 100%;background-repeat:no-repeat;background-size:0% 2px;-webkit-transition:background-size 0.7s;transition:background-size 0.7s;}/*!sc*/
.kduPiy > a > inlinecode{color:#000;}/*!sc*/
@media (prefers-color-scheme:dark){.kduPiy > a > inlinecode{color:var(--main-font-color);}}/*!sc*/
data-styled.g104[id="toc__ListItem-sc-40h8sh-2"]{content:"kduPiy,"}/*!sc*/
.jwGPFR{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}/*!sc*/
@media (max-width:768){.jwGPFR{padding:0;}}/*!sc*/
data-styled.g105[id="layout__Wrapper-sc-bupt9j-0"]{content:"jwGPFR,"}/*!sc*/
.gmqsGj{max-width:748px;margin:0 20px;-webkit-flex:1;-ms-flex:1;flex:1;position:relative;z-index:100;width:100%;}/*!sc*/
@media (min-width:0px) and (max-width:1024px){.gmqsGj{margin:0;max-width:100%;}}/*!sc*/
@media (min-width:1025px) and (max-width:1240px){.gmqsGj{margin:0;max-width:570px;}}/*!sc*/
.gmqsGj section > h1:has(> inlinecode),.gmqsGj section h2:has(> inlinecode),.gmqsGj section h3:has(> inlinecode),.gmqsGj section h4:has(> inlinecode),.gmqsGj section h5:has(> inlinecode),.gmqsGj section h6:has(> inlinecode){line-height:1.5;}/*!sc*/
data-styled.g106[id="layout__Content-sc-bupt9j-1"]{content:"gmqsGj,"}/*!sc*/
.hdrMcE > section{padding:0 2.5rem;}/*!sc*/
.hdrMcE > section.top-section{padding-top:0;}/*!sc*/
@media (min-width:0px) and (max-width:1024px){.hdrMcE > section{margin-top:0.5rem;}}/*!sc*/
@media (min-width:0px) and (max-width:1024px){.hdrMcE > section{padding:0 1.5rem;}.hdrMcE > section.top-section{padding-top:1.5rem;}}/*!sc*/
data-styled.g107[id="layout__MaxWidth-sc-bupt9j-2"]{content:"hdrMcE,"}/*!sc*/
.fTKCHT{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;}/*!sc*/
@media (min-width:0px) and (max-width:1024px){.fTKCHT{display:none;}}/*!sc*/
.fTKCHT.fixed{position:-webkit-sticky;position:sticky;}/*!sc*/
data-styled.g108[id="layout__NotMobile-sc-bupt9j-3"]{content:"fTKCHT,"}/*!sc*/
.exaTrK{max-width:1240px;width:100%;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;position:relative;margin-top:2.5rem;}/*!sc*/
@media (max-width:1024px){.exaTrK{margin-top:118px;}}/*!sc*/
data-styled.g109[id="layout__Container-sc-bupt9j-4"]{content:"exaTrK,"}/*!sc*/
.hTRqWl{width:180px;height:85vh;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;overflow-y:auto;position:-webkit-sticky;position:sticky;top:20px;}/*!sc*/
@media (min-width:0px) and (max-width:1024px){.hTRqWl{display:none;}}/*!sc*/
.hTRqWl.fixed{position:-webkit-sticky;position:sticky;}/*!sc*/
data-styled.g110[id="layout__TOCWrapper-sc-bupt9j-5"]{content:"hTRqWl,"}/*!sc*/
.eAoMQv button{z-index:10;}/*!sc*/
data-styled.g111[id="layout__FooterWrapper-sc-bupt9j-6"]{content:"eAoMQv,"}/*!sc*/
.bhoAMO{width:calc(100% - 1rem);padding:0 0 22px 0;}/*!sc*/
@media (min-width:0px) and (max-width:1024px){.bhoAMO{display:none;}}/*!sc*/
data-styled.g112[id="layout__SearchComponentDesktop-sc-bupt9j-7"]{content:"bhoAMO,"}/*!sc*/
.jKxlUY{width:272px;margin:0px -1rem 0 1rem;}/*!sc*/
@media (min-width:0px) and (max-width:1024px){.jKxlUY{width:auto;}}/*!sc*/
data-styled.g113[id="layout__CustomSticky-sc-bupt9j-8"]{content:"jKxlUY,"}/*!sc*/
.kdzDYs{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:.875rem;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;padding:1rem 2.5rem;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/
.kdzDYs button svg{cursor:pointer;-webkit-transition:width 2s linear 1s;transition:width 2s linear 1s;}/*!sc*/
.kdzDYs .edit-git,.kdzDYs .message{color:#718096 !important;}/*!sc*/
.kdzDYs button{color:#fff !important;}/*!sc*/
@media (min-width:0px) and (max-width:768){.kdzDYs{padding:1rem;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}.kdzDYs .edit-git{-webkit-order:1;-ms-flex-order:1;order:1;}}/*!sc*/
data-styled.g115[id="pageBottom__PageBottomWrapper-sc-10oj3zv-0"]{content:"kdzDYs,"}/*!sc*/
.butCWs h4{text-transform:uppercase;font-weight:bold;-webkit-letter-spacing:0.01em;-moz-letter-spacing:0.01em;-ms-letter-spacing:0.01em;letter-spacing:0.01em;text-transform:uppercase;margin:revert;color:#A0AEC0 !important;}/*!sc*/
.butCWs .sentiments button{background:transparent;border:0;}/*!sc*/
.butCWs .sentiments button.active{border-color:#4299E1;}/*!sc*/
.butCWs .sentiments button.active svg circle,.butCWs .sentiments button.active svg path{stroke:#4299E1;}/*!sc*/
.butCWs .sentiments button:hover svg{border-radius:50%;background:rgba(204,217,223,0.5);}/*!sc*/
.butCWs .sentiments button:disabled svg{cursor:not-allowed;}/*!sc*/
@media (min-width:0px) and (max-width:767px){.butCWs{-webkit-order:2;-ms-flex-order:2;order:2;}}/*!sc*/
data-styled.g116[id="pageBottom__Feedback-sc-10oj3zv-1"]{content:"butCWs,"}/*!sc*/
.fwLvxX{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;cursor:default;}/*!sc*/
data-styled.g117[id="pageBottom__Wrapper-sc-10oj3zv-2"]{content:"fwLvxX,"}/*!sc*/
.daWQPr{-webkit-flex:1;-ms-flex:1;flex:1;}/*!sc*/
.daWQPr .feedback-container,.daWQPr .yay-container{width:360px;}/*!sc*/
.daWQPr .feedback-toast{background:#ffffff;box-shadow:0px 1px 3px rgba(0,0,0,0.25),0px 2px 12px rgba(0,0,0,0.12);border-radius:8px;position:relative;width:360px;height:225px;padding:0;margin-top:1.5rem;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/
.daWQPr .feedback-toast .feedback-body{padding:0;}/*!sc*/
.daWQPr .feedback-toast input{width:100%;border:0;padding:0.75rem 20px;font-size:100%;font-weight:normal;margin-bottom:20px;}/*!sc*/
.daWQPr .feedback-toast input::-webkit-input-placeholder{color:#A0AEC0;}/*!sc*/
.daWQPr .feedback-toast input::-moz-placeholder{color:#A0AEC0;}/*!sc*/
.daWQPr .feedback-toast input:-ms-input-placeholder{color:#A0AEC0;}/*!sc*/
.daWQPr .feedback-toast input::placeholder{color:#A0AEC0;}/*!sc*/
.daWQPr .feedback-toast button{background:#48BB78;border-radius:6px;padding:8px;font-size:1rem;font-weight:600;border-color:transparent;}/*!sc*/
.daWQPr .feedback-toast button:hover{background:#38A169;}/*!sc*/
.daWQPr .yay-toast{background:#EBF8FF;font-size:14px;color:#3182CE;min-width:360px;}/*!sc*/
data-styled.g118[id="pageBottom__Content-sc-10oj3zv-3"]{content:"daWQPr,"}/*!sc*/
.kIQBBY{position:relative;}/*!sc*/
.kIQBBY .tech-switch-block{position:relative;}/*!sc*/
@media (min-width:0px) and (max-width:360){.kIQBBY .tech-switch-block{width:100%;}}/*!sc*/
data-styled.g127[id="topSection__TopSectionWrapper-sc-d3j04s-0"]{content:"kIQBBY,"}/*!sc*/
.jIzYNj{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:start;-webkit-box-align:start;-ms-flex-align:start;align-items:start;}/*!sc*/
@media (min-width:0px) and (max-width:360){.jIzYNj{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:baseline;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;}}/*!sc*/
data-styled.g128[id="topSection__Header-sc-d3j04s-1"]{content:"jIzYNj,"}/*!sc*/
.egpkGJ{font-family:"Barlow",system-ui,Arial,sans-serif;font-size:2.5rem !important;font-style:normal;font-weight:bold;-webkit-letter-spacing:-0.02em;-moz-letter-spacing:-0.02em;-ms-letter-spacing:-0.02em;letter-spacing:-0.02em;color:#1A202C;margin:0;margin-top:4px;}/*!sc*/
.egpkGJ.inline-code{font-size:2rem;padding:0px 0.2em;line-height:3rem;}/*!sc*/
@media (min-width:0px) and (max-width:768){.egpkGJ{font-size:1.5rem;}}/*!sc*/
@media (prefers-color-scheme:dark){.egpkGJ{color:#F7FAFC;}}/*!sc*/
data-styled.g129[id="topSection__MainTitle-sc-d3j04s-2"]{content:"egpkGJ,"}/*!sc*/
</style><style type="text/css">
    .title-link.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .title-link.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .title-link svg,
    h2 .title-link svg,
    h3 .title-link svg,
    h4 .title-link svg,
    h5 .title-link svg,
    h6 .title-link svg {
      visibility: hidden;
    }
    h1:hover .title-link svg,
    h2:hover .title-link svg,
    h3:hover .title-link svg,
    h4:hover .title-link svg,
    h5:hover .title-link svg,
    h6:hover .title-link svg,
    h1 .title-link:focus svg,
    h2 .title-link:focus svg,
    h3 .title-link:focus svg,
    h4 .title-link:focus svg,
    h5 .title-link:focus svg,
    h6 .title-link:focus svg {
      visibility: visible;
    }
  </style> <style type="text/css">.gatsby-resp-image-image{width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;color:transparent;}</style> <link rel="sitemap" type="application/xml" href="../../../sitemap/sitemap-index.xml"><link rel="preload" href="../../../fonts/Inter-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous"><link rel="preload" href="../../../fonts/Inter-Medium.woff2" as="font" type="font/woff2" crossorigin="anonymous"><link rel="preload" href="../../../fonts/Inter-Italic.woff2" as="font" type="font/woff2" crossorigin="anonymous"><link rel="preload" href="../../../fonts/Inter-Bold.woff2" as="font" type="font/woff2" crossorigin="anonymous"><link rel="preload" href="../../../fonts/Inter-SemiBold.woff2" as="font" type="font/woff2" crossorigin="anonymous"><link rel="preload" href="../../../fonts/Inter-SemiBoldItalic.woff2" as="font" type="font/woff2" crossorigin="anonymous"><link rel="preload" href="../../../fonts/Barlow-Bold.woff2" as="font" type="font/woff2" crossorigin="anonymous"><link rel="preload" href="../../../fonts/JetBrainsMono-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous"><link rel="preload" href="../../../fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin="anonymous"><link rel="preload" href="../../../fonts/fa-light-300.woff2" as="font" type="font/woff2" crossorigin="anonymous"><link rel="preload" href="../../../fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin="anonymous"><link rel="preload" href="../../../fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin="anonymous"></head><body class="dark"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KCGZPWB" height="0" width="0" style="display: none; visibility: hidden" aria-hidden="true"></iframe></noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="layout__LayoutWrapper-sc-bupt9j-9 dark"><div class="header__HeaderWrapper-sc-1w16195-4 hAoImM"><div class="header__BucketHeader-sc-1w16195-0 gMrSws"><div class="header__HomeIcons-sc-1w16195-11 euTKSS"><button class="customLink__CustomButton-sc-1xpvtl4-0 hyHLmQ"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 90 24" fill="#2d3748" class="Logo-sc-c81z3l-0 beNtqd light"><path fill-rule="evenodd" clip-rule="evenodd" d="M34.736 11.947h.9c.842 0 1.471-.168 1.89-.502.417-.335.626-.822.626-1.462 0-.645-.175-1.122-.525-1.43-.35-.308-.899-.462-1.646-.462h-1.245v3.856zm6.179-2.061c0 1.398-.434 2.466-1.303 3.206-.867.741-2.101 1.11-3.702 1.11h-1.174v4.62H32V5.835h4.122c1.565 0 2.755.34 3.57 1.017.815.678 1.223 1.69 1.223 3.034zM48.167 8.704c.365 0 .668.027.91.08l-.203 2.54a3.08 3.08 0 00-.795-.088c-.859 0-1.528.222-2.008.666-.48.444-.72 1.066-.72 1.866v5.054H42.66V8.891h2.039l.397 1.67h.132a3.726 3.726 0 011.24-1.346c.521-.34 1.087-.51 1.7-.51zM50.505 18.822h2.692V8.891h-2.692v9.931zM50.39 6.323c0-.882.489-1.323 1.465-1.323.977 0 1.466.441 1.466 1.323 0 .421-.122.748-.366.982-.245.234-.611.35-1.1.35-.976 0-1.465-.443-1.465-1.332zM62.675 15.873c0 1.019-.352 1.795-1.055 2.328-.703.532-1.755.799-3.155.799-.719 0-1.33-.049-1.836-.147a6.904 6.904 0 01-1.421-.43v-2.24c.5.238 1.063.436 1.69.596.627.16 1.178.24 1.655.24.977 0 1.465-.284 1.465-.853a.715.715 0 00-.194-.52c-.13-.133-.353-.284-.67-.453a16.977 16.977 0 00-1.272-.59c-.759-.32-1.317-.616-1.672-.889a2.488 2.488 0 01-.777-.937c-.162-.352-.243-.786-.243-1.301 0-.883.34-1.565 1.02-2.048.68-.482 1.642-.724 2.89-.724 1.189 0 2.345.261 3.469.782l-.812 1.954a14.913 14.913 0 00-1.386-.524 4.326 4.326 0 00-1.315-.204c-.794 0-1.192.216-1.192.648 0 .243.129.454.384.631.257.178.817.441 1.682.79.77.315 1.336.608 1.695.88.358.273.623.586.794.942.17.355.256.779.256 1.27zM73.34 18.822h-2.693v-5.8c0-.717-.119-1.255-.357-1.613-.238-.358-.613-.537-1.125-.537-.689 0-1.189.254-1.5.764-.313.51-.469 1.347-.469 2.514v4.672h-2.692V8.891h2.057l.362 1.27h.15a2.741 2.741 0 011.147-1.07c.5-.258 1.074-.387 1.722-.387 1.477 0 2.477.486 3 1.457h.239c.265-.462.654-.82 1.17-1.075.514-.255 1.095-.382 1.743-.382 1.118 0 1.964.289 2.537.866.574.578.86 1.503.86 2.776v6.476h-2.7v-5.8c0-.717-.12-1.255-.358-1.613-.238-.358-.613-.537-1.125-.537-.66 0-1.152.237-1.479.71-.326.474-.49 1.226-.49 2.257v4.983zM87.326 14.22l-1.042.036c-.783.024-1.365.166-1.747.427-.383.26-.574.657-.574 1.19 0 .764.435 1.146 1.306 1.146.624 0 1.123-.18 1.496-.542.374-.361.56-.84.56-1.44v-.816zm.794 4.602l-.52-1.35h-.072c-.453.575-.919.973-1.399 1.195-.479.222-1.104.333-1.875.333-.948 0-1.693-.273-2.238-.817-.544-.545-.816-1.32-.816-2.328 0-1.054.366-1.831 1.099-2.332.733-.5 1.837-.777 3.314-.83l1.713-.053v-.436c0-1.006-.512-1.51-1.536-1.51-.789 0-1.716.24-2.78.72l-.892-1.83c1.136-.598 2.395-.898 3.778-.898 1.324 0 2.339.29 3.045.871.706.58 1.059 1.463 1.059 2.647v6.618h-1.88zM18.01 19.037L7.163 22.224a.454.454 0 01-.58-.52L10.46 3.267c.073-.345.552-.4.704-.08l7.173 15.138a.514.514 0 01-.327.713zm1.86-.752L11.562.757a1.333 1.333 0 00-1.136-.755 1.32 1.32 0 00-1.213.626l-9.009 14.5c-.279.451-.273 1.008.016 1.455l4.404 6.778a1.419 1.419 0 001.59.581l12.782-3.756c.392-.116.712-.39.88-.756a1.354 1.354 0 00-.008-1.145z" class="jsx-3616046384"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 90 24" fill="#ffffff" class="Logo-sc-c81z3l-0 clMfPP dark"><path fill-rule="evenodd" clip-rule="evenodd" d="M34.736 11.947h.9c.842 0 1.471-.168 1.89-.502.417-.335.626-.822.626-1.462 0-.645-.175-1.122-.525-1.43-.35-.308-.899-.462-1.646-.462h-1.245v3.856zm6.179-2.061c0 1.398-.434 2.466-1.303 3.206-.867.741-2.101 1.11-3.702 1.11h-1.174v4.62H32V5.835h4.122c1.565 0 2.755.34 3.57 1.017.815.678 1.223 1.69 1.223 3.034zM48.167 8.704c.365 0 .668.027.91.08l-.203 2.54a3.08 3.08 0 00-.795-.088c-.859 0-1.528.222-2.008.666-.48.444-.72 1.066-.72 1.866v5.054H42.66V8.891h2.039l.397 1.67h.132a3.726 3.726 0 011.24-1.346c.521-.34 1.087-.51 1.7-.51zM50.505 18.822h2.692V8.891h-2.692v9.931zM50.39 6.323c0-.882.489-1.323 1.465-1.323.977 0 1.466.441 1.466 1.323 0 .421-.122.748-.366.982-.245.234-.611.35-1.1.35-.976 0-1.465-.443-1.465-1.332zM62.675 15.873c0 1.019-.352 1.795-1.055 2.328-.703.532-1.755.799-3.155.799-.719 0-1.33-.049-1.836-.147a6.904 6.904 0 01-1.421-.43v-2.24c.5.238 1.063.436 1.69.596.627.16 1.178.24 1.655.24.977 0 1.465-.284 1.465-.853a.715.715 0 00-.194-.52c-.13-.133-.353-.284-.67-.453a16.977 16.977 0 00-1.272-.59c-.759-.32-1.317-.616-1.672-.889a2.488 2.488 0 01-.777-.937c-.162-.352-.243-.786-.243-1.301 0-.883.34-1.565 1.02-2.048.68-.482 1.642-.724 2.89-.724 1.189 0 2.345.261 3.469.782l-.812 1.954a14.913 14.913 0 00-1.386-.524 4.326 4.326 0 00-1.315-.204c-.794 0-1.192.216-1.192.648 0 .243.129.454.384.631.257.178.817.441 1.682.79.77.315 1.336.608 1.695.88.358.273.623.586.794.942.17.355.256.779.256 1.27zM73.34 18.822h-2.693v-5.8c0-.717-.119-1.255-.357-1.613-.238-.358-.613-.537-1.125-.537-.689 0-1.189.254-1.5.764-.313.51-.469 1.347-.469 2.514v4.672h-2.692V8.891h2.057l.362 1.27h.15a2.741 2.741 0 011.147-1.07c.5-.258 1.074-.387 1.722-.387 1.477 0 2.477.486 3 1.457h.239c.265-.462.654-.82 1.17-1.075.514-.255 1.095-.382 1.743-.382 1.118 0 1.964.289 2.537.866.574.578.86 1.503.86 2.776v6.476h-2.7v-5.8c0-.717-.12-1.255-.358-1.613-.238-.358-.613-.537-1.125-.537-.66 0-1.152.237-1.479.71-.326.474-.49 1.226-.49 2.257v4.983zM87.326 14.22l-1.042.036c-.783.024-1.365.166-1.747.427-.383.26-.574.657-.574 1.19 0 .764.435 1.146 1.306 1.146.624 0 1.123-.18 1.496-.542.374-.361.56-.84.56-1.44v-.816zm.794 4.602l-.52-1.35h-.072c-.453.575-.919.973-1.399 1.195-.479.222-1.104.333-1.875.333-.948 0-1.693-.273-2.238-.817-.544-.545-.816-1.32-.816-2.328 0-1.054.366-1.831 1.099-2.332.733-.5 1.837-.777 3.314-.83l1.713-.053v-.436c0-1.006-.512-1.51-1.536-1.51-.789 0-1.716.24-2.78.72l-.892-1.83c1.136-.598 2.395-.898 3.778-.898 1.324 0 2.339.29 3.045.871.706.58 1.059 1.463 1.059 2.647v6.618h-1.88zM18.01 19.037L7.163 22.224a.454.454 0 01-.58-.52L10.46 3.267c.073-.345.552-.4.704-.08l7.173 15.138a.514.514 0 01-.327.713zm1.86-.752L11.562.757a1.333 1.333 0 00-1.136-.755 1.32 1.32 0 00-1.213.626l-9.009 14.5c-.279.451-.273 1.008.016 1.455l4.404 6.778a1.419 1.419 0 001.59.581l12.782-3.756c.392-.116.712-.39.88-.756a1.354 1.354 0 00-.008-1.145z" class="jsx-3616046384"/></svg></button><button class="customLink__CustomButton-sc-1xpvtl4-0 hyHLmQ">Docs</button></div><div class="header__NonMobileMenu-sc-1w16195-5 fFnNKf"><div class="header__SecondLevelNav-sc-1w16195-10 kWvzUe"><div><a class="header__NavLink-sc-1w16195-6 header__DarkNavLink-sc-1w16195-7 lcEBVH cMhiDt non-active" href="../../../getting-started.html"><span>Get Started</span></a><a class="header__NavLink-sc-1w16195-6 header__DarkNavLink-sc-1w16195-7 lcEBVH cMhiDt active-item" href="../../../orm.html"><span>ORM</span></a><a class="header__NavLink-sc-1w16195-6 header__DarkNavLink-sc-1w16195-7 lcEBVH fqsarI non-active" href="../../../accelerate.html"><span>Accelerate</span></a><a class="header__NavLink-sc-1w16195-6 header__DarkNavLink-sc-1w16195-7 lcEBVH fqsarI non-active" href="../../../pulse.html"><span>Pulse</span></a></div></div></div><a href="https://github.com/prisma" target="_blank" class="header__GithubLink-sc-1w16195-13 jVdqoJ"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" class="light" fill="#2d3748" width="24" height="24"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" class="dark" fill="#ffffff" width="24" height="24"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></a><a href="https://console.prisma.io/login?utm_source=docs&amp;utm_medium=login" type="primary" color="teal" class="button__StyledLink-sc-187srku-0 jcobFZ log-btn">Login</a><div class="header__DocsMobileButton-sc-1w16195-1 itgNGF"><i class="fa-regular fa-bars undefined" style="text-align:center;font-size:28px;color:currentcolor;margin:"></i></div></div></div><div class="header__SearchComponentDesktop-sc-1w16195-9 deKFiy"><div class="overlay__StyledOverlay-sc-1uuldzq-0 jRFKZl"></div><div class="input__SearchBoxDiv-sc-1nmahfx-0 jkqxtT"><form><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none" class="input__SearchIcon-sc-1nmahfx-1 gZvrwL"><path d="M7 13C10.3137 13 13 10.3137 13 7C13 3.68629 10.3137 1 7 1C3.68629 1 1 3.68629 1 7C1 10.3137 3.68629 13 7 13Z" stroke="#4A5568" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M15 15L12 12" stroke="#4A5568" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><input type="text" placeholder="Search Documentation..." aria-label="Search Documentation..." value=""></form></div></div><div class="layout__Wrapper-sc-bupt9j-0 jwGPFR"><div class="layout__Container-sc-bupt9j-4 exaTrK"><div class="layout__CustomSticky-sc-bupt9j-8 jKxlUY"><div class="layout__SearchComponentDesktop-sc-bupt9j-7 bhoAMO"><div class="minimalInput__SearchBoxDiv-sc-15ifbjd-0 cEYuIU"><form><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none" class="minimalInput__SearchIcon-sc-15ifbjd-1 epYiQK"><path d="M7 13C10.3137 13 13 10.3137 13 7C13 3.68629 10.3137 1 7 1C3.68629 1 1 3.68629 1 7C1 10.3137 3.68629 13 7 13Z" stroke="#4A5568" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M15 15L12 12" stroke="#4A5568" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><input type="text" placeholder="Search Docs..." aria-label="Search Documentation..." value=""><svg xmlns="http://www.w3.org/2000/svg" width="18" height="28" viewBox="0 0 18 28" fill="none" class="minimalInput__SearchSlashIcon-sc-15ifbjd-2 gmXMnO"><path d="M11.2734 8.57812L7.01562 20H5.71875L9.97656 8.57812H11.2734Z" fill="#CBD5E0"/><rect x="0.5" y="0.5" width="17" height="27" rx="3.5" stroke="#CBD5E0"/></svg></form></div></div><section id="sidebar-holder" class="layout__NotMobile-sc-bupt9j-3 fTKCHT"><aside class="sidebar__SidebarContainer-sc-u94sja-0 cyByzh"><div id="sidebar-container" class="sidebar__Sidebar-sc-u94sja-1 bMsMoj"><ul class="sidebar__List-sc-u94sja-2 fzetWo"><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq     "><ul class="treeNode__List-sc-a5dz51-0 iVglbw"><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq  top-level   "><a class="active-item" id="/docs/orm"><span class="">ORM</span></a><ul class="treeNode__List-sc-a5dz51-0 iVglbw"><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq   static-link  "><a class="non-active" id="/docs/orm/overview"><span class="">Overview</span></a><ul class="treeNode__List-sc-a5dz51-0 iVglbw"><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq     more-padding"><a class="non-active" id="/docs/orm/overview/introduction" href="../../overview/introduction.html"><span class="collapse-title"><button aria-label="collapse" class="item-collapser"><svg xmlns="http://www.w3.org/2000/svg" width="5" height="8" viewBox="0 0 5 8" fill="none" class="right close"><path d="M0 0.724246C0 0.111374 0.681914 -0.223425 1.13107 0.168926L4.66916 3.25957C5.11028 3.6449 5.11028 4.3551 4.66916 4.74043L1.13107 7.83107C0.681913 8.22342 0 7.88863 0 7.27575V0.724246Z" fill="#A0AEC0"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="8" height="6" viewBox="0 0 8 6" fill="none" class="down close"><path d="M7.27575 0.5C7.88863 0.5 8.22342 1.18191 7.83107 1.63107L4.74043 5.16916C4.3551 5.61028 3.6449 5.61028 3.25957 5.16916L0.168926 1.63107C-0.223425 1.18191 0.111375 0.5 0.724247 0.5L7.27575 0.5Z" fill="#A0AEC0"/></svg></button><span class="">Introduction</span></span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq     more-padding"><a class="non-active" id="/docs/orm/overview/prisma-in-your-stack" href="../../overview/prisma-in-your-stack.html"><span class="collapse-title"><button aria-label="collapse" class="item-collapser"><svg xmlns="http://www.w3.org/2000/svg" width="5" height="8" viewBox="0 0 5 8" fill="none" class="right close"><path d="M0 0.724246C0 0.111374 0.681914 -0.223425 1.13107 0.168926L4.66916 3.25957C5.11028 3.6449 5.11028 4.3551 4.66916 4.74043L1.13107 7.83107C0.681913 8.22342 0 7.88863 0 7.27575V0.724246Z" fill="#A0AEC0"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="8" height="6" viewBox="0 0 8 6" fill="none" class="down close"><path d="M7.27575 0.5C7.88863 0.5 8.22342 1.18191 7.83107 1.63107L4.74043 5.16916C4.3551 5.61028 3.6449 5.61028 3.25957 5.16916L0.168926 1.63107C-0.223425 1.18191 0.111375 0.5 0.724247 0.5L7.27575 0.5Z" fill="#A0AEC0"/></svg></button><span class="">Prisma ORM in your stack</span></span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq     more-padding"><a class="non-active" id="/docs/orm/overview/databases" href="../../overview/databases.html"><span class="collapse-title"><button aria-label="collapse" class="item-collapser"><svg xmlns="http://www.w3.org/2000/svg" width="5" height="8" viewBox="0 0 5 8" fill="none" class="right close"><path d="M0 0.724246C0 0.111374 0.681914 -0.223425 1.13107 0.168926L4.66916 3.25957C5.11028 3.6449 5.11028 4.3551 4.66916 4.74043L1.13107 7.83107C0.681913 8.22342 0 7.88863 0 7.27575V0.724246Z" fill="#A0AEC0"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="8" height="6" viewBox="0 0 8 6" fill="none" class="down close"><path d="M7.27575 0.5C7.88863 0.5 8.22342 1.18191 7.83107 1.63107L4.74043 5.16916C4.3551 5.61028 3.6449 5.61028 3.25957 5.16916L0.168926 1.63107C-0.223425 1.18191 0.111375 0.5 0.724247 0.5L7.27575 0.5Z" fill="#A0AEC0"/></svg></button><span class="">Databases</span></span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq   static-link  more-padding"></li></ul></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq   static-link  "><a class="non-active" id="/docs/orm/prisma-schema"><span class="">Prisma schema</span></a><ul class="treeNode__List-sc-a5dz51-0 iVglbw"><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq     more-padding"><a class="non-active" id="/docs/orm/prisma-schema/overview" href="../../prisma-schema/overview.html"><span class="collapse-title"><button aria-label="collapse" class="item-collapser"><svg xmlns="http://www.w3.org/2000/svg" width="5" height="8" viewBox="0 0 5 8" fill="none" class="right close"><path d="M0 0.724246C0 0.111374 0.681914 -0.223425 1.13107 0.168926L4.66916 3.25957C5.11028 3.6449 5.11028 4.3551 4.66916 4.74043L1.13107 7.83107C0.681913 8.22342 0 7.88863 0 7.27575V0.724246Z" fill="#A0AEC0"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="8" height="6" viewBox="0 0 8 6" fill="none" class="down close"><path d="M7.27575 0.5C7.88863 0.5 8.22342 1.18191 7.83107 1.63107L4.74043 5.16916C4.3551 5.61028 3.6449 5.61028 3.25957 5.16916L0.168926 1.63107C-0.223425 1.18191 0.111375 0.5 0.724247 0.5L7.27575 0.5Z" fill="#A0AEC0"/></svg></button><span class="">Overview</span></span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq     more-padding"><a class="non-active" id="/docs/orm/prisma-schema/data-model" href="../../prisma-schema/data-model.html"><span class="collapse-title"><button aria-label="collapse" class="item-collapser"><svg xmlns="http://www.w3.org/2000/svg" width="5" height="8" viewBox="0 0 5 8" fill="none" class="right close"><path d="M0 0.724246C0 0.111374 0.681914 -0.223425 1.13107 0.168926L4.66916 3.25957C5.11028 3.6449 5.11028 4.3551 4.66916 4.74043L1.13107 7.83107C0.681913 8.22342 0 7.88863 0 7.27575V0.724246Z" fill="#A0AEC0"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="8" height="6" viewBox="0 0 8 6" fill="none" class="down close"><path d="M7.27575 0.5C7.88863 0.5 8.22342 1.18191 7.83107 1.63107L4.74043 5.16916C4.3551 5.61028 3.6449 5.61028 3.25957 5.16916L0.168926 1.63107C-0.223425 1.18191 0.111375 0.5 0.724247 0.5L7.27575 0.5Z" fill="#A0AEC0"/></svg></button><span class="">Data model</span></span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq     more-padding"><a class="non-active" id="/docs/orm/prisma-schema/introspection" href="../../prisma-schema/introspection.html"><span class="">Introspection</span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq     more-padding"><a class="non-active" id="/docs/orm/prisma-schema/postgresql-extensions" href="../../prisma-schema/postgresql-extensions.html"><span class="">PostgreSQL extensions</span><span class="tag small">Preview</span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq   static-link  more-padding"></li></ul></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq   static-link  "><a class="active-item" id="/docs/orm/prisma-client"><span class="">Prisma Client</span></a><ul class="treeNode__List-sc-a5dz51-0 iVglbw"><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq     more-padding"><a class="non-active" id="/docs/orm/prisma-client/setup-and-configuration" href="../setup-and-configuration.html"><span class="collapse-title"><button aria-label="collapse" class="item-collapser"><svg xmlns="http://www.w3.org/2000/svg" width="5" height="8" viewBox="0 0 5 8" fill="none" class="right close"><path d="M0 0.724246C0 0.111374 0.681914 -0.223425 1.13107 0.168926L4.66916 3.25957C5.11028 3.6449 5.11028 4.3551 4.66916 4.74043L1.13107 7.83107C0.681913 8.22342 0 7.88863 0 7.27575V0.724246Z" fill="#A0AEC0"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="8" height="6" viewBox="0 0 8 6" fill="none" class="down close"><path d="M7.27575 0.5C7.88863 0.5 8.22342 1.18191 7.83107 1.63107L4.74043 5.16916C4.3551 5.61028 3.6449 5.61028 3.25957 5.16916L0.168926 1.63107C-0.223425 1.18191 0.111375 0.5 0.724247 0.5L7.27575 0.5Z" fill="#A0AEC0"/></svg></button><span class="">Setup &amp; configuration</span></span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq     more-padding"><a class="active-item" id="/docs/orm/prisma-client/queries" href="../queries.html"><span class="collapse-title"><button aria-label="collapse" class="item-collapser"><svg xmlns="http://www.w3.org/2000/svg" width="5" height="8" viewBox="0 0 5 8" fill="none" class="right close"><path d="M0 0.724246C0 0.111374 0.681914 -0.223425 1.13107 0.168926L4.66916 3.25957C5.11028 3.6449 5.11028 4.3551 4.66916 4.74043L1.13107 7.83107C0.681913 8.22342 0 7.88863 0 7.27575V0.724246Z" fill="#A0AEC0"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="8" height="6" viewBox="0 0 8 6" fill="none" class="down close"><path d="M7.27575 0.5C7.88863 0.5 8.22342 1.18191 7.83107 1.63107L4.74043 5.16916C4.3551 5.61028 3.6449 5.61028 3.25957 5.16916L0.168926 1.63107C-0.223425 1.18191 0.111375 0.5 0.724247 0.5L7.27575 0.5Z" fill="#A0AEC0"/></svg></button><span class="">Queries</span></span></a><ul class="treeNode__List-sc-a5dz51-0 iVglbw has-border"><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq    last-level more-padding"><a class="non-active" id="/docs/orm/prisma-client/queries/crud" href="crud.html"><span class="">CRUD</span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq    last-level more-padding"><a class="non-active" id="/docs/orm/prisma-client/queries/select-fields" href="select-fields.html"><span class="">Select fields</span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq    last-level more-padding"><a class="non-active" id="/docs/orm/prisma-client/queries/relation-queries" href="relation-queries.html"><span class="">Relation queries</span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq    last-level more-padding"><a class="non-active" id="/docs/orm/prisma-client/queries/filtering-and-sorting" href="filtering-and-sorting.html"><span class="">Filtering and Sorting</span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq    last-level more-padding"><a class="non-active" id="/docs/orm/prisma-client/queries/pagination" href="pagination.html"><span class="">Pagination</span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq    last-level more-padding"><a class="non-active" id="/docs/orm/prisma-client/queries/aggregation-grouping-summarizing" href="aggregation-grouping-summarizing.html"><span class="">Aggregation, grouping, and summarizing</span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq    last-level more-padding"><a aria-current="page" class="active-item active-item" id="/docs/orm/prisma-client/queries/transactions" href="transactions.html"><span class="">Transactions and batch queries</span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq    last-level more-padding"><a class="non-active" id="/docs/orm/prisma-client/queries/full-text-search" href="full-text-search.html"><span class="">Full-text search</span><span class="tag small">Preview</span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq    last-level more-padding"><a class="non-active" id="/docs/orm/prisma-client/queries/custom-validation" href="custom-validation.html"><span class="">Custom validation</span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq    last-level more-padding"><a class="non-active" id="/docs/orm/prisma-client/queries/computed-fields" href="computed-fields.html"><span class="">Computed fields</span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq    last-level more-padding"><a class="non-active" id="/docs/orm/prisma-client/queries/excluding-fields" href="excluding-fields.html"><span class="">Excluding fields</span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq    last-level more-padding"><a class="non-active" id="/docs/orm/prisma-client/queries/custom-models" href="custom-models.html"><span class="">Custom models</span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq    last-level more-padding"><a class="non-active" id="/docs/orm/prisma-client/queries/case-sensitivity" href="case-sensitivity.html"><span class="">Case sensitivity</span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq    last-level more-padding"><a class="non-active" id="/docs/orm/prisma-client/queries/raw-database-access" href="raw-database-access.html"><span class="collapse-title"><button aria-label="collapse" class="item-collapser"><svg xmlns="http://www.w3.org/2000/svg" width="5" height="8" viewBox="0 0 5 8" fill="none" class="right close"><path d="M0 0.724246C0 0.111374 0.681914 -0.223425 1.13107 0.168926L4.66916 3.25957C5.11028 3.6449 5.11028 4.3551 4.66916 4.74043L1.13107 7.83107C0.681913 8.22342 0 7.88863 0 7.27575V0.724246Z" fill="#A0AEC0"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="8" height="6" viewBox="0 0 8 6" fill="none" class="down close"><path d="M7.27575 0.5C7.88863 0.5 8.22342 1.18191 7.83107 1.63107L4.74043 5.16916C4.3551 5.61028 3.6449 5.61028 3.25957 5.16916L0.168926 1.63107C-0.223425 1.18191 0.111375 0.5 0.724247 0.5L7.27575 0.5Z" fill="#A0AEC0"/></svg></button><span class="">Raw database access</span></span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq    last-level more-padding"><a class="non-active" id="/docs/orm/prisma-client/queries/query-optimization-performance" href="query-optimization-performance.html"><span class="">Query optimization</span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq    last-level more-padding"></li></ul></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq     more-padding"><a class="non-active" id="/docs/orm/prisma-client/special-fields-and-types" href="../special-fields-and-types.html"><span class="collapse-title"><button aria-label="collapse" class="item-collapser"><svg xmlns="http://www.w3.org/2000/svg" width="5" height="8" viewBox="0 0 5 8" fill="none" class="right close"><path d="M0 0.724246C0 0.111374 0.681914 -0.223425 1.13107 0.168926L4.66916 3.25957C5.11028 3.6449 5.11028 4.3551 4.66916 4.74043L1.13107 7.83107C0.681913 8.22342 0 7.88863 0 7.27575V0.724246Z" fill="#A0AEC0"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="8" height="6" viewBox="0 0 8 6" fill="none" class="down close"><path d="M7.27575 0.5C7.88863 0.5 8.22342 1.18191 7.83107 1.63107L4.74043 5.16916C4.3551 5.61028 3.6449 5.61028 3.25957 5.16916L0.168926 1.63107C-0.223425 1.18191 0.111375 0.5 0.724247 0.5L7.27575 0.5Z" fill="#A0AEC0"/></svg></button><span class="">Fields &amp; types</span></span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq     more-padding"><a class="non-active" id="/docs/orm/prisma-client/client-extensions" href="../client-extensions.html"><span class="collapse-title"><button aria-label="collapse" class="item-collapser"><svg xmlns="http://www.w3.org/2000/svg" width="5" height="8" viewBox="0 0 5 8" fill="none" class="right close"><path d="M0 0.724246C0 0.111374 0.681914 -0.223425 1.13107 0.168926L4.66916 3.25957C5.11028 3.6449 5.11028 4.3551 4.66916 4.74043L1.13107 7.83107C0.681913 8.22342 0 7.88863 0 7.27575V0.724246Z" fill="#A0AEC0"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="8" height="6" viewBox="0 0 8 6" fill="none" class="down close"><path d="M7.27575 0.5C7.88863 0.5 8.22342 1.18191 7.83107 1.63107L4.74043 5.16916C4.3551 5.61028 3.6449 5.61028 3.25957 5.16916L0.168926 1.63107C-0.223425 1.18191 0.111375 0.5 0.724247 0.5L7.27575 0.5Z" fill="#A0AEC0"/></svg></button><span class="">Extensions</span></span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq     more-padding"><a class="non-active" id="/docs/orm/prisma-client/type-safety" href="../type-safety.html"><span class="collapse-title"><button aria-label="collapse" class="item-collapser"><svg xmlns="http://www.w3.org/2000/svg" width="5" height="8" viewBox="0 0 5 8" fill="none" class="right close"><path d="M0 0.724246C0 0.111374 0.681914 -0.223425 1.13107 0.168926L4.66916 3.25957C5.11028 3.6449 5.11028 4.3551 4.66916 4.74043L1.13107 7.83107C0.681913 8.22342 0 7.88863 0 7.27575V0.724246Z" fill="#A0AEC0"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="8" height="6" viewBox="0 0 8 6" fill="none" class="down close"><path d="M7.27575 0.5C7.88863 0.5 8.22342 1.18191 7.83107 1.63107L4.74043 5.16916C4.3551 5.61028 3.6449 5.61028 3.25957 5.16916L0.168926 1.63107C-0.223425 1.18191 0.111375 0.5 0.724247 0.5L7.27575 0.5Z" fill="#A0AEC0"/></svg></button><span class="">Type safety</span></span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq     more-padding"><a class="non-active" id="/docs/orm/prisma-client/testing" href="../testing.html"><span class="collapse-title"><button aria-label="collapse" class="item-collapser"><svg xmlns="http://www.w3.org/2000/svg" width="5" height="8" viewBox="0 0 5 8" fill="none" class="right close"><path d="M0 0.724246C0 0.111374 0.681914 -0.223425 1.13107 0.168926L4.66916 3.25957C5.11028 3.6449 5.11028 4.3551 4.66916 4.74043L1.13107 7.83107C0.681913 8.22342 0 7.88863 0 7.27575V0.724246Z" fill="#A0AEC0"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="8" height="6" viewBox="0 0 8 6" fill="none" class="down close"><path d="M7.27575 0.5C7.88863 0.5 8.22342 1.18191 7.83107 1.63107L4.74043 5.16916C4.3551 5.61028 3.6449 5.61028 3.25957 5.16916L0.168926 1.63107C-0.223425 1.18191 0.111375 0.5 0.724247 0.5L7.27575 0.5Z" fill="#A0AEC0"/></svg></button><span class="">Testing</span></span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq     more-padding"><a class="non-active" id="/docs/orm/prisma-client/deployment" href="../deployment.html"><span class="collapse-title"><button aria-label="collapse" class="item-collapser"><svg xmlns="http://www.w3.org/2000/svg" width="5" height="8" viewBox="0 0 5 8" fill="none" class="right close"><path d="M0 0.724246C0 0.111374 0.681914 -0.223425 1.13107 0.168926L4.66916 3.25957C5.11028 3.6449 5.11028 4.3551 4.66916 4.74043L1.13107 7.83107C0.681913 8.22342 0 7.88863 0 7.27575V0.724246Z" fill="#A0AEC0"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="8" height="6" viewBox="0 0 8 6" fill="none" class="down close"><path d="M7.27575 0.5C7.88863 0.5 8.22342 1.18191 7.83107 1.63107L4.74043 5.16916C4.3551 5.61028 3.6449 5.61028 3.25957 5.16916L0.168926 1.63107C-0.223425 1.18191 0.111375 0.5 0.724247 0.5L7.27575 0.5Z" fill="#A0AEC0"/></svg></button><span class="">Deployment</span></span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq     more-padding"><a class="non-active" id="/docs/orm/prisma-client/observability-and-logging" href="../observability-and-logging.html"><span class="collapse-title"><button aria-label="collapse" class="item-collapser"><svg xmlns="http://www.w3.org/2000/svg" width="5" height="8" viewBox="0 0 5 8" fill="none" class="right close"><path d="M0 0.724246C0 0.111374 0.681914 -0.223425 1.13107 0.168926L4.66916 3.25957C5.11028 3.6449 5.11028 4.3551 4.66916 4.74043L1.13107 7.83107C0.681913 8.22342 0 7.88863 0 7.27575V0.724246Z" fill="#A0AEC0"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="8" height="6" viewBox="0 0 8 6" fill="none" class="down close"><path d="M7.27575 0.5C7.88863 0.5 8.22342 1.18191 7.83107 1.63107L4.74043 5.16916C4.3551 5.61028 3.6449 5.61028 3.25957 5.16916L0.168926 1.63107C-0.223425 1.18191 0.111375 0.5 0.724247 0.5L7.27575 0.5Z" fill="#A0AEC0"/></svg></button><span class="">Observability &amp; logging</span></span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq     more-padding"><a class="non-active" id="/docs/orm/prisma-client/debugging-and-troubleshooting" href="../debugging-and-troubleshooting.html"><span class="collapse-title"><button aria-label="collapse" class="item-collapser"><svg xmlns="http://www.w3.org/2000/svg" width="5" height="8" viewBox="0 0 5 8" fill="none" class="right close"><path d="M0 0.724246C0 0.111374 0.681914 -0.223425 1.13107 0.168926L4.66916 3.25957C5.11028 3.6449 5.11028 4.3551 4.66916 4.74043L1.13107 7.83107C0.681913 8.22342 0 7.88863 0 7.27575V0.724246Z" fill="#A0AEC0"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="8" height="6" viewBox="0 0 8 6" fill="none" class="down close"><path d="M7.27575 0.5C7.88863 0.5 8.22342 1.18191 7.83107 1.63107L4.74043 5.16916C4.3551 5.61028 3.6449 5.61028 3.25957 5.16916L0.168926 1.63107C-0.223425 1.18191 0.111375 0.5 0.724247 0.5L7.27575 0.5Z" fill="#A0AEC0"/></svg></button><span class="">Debugging &amp; troubleshooting</span></span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq   static-link  more-padding"></li></ul></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq   static-link  "><a class="non-active" id="/docs/orm/prisma-migrate"><span class="">Prisma Migrate</span></a><ul class="treeNode__List-sc-a5dz51-0 iVglbw"><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq     more-padding"><a class="non-active" id="/docs/orm/prisma-migrate/getting-started" href="../../prisma-migrate/getting-started.html"><span class="">Getting started</span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq     more-padding"><a class="non-active" id="/docs/orm/prisma-migrate/understanding-prisma-migrate" href="../../prisma-migrate/understanding-prisma-migrate.html"><span class="collapse-title"><button aria-label="collapse" class="item-collapser"><svg xmlns="http://www.w3.org/2000/svg" width="5" height="8" viewBox="0 0 5 8" fill="none" class="right close"><path d="M0 0.724246C0 0.111374 0.681914 -0.223425 1.13107 0.168926L4.66916 3.25957C5.11028 3.6449 5.11028 4.3551 4.66916 4.74043L1.13107 7.83107C0.681913 8.22342 0 7.88863 0 7.27575V0.724246Z" fill="#A0AEC0"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="8" height="6" viewBox="0 0 8 6" fill="none" class="down close"><path d="M7.27575 0.5C7.88863 0.5 8.22342 1.18191 7.83107 1.63107L4.74043 5.16916C4.3551 5.61028 3.6449 5.61028 3.25957 5.16916L0.168926 1.63107C-0.223425 1.18191 0.111375 0.5 0.724247 0.5L7.27575 0.5Z" fill="#A0AEC0"/></svg></button><span class="">Understanding Prisma Migrate</span></span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq     more-padding"><a class="non-active" id="/docs/orm/prisma-migrate/workflows" href="../../prisma-migrate/workflows.html"><span class="collapse-title"><button aria-label="collapse" class="item-collapser"><svg xmlns="http://www.w3.org/2000/svg" width="5" height="8" viewBox="0 0 5 8" fill="none" class="right close"><path d="M0 0.724246C0 0.111374 0.681914 -0.223425 1.13107 0.168926L4.66916 3.25957C5.11028 3.6449 5.11028 4.3551 4.66916 4.74043L1.13107 7.83107C0.681913 8.22342 0 7.88863 0 7.27575V0.724246Z" fill="#A0AEC0"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="8" height="6" viewBox="0 0 8 6" fill="none" class="down close"><path d="M7.27575 0.5C7.88863 0.5 8.22342 1.18191 7.83107 1.63107L4.74043 5.16916C4.3551 5.61028 3.6449 5.61028 3.25957 5.16916L0.168926 1.63107C-0.223425 1.18191 0.111375 0.5 0.724247 0.5L7.27575 0.5Z" fill="#A0AEC0"/></svg></button><span class="">Workflows</span></span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq   static-link  more-padding"></li></ul></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq   static-link  "><a class="non-active" id="/docs/orm/tools"><span class="">Tools</span></a><ul class="treeNode__List-sc-a5dz51-0 iVglbw"><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq     more-padding"><a class="non-active" id="/docs/orm/tools/prisma-cli" href="../../tools/prisma-cli.html"><span class="">Prisma CLI</span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq     more-padding"><a class="non-active" id="/docs/orm/tools/prisma-studio" href="../../tools/prisma-studio.html"><span class="">Prisma Studio</span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq   static-link  more-padding"></li></ul></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq   static-link  "><a class="non-active" id="/docs/orm/reference"><span class="">Reference</span></a><ul class="treeNode__List-sc-a5dz51-0 iVglbw"><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq     more-padding"><a class="non-active" id="/docs/orm/reference/prisma-client-reference" href="../../reference/prisma-client-reference.html"><span class="">Prisma Client API</span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq     more-padding"><a class="non-active" id="/docs/orm/reference/prisma-schema-reference" href="../../reference/prisma-schema-reference.html"><span class="">Prisma Schema</span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq     more-padding"><a class="non-active" id="/docs/orm/reference/prisma-cli-reference" href="../../reference/prisma-cli-reference.html"><span class="">Prisma CLI</span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq     more-padding"><a class="non-active" id="/docs/orm/reference/error-reference" href="../../reference/error-reference.html"><span class="">Errors</span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq     more-padding"><a class="non-active" id="/docs/orm/reference/environment-variables-reference" href="../../reference/environment-variables-reference.html"><span class="">Environment variables</span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq     more-padding"><a class="non-active" id="/docs/orm/reference/database-features" href="../../reference/database-features.html"><span class="">Database features matrix</span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq     more-padding"><a class="non-active" id="/docs/orm/reference/supported-databases" href="../../reference/supported-databases.html"><span class="">Supported databases</span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq     more-padding"><a class="non-active" id="/docs/orm/reference/connection-urls" href="../../reference/connection-urls.html"><span class="">Connection URLs</span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq     more-padding"><a class="non-active" id="/docs/orm/reference/system-requirements" href="../../reference/system-requirements.html"><span class="">System requirements</span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq     more-padding"><a class="non-active" id="/docs/orm/reference/preview-features" href="../../reference/preview-features.html"><span class="collapse-title"><button aria-label="collapse" class="item-collapser"><svg xmlns="http://www.w3.org/2000/svg" width="5" height="8" viewBox="0 0 5 8" fill="none" class="right close"><path d="M0 0.724246C0 0.111374 0.681914 -0.223425 1.13107 0.168926L4.66916 3.25957C5.11028 3.6449 5.11028 4.3551 4.66916 4.74043L1.13107 7.83107C0.681913 8.22342 0 7.88863 0 7.27575V0.724246Z" fill="#A0AEC0"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="8" height="6" viewBox="0 0 8 6" fill="none" class="down close"><path d="M7.27575 0.5C7.88863 0.5 8.22342 1.18191 7.83107 1.63107L4.74043 5.16916C4.3551 5.61028 3.6449 5.61028 3.25957 5.16916L0.168926 1.63107C-0.223425 1.18191 0.111375 0.5 0.724247 0.5L7.27575 0.5Z" fill="#A0AEC0"/></svg></button><span class="">Preview features</span></span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq   static-link  more-padding"></li></ul></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq   static-link  "><a class="non-active" id="/docs/orm/more"><span class="">More</span></a><ul class="treeNode__List-sc-a5dz51-0 iVglbw"><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq     more-padding"><a class="non-active" id="/docs/orm/more/under-the-hood" href="../../more/under-the-hood.html"><span class="collapse-title"><button aria-label="collapse" class="item-collapser"><svg xmlns="http://www.w3.org/2000/svg" width="5" height="8" viewBox="0 0 5 8" fill="none" class="right close"><path d="M0 0.724246C0 0.111374 0.681914 -0.223425 1.13107 0.168926L4.66916 3.25957C5.11028 3.6449 5.11028 4.3551 4.66916 4.74043L1.13107 7.83107C0.681913 8.22342 0 7.88863 0 7.27575V0.724246Z" fill="#A0AEC0"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="8" height="6" viewBox="0 0 8 6" fill="none" class="down close"><path d="M7.27575 0.5C7.88863 0.5 8.22342 1.18191 7.83107 1.63107L4.74043 5.16916C4.3551 5.61028 3.6449 5.61028 3.25957 5.16916L0.168926 1.63107C-0.223425 1.18191 0.111375 0.5 0.724247 0.5L7.27575 0.5Z" fill="#A0AEC0"/></svg></button><span class="">Under the hood</span></span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq     more-padding"><a class="non-active" id="/docs/orm/more/upgrade-guides" href="../../more/upgrade-guides.html"><span class="collapse-title"><button aria-label="collapse" class="item-collapser"><svg xmlns="http://www.w3.org/2000/svg" width="5" height="8" viewBox="0 0 5 8" fill="none" class="right close"><path d="M0 0.724246C0 0.111374 0.681914 -0.223425 1.13107 0.168926L4.66916 3.25957C5.11028 3.6449 5.11028 4.3551 4.66916 4.74043L1.13107 7.83107C0.681913 8.22342 0 7.88863 0 7.27575V0.724246Z" fill="#A0AEC0"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="8" height="6" viewBox="0 0 8 6" fill="none" class="down close"><path d="M7.27575 0.5C7.88863 0.5 8.22342 1.18191 7.83107 1.63107L4.74043 5.16916C4.3551 5.61028 3.6449 5.61028 3.25957 5.16916L0.168926 1.63107C-0.223425 1.18191 0.111375 0.5 0.724247 0.5L7.27575 0.5Z" fill="#A0AEC0"/></svg></button><span class="">Upgrade guides</span></span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq     more-padding"><a class="non-active" id="/docs/orm/more/comparisons" href="../../more/comparisons.html"><span class="collapse-title"><button aria-label="collapse" class="item-collapser"><svg xmlns="http://www.w3.org/2000/svg" width="5" height="8" viewBox="0 0 5 8" fill="none" class="right close"><path d="M0 0.724246C0 0.111374 0.681914 -0.223425 1.13107 0.168926L4.66916 3.25957C5.11028 3.6449 5.11028 4.3551 4.66916 4.74043L1.13107 7.83107C0.681913 8.22342 0 7.88863 0 7.27575V0.724246Z" fill="#A0AEC0"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="8" height="6" viewBox="0 0 8 6" fill="none" class="down close"><path d="M7.27575 0.5C7.88863 0.5 8.22342 1.18191 7.83107 1.63107L4.74043 5.16916C4.3551 5.61028 3.6449 5.61028 3.25957 5.16916L0.168926 1.63107C-0.223425 1.18191 0.111375 0.5 0.724247 0.5L7.27575 0.5Z" fill="#A0AEC0"/></svg></button><span class="">Comparing Prisma ORM</span></span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq     more-padding"><a class="non-active" id="/docs/orm/more/migrating-to-prisma" href="../../more/migrating-to-prisma.html"><span class="collapse-title"><button aria-label="collapse" class="item-collapser"><svg xmlns="http://www.w3.org/2000/svg" width="5" height="8" viewBox="0 0 5 8" fill="none" class="right close"><path d="M0 0.724246C0 0.111374 0.681914 -0.223425 1.13107 0.168926L4.66916 3.25957C5.11028 3.6449 5.11028 4.3551 4.66916 4.74043L1.13107 7.83107C0.681913 8.22342 0 7.88863 0 7.27575V0.724246Z" fill="#A0AEC0"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="8" height="6" viewBox="0 0 8 6" fill="none" class="down close"><path d="M7.27575 0.5C7.88863 0.5 8.22342 1.18191 7.83107 1.63107L4.74043 5.16916C4.3551 5.61028 3.6449 5.61028 3.25957 5.16916L0.168926 1.63107C-0.223425 1.18191 0.111375 0.5 0.724247 0.5L7.27575 0.5Z" fill="#A0AEC0"/></svg></button><span class="">Migrate to Prisma ORM</span></span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq     more-padding"><a class="non-active" id="/docs/orm/more/development-environment" href="../../more/development-environment.html"><span class="collapse-title"><button aria-label="collapse" class="item-collapser"><svg xmlns="http://www.w3.org/2000/svg" width="5" height="8" viewBox="0 0 5 8" fill="none" class="right close"><path d="M0 0.724246C0 0.111374 0.681914 -0.223425 1.13107 0.168926L4.66916 3.25957C5.11028 3.6449 5.11028 4.3551 4.66916 4.74043L1.13107 7.83107C0.681913 8.22342 0 7.88863 0 7.27575V0.724246Z" fill="#A0AEC0"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="8" height="6" viewBox="0 0 8 6" fill="none" class="down close"><path d="M7.27575 0.5C7.88863 0.5 8.22342 1.18191 7.83107 1.63107L4.74043 5.16916C4.3551 5.61028 3.6449 5.61028 3.25957 5.16916L0.168926 1.63107C-0.223425 1.18191 0.111375 0.5 0.724247 0.5L7.27575 0.5Z" fill="#A0AEC0"/></svg></button><span class="">Development environment</span></span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq     more-padding"><a class="non-active" id="/docs/orm/more/help-and-troubleshooting" href="../../more/help-and-troubleshooting.html"><span class="collapse-title"><button aria-label="collapse" class="item-collapser"><svg xmlns="http://www.w3.org/2000/svg" width="5" height="8" viewBox="0 0 5 8" fill="none" class="right close"><path d="M0 0.724246C0 0.111374 0.681914 -0.223425 1.13107 0.168926L4.66916 3.25957C5.11028 3.6449 5.11028 4.3551 4.66916 4.74043L1.13107 7.83107C0.681913 8.22342 0 7.88863 0 7.27575V0.724246Z" fill="#A0AEC0"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="8" height="6" viewBox="0 0 8 6" fill="none" class="down close"><path d="M7.27575 0.5C7.88863 0.5 8.22342 1.18191 7.83107 1.63107L4.74043 5.16916C4.3551 5.61028 3.6449 5.61028 3.25957 5.16916L0.168926 1.63107C-0.223425 1.18191 0.111375 0.5 0.724247 0.5L7.27575 0.5Z" fill="#A0AEC0"/></svg></button><span class="">Help &amp; troubleshooting</span></span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq     more-padding"><a class="non-active" id="/docs/orm/more/releases" href="../../more/releases/index.html"><span class="">ORM releases and maturity levels</span></a></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq   static-link  more-padding"></li></ul></li><li class="treeNode__ListItem-sc-a5dz51-1 iPyMQq  top-level   "></li></ul></li></ul></li></ul></div></aside></section></div><article class="layout__Content-sc-bupt9j-1 gmqsGj"><div class="layout__MaxWidth-sc-bupt9j-2 hdrMcE"><section class="top-section"><div class="topSection__TopSectionWrapper-sc-d3j04s-0 kIQBBY"><div class="parentTitleComp__BreadcrumbTitle-sc-f3mbxz-0 jOgsrP"><button class="customLink__CustomButton-sc-1xpvtl4-0 hyHLmQ"><i class="fa-solid fa-house undefined" style="text-align:center;font-size:16px;color:currentcolor;margin:"></i></button><span> <!-- -->/<!-- --> </span><span><a href="../../../orm.html"><span class="">ORM</span></a> / </span><span><a href="../../prisma-client.html"><span class="">Prisma Client</span></a> / </span><span><a href="../queries.html"><span class="">Queries</span></a></span></div><div class="topSection__Header-sc-d3j04s-1 jIzYNj"><div class="title"><h1 class="topSection__MainTitle-sc-d3j04s-2 egpkGJ">Transactions and batch queries</h1></div><div class="tech-switch-block"></div></div></div></section><section><p class="paragraph">A database transaction refers to a sequence of read/write operations that are <em>guaranteed</em> to either succeed or fail as a whole. This section describes the ways in which the Prisma Client API supports transactions.</p><p class="paragraph">For more in-depth examples and use cases, refer to the 📖 <a href="transactions.html">transactions guide</a>.</p></section><section><h2 id="transactions-overview" style="position:relative"><a href="transactions.html#transactions-overview" aria-label="transactions overview permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>Transactions overview</h2><span type="info" class="admonition__AdmonitionWrapper-sc-htoeam-3 kwPClj"><p class="paragraph">Before Prisma ORM version 4.4.0, you could not set isolation levels on transactions. The isolation level in your database configuration always applied.</p></span><p class="paragraph">Developers take advantage of the safety guarantees provided by the database by wrapping the operations in a transaction. These guarantees are often summarized using the ACID acronym:</p><ul class="list"><li><strong>Atomic</strong>: Ensures that either <em>all</em> or <em>none</em> operations of the transactions succeed. The transaction is either <em>committed</em> successfully or <em>aborted</em> and <em>rolled back</em>.</li><li><strong>Consistent</strong>: Ensures that the states of the database before and after the transaction are <em>valid</em> (i.e. any existing invariants about the data are maintained).</li><li><strong>Isolated</strong>: Ensures that concurrently running transactions have the same effect as if they were running in serial.</li><li><strong>Durability</strong>: Ensures that after the transaction succeeded, any writes are being stored persistently.</li></ul><p class="paragraph">While there's a lot of ambiguity and nuance to each of these properties (for example, consistency could actually be considered an <em>application-level responsibility</em> rather than a database property or isolation is typically guaranteed in terms of stronger and weaker <em>isolation levels</em>), overall they serve as a good high-level guideline for expectations developers have when thinking about database transactions.</p><blockquote><p class="paragraph">"Transactions are an abstraction layer that allows an application to pretend that certain concurrency problems and certain kinds of hardware and software faults don’t exist. A large class of errors is reduced down to a simple transaction abort, and the application just needs to try again." <button style="display:inline-block" class="customLink__CustomButton-sc-1xpvtl4-0 geWZl">Designing Data-Intensive Applications<svg xmlns="http://www.w3.org/2000/svg" width="12" style="margin-left:4px" height="12" viewBox="0 0 12 12" fill="currentColor" color="inherit"><path fill="inherit" d="M6 1h5v5L8.86 3.85 4.7 8 4 7.3l4.15-4.16L6 1Z M2 3h2v1H2v6h6V8h1v2a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1Z"/></svg></button>, <button style="display:inline-block" class="customLink__CustomButton-sc-1xpvtl4-0 geWZl">Martin Kleppmann<svg xmlns="http://www.w3.org/2000/svg" width="12" style="margin-left:4px" height="12" viewBox="0 0 12 12" fill="currentColor" color="inherit"><path fill="inherit" d="M6 1h5v5L8.86 3.85 4.7 8 4 7.3l4.15-4.16L6 1Z M2 3h2v1H2v6h6V8h1v2a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1Z"/></svg></button></p></blockquote><p class="paragraph">Prisma Client supports six different ways of handling transactions for three different scenarios:</p><div class="table__TableWrapper-sc-18kfzv9-0 jewaNT"><table><thead><tr><th align="left">Scenario</th><th align="left">Available techniques</th></tr></thead><tbody><tr><td align="left">Dependent writes</td><td align="left"><ul class="list"><li>Nested writes</li></ul></td></tr><tr><td align="left">Independent writes</td><td align="left"><ul class="list"><li><code class="inline-code">$transaction([])</code> API</li><li>Batch operations</li></ul></td></tr><tr><td align="left">Read, modify, write</td><td align="left"><ul class="list"><li>Idempotent operations</li><li>Optimistic concurrency control</li><li>Interactive transactions</li></ul></td></tr></tbody></table></div><p class="paragraph">The technique you choose depends on your particular use case.</p><blockquote><p class="paragraph"><strong>Note</strong>: For the purposes of this guide, <em>writing</em> to a database encompasses creating, updating, and deleting data.</p></blockquote></section><section><h2 id="about-transactions-in-prisma-client" style="position:relative"><a href="transactions.html#about-transactions-in-prisma-client" aria-label="about transactions in prisma client permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>About transactions in Prisma Client</h2><p class="paragraph">Prisma Client provides the following options for using transactions:</p><ul class="list"><li><a href="transactions.html#nested-writes">Nested writes</a>: use the Prisma Client API to process multiple operations on one or more related records inside the same transaction.</li><li><a href="transactions.html#batchbulk-operations">Batch / bulk transactions</a>: process one or more operations in bulk with <code class="inline-code">updateMany</code>, <code class="inline-code">deleteMany</code>, and <code class="inline-code">createMany</code>.</li><li>The <code class="inline-code">$transaction</code> API in Prisma Client:<ul class="list"><li><a href="transactions.html#sequential-prisma-client-operations">Sequential operations</a>: pass an array of Prisma Client queries to be executed sequentially inside a transaction, using <code class="inline-code">$transaction&lt;R&gt;(queries: PrismaPromise&lt;R&gt;[]): Promise&lt;R[]&gt;</code>.</li><li><a href="transactions.html#interactive-transactions">Interactive transactions</a>: pass a function that can contain user code including Prisma Client queries, non-Prisma code and other control flow to be executed in a transaction, using <code class="inline-code">$transaction&lt;R&gt;(fn: (prisma: PrismaClient) =&gt; R, options?: object): R</code></li></ul></li></ul></section><section><h2 id="nested-writes" style="position:relative"><a href="transactions.html#nested-writes" aria-label="nested writes permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>Nested writes</h2><p class="paragraph">A <a href="relation-queries.html#nested-writes">nested write</a> lets you perform a single Prisma Client API call with multiple <em>operations</em> that touch multiple <a href="../../prisma-schema/data-model/relations.html"><em>related</em></a> records. For example, creating a <em>user</em> together with a <em>post</em> or updating an <em>order</em> together with an <em>invoice</em>. Prisma Client ensures that all operations succeed or fail as a whole.</p><p class="paragraph">The following example demonstrates a nested write with <code class="inline-code">create</code>:</p><pre><div class="code__CodeWrapper-sc-8eixcc-0 cbTKLY codeWrapperDiv"><div class="gatsby-highlight pre-highlight"><pre class="code__Pre-sc-8eixcc-2 glKhkr 
                
                prism-code language-ts 
                 
                

              " style="color:#393A34;background-color:#f6f8fa"><div class="code__AbsoluteCopyButton-sc-8eixcc-1 fcPKpO copy-button"><div class="copy__CopyComponent-sc-eodafv-0 jdLDrK"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none" class="light"><rect x="0.5" width="24" height="24" rx="4" fill="#EDF2F7"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="#1A202C" class="dark"><rect x="0.5" width="24" height="24" rx="4" fill="#1A202C"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div><code style="width:max-content;overflow:visible"><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token comment" style="color:#999988;font-style:italic">// Create a new user with two posts in a</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// single transaction</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> newUser</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">User</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    email</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'alice@prisma.io'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    posts</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      create</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Join the Prisma Slack on https://slack.prisma.io'</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Follow @prisma on Twitter'</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div></code></pre></div></div></pre><p class="paragraph">The following example demonstrates a nested write with <code class="inline-code">update</code>:</p><pre><div class="code__CodeWrapper-sc-8eixcc-0 cbTKLY codeWrapperDiv"><div class="gatsby-highlight pre-highlight"><pre class="code__Pre-sc-8eixcc-2 glKhkr 
                
                prism-code language-ts 
                 
                

              " style="color:#393A34;background-color:#f6f8fa"><div class="code__AbsoluteCopyButton-sc-8eixcc-1 fcPKpO copy-button"><div class="copy__CopyComponent-sc-eodafv-0 jdLDrK"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none" class="light"><rect x="0.5" width="24" height="24" rx="4" fill="#EDF2F7"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="#1A202C" class="dark"><rect x="0.5" width="24" height="24" rx="4" fill="#1A202C"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div><code style="width:max-content;overflow:visible"><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token comment" style="color:#999988;font-style:italic">// Change the author of a post in a single transaction</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> updatedPost</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Post</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">post</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  where</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">42</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    author</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      connect</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> email</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'alice@prisma.io'</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div></code></pre></div></div></pre><blockquote><p class="paragraph">Refer to the 📖 <a href="transactions.html#nested-writes">transactions guide</a> for more examples.</p></blockquote></section><section><h2 id="batchbulk-operations" style="position:relative"><a href="transactions.html#batchbulk-operations" aria-label="batchbulk operations permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>Batch/bulk operations</h2><p class="paragraph">The following bulk operations run as transactions:</p><ul class="list"><li><code class="inline-code">deleteMany</code></li><li><code class="inline-code">updateMany</code></li><li><code class="inline-code">createMany</code></li></ul><blockquote><p class="paragraph">Refer to the 📖 <a href="transactions.html#bulk-operations">transactions guide</a> for more examples.</p></blockquote></section><section><h2 id="the-transaction-api" style="position:relative"><a href="transactions.html#the-transaction-api" aria-label="the inlinecodetransactioninlinecode api permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>The <inlinecode>$transaction</inlinecode> API</h2><p class="paragraph">The <code class="inline-code">$transaction</code> API can be used in two ways:</p><ul class="list"><li><p class="paragraph"><a href="transactions.html#sequential-prisma-client-operations">Sequential operations</a>: Pass an array of Prisma Client queries to be executed sequentially inside of a transaction.</p><p class="paragraph"><code class="inline-code">$transaction&lt;R&gt;(queries: PrismaPromise&lt;R&gt;[]): Promise&lt;R[]&gt;</code></p></li><li><p class="paragraph"><a href="transactions.html#interactive-transactions">Interactive transactions</a>: Pass a function that can contain user code including Prisma Client queries, non-Prisma code and other control flow to be executed in a transaction.</p><p class="paragraph"><code class="inline-code">$transaction&lt;R&gt;(fn: (prisma: PrismaClient) =&gt; R): R</code></p></li></ul><section><h3 id="sequential-prisma-client-operations" style="position:relative"><a href="transactions.html#sequential-prisma-client-operations" aria-label="sequential prisma client operations permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>Sequential Prisma Client operations</h3><p class="paragraph">The following query returns all posts that match the provided filter as well as a count of all posts:</p><pre><div class="code__CodeWrapper-sc-8eixcc-0 cbTKLY codeWrapperDiv"><div class="gatsby-highlight pre-highlight"><pre class="code__Pre-sc-8eixcc-2 glKhkr 
                
                prism-code language-ts 
                 
                

              " style="color:#393A34;background-color:#f6f8fa"><div class="code__AbsoluteCopyButton-sc-8eixcc-1 fcPKpO copy-button"><div class="copy__CopyComponent-sc-eodafv-0 jdLDrK"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none" class="light"><rect x="0.5" width="24" height="24" rx="4" fill="#EDF2F7"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="#1A202C" class="dark"><rect x="0.5" width="24" height="24" rx="4" fill="#1A202C"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div><code style="width:max-content;overflow:visible"><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">posts</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> totalPosts</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">$transaction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">post</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">findMany</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> where</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> contains</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'prisma'</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">post</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div></code></pre></div></div></pre><p class="paragraph">You can also use raw queries inside of a <code class="inline-code">$transaction</code>:</p><div class="tabbedContent__Wrapper-sc-19zdpko-1 cqEcvg"><div class="tabbedContent__Tabs-sc-19zdpko-0 bXKDlh"><div class="tabHeading active " data-index="0"><span class="fileWithIcon__FileNameWrapper-sc-13l4knb-0 dhygHl"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="15" viewBox="0 0 12 15" fill="none"><path d="M6 5.59609C8.76142 5.59609 11 4.79021 11 3.79609C11 2.80198 8.76142 1.99609 6 1.99609C3.23858 1.99609 1 2.80198 1 3.79609C1 4.79021 3.23858 5.59609 6 5.59609Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M11 7.99609C11 8.99209 8.77778 9.79609 6 9.79609C3.22222 9.79609 1 8.99209 1 7.99609" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M1 3.79614V12.1961C1 13.1921 3.22222 13.9961 6 13.9961C8.77778 13.9961 11 13.1921 11 12.1961V3.79614" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>SQL Databases</span></div><div class="tabHeading  " data-index="1"><span class="fileWithIcon__FileNameWrapper-sc-13l4knb-0 dhygHl"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="15" viewBox="0 0 12 15" fill="none"><path d="M6 5.59609C8.76142 5.59609 11 4.79021 11 3.79609C11 2.80198 8.76142 1.99609 6 1.99609C3.23858 1.99609 1 2.80198 1 3.79609C1 4.79021 3.23858 5.59609 6 5.59609Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M11 7.99609C11 8.99209 8.77778 9.79609 6 9.79609C3.22222 9.79609 1 8.99209 1 7.99609" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M1 3.79614V12.1961C1 13.1921 3.22222 13.9961 6 13.9961C8.77778 13.9961 11 13.1921 11 12.1961V3.79614" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>MongoDB</span></div></div><tab><pre><div class="code__CodeWrapper-sc-8eixcc-0 cbTKLY codeWrapperDiv"><div class="gatsby-highlight pre-highlight"><pre class="code__Pre-sc-8eixcc-2 glKhkr 
                
                prism-code language-ts 
                 
                

              " style="color:#393A34;background-color:#f6f8fa"><div class="code__AbsoluteCopyButton-sc-8eixcc-1 fcPKpO copy-button"><div class="copy__CopyComponent-sc-eodafv-0 jdLDrK"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none" class="light"><rect x="0.5" width="24" height="24" rx="4" fill="#EDF2F7"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="#1A202C" class="dark"><rect x="0.5" width="24" height="24" rx="4" fill="#1A202C"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div><code style="width:max-content;overflow:visible"><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">userList</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> updateUser</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">$transaction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">$queryRaw</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">SELECT 'title' FROM User</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">$executeRaw</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">UPDATE User SET name = 'Hello' WHERE id = 2;</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div></code></pre></div></div></pre></tab></div><p class="paragraph">Instead of immediately awaiting the result of each operation when it's performed, the operation itself is stored in a variable first which later is submitted to the database with a method called <code class="inline-code">$transaction</code>. Prisma Client will ensure that either all three <code class="inline-code">create</code> operations succeed or none of them succeed.</p><blockquote><p class="paragraph"><strong>Note</strong>: Operations are executed according to the order they are placed in the transaction. Using a query in a transaction does not influence the order of operations in the query itself.</p><p class="paragraph">Refer to the 📖 <a href="transactions.html#transaction-api">transactions guide</a> for more examples.</p></blockquote><p class="paragraph">From version 4.4.0, the sequential operations transaction API has a second parameter. You can use the following optional configuration option in this parameter:</p><ul class="list"><li><code class="inline-code">isolationLevel</code>: Sets the <a href="transactions.html#transaction-isolation-level">transaction isolation level</a>. By default this is set to the value currently configured in your database.</li></ul><p class="paragraph">For example:</p><pre><div class="code__CodeWrapper-sc-8eixcc-0 cbTKLY codeWrapperDiv"><div class="gatsby-highlight pre-highlight"><pre class="code__Pre-sc-8eixcc-2 glKhkr 
                
                prism-code language-ts 
                 
                

              " style="color:#393A34;background-color:#f6f8fa"><div class="code__AbsoluteCopyButton-sc-8eixcc-1 fcPKpO copy-button"><div class="copy__CopyComponent-sc-eodafv-0 jdLDrK"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none" class="light"><rect x="0.5" width="24" height="24" rx="4" fill="#EDF2F7"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="#1A202C" class="dark"><rect x="0.5" width="24" height="24" rx="4" fill="#1A202C"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div><code style="width:max-content;overflow:visible"><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">$transaction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">resource</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">deleteMany</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> where</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'name'</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">resource</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createMany</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> data </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    isolationLevel</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">TransactionIsolationLevel</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">Serializable</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// optional, default defined by database configuration</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div></code></pre></div></div></pre></section><section><h3 id="interactive-transactions" style="position:relative"><a href="transactions.html#interactive-transactions" aria-label="interactive transactions permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>Interactive transactions</h3><section><h4 id="overview" style="position:relative"><a href="transactions.html#overview" aria-label="overview permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>Overview</h4><p class="paragraph">Sometimes you need more control over what queries execute within a transaction. Interactive transactions are meant to provide you with an escape hatch.</p><span type="info" class="admonition__AdmonitionWrapper-sc-htoeam-3 kwPClj"><div class="admonition__FlexContainer-sc-htoeam-0 lfvhpa"><div class="admonition__ChildDiv-sc-htoeam-1 dDjWVR">Interactive transactions have been generally available from version 4.7.0.</div><div class="admonition__ChildDiv-sc-htoeam-1 dDjWVR">If you use interactive transactions in preview from version 2.29.0 to 4.6.1 (included), you need to add the <code class="inline-code">interactiveTransactions</code> preview feature to the generator block of your Prisma schema.</div></div></span><p class="paragraph">To use interactive transactions, you can pass an async function into <a href="transactions.html#transaction-api"><code class="inline-code">$transaction</code></a>.</p><p class="paragraph">The first argument passed into this async function is an instance of Prisma Client. Below, we will call this instance <code class="inline-code">tx</code>. Any Prisma Client call invoked on this <code class="inline-code">tx</code> instance is encapsulated into the transaction.</p><span type="warning" class="admonition__AdmonitionWrapper-sc-htoeam-3 kzCMZj"><p class="paragraph"><strong>Use interactive transactions with caution</strong>. Keeping transactions open for a long time hurts database performance and can even cause deadlocks. Try to avoid performing network requests and executing slow queries inside your transaction functions. We recommend you get in and out as quick as possible!</p></span></section><section><h4 id="example" style="position:relative"><a href="transactions.html#example" aria-label="example permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>Example</h4><p class="paragraph">Let's look at an example:</p><p class="paragraph">Imagine that you are building an online banking system. One of the actions to perform is to send money from one person to another.</p><p class="paragraph">As experienced developers, we want to make sure that during the transfer,</p><ul class="list"><li>the amount doesn't disappear</li><li>the amount isn't doubled</li></ul><p class="paragraph">This is a great use-case for interactive transactions because we need to perform logic in-between the writes to check the balance.</p><p class="paragraph">In the example below, Alice and Bob each have $100 in their account. If they try to send more money than they have, the transfer is rejected.</p><p class="paragraph">Alice is expected to be able to make 1 transfer for $100 while the other transfer would be rejected. This would result in Alice having $0 and Bob having $200.</p><pre><div class="code__CodeWrapper-sc-8eixcc-0 cbTKLY codeWrapperDiv"><div class="gatsby-highlight pre-highlight"><pre class="code__Pre-sc-8eixcc-2 glKhkr 
                
                prism-code language-tsx 
                 
                

              " style="color:#393A34;background-color:#f6f8fa"><div class="code__AbsoluteCopyButton-sc-8eixcc-1 fcPKpO copy-button"><div class="copy__CopyComponent-sc-eodafv-0 jdLDrK"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none" class="light"><rect x="0.5" width="24" height="24" rx="4" fill="#EDF2F7"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="#1A202C" class="dark"><rect x="0.5" width="24" height="24" rx="4" fill="#1A202C"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div><code style="width:max-content;overflow:visible"><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token maybe-class-name">PrismaClient</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@prisma/client'</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> prisma </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">PrismaClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">transfer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter keyword" style="color:#00009f">from</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> string</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> to</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> string</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> amount</span><span class="token parameter operator" style="color:#393A34">:</span><span class="token parameter"> number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">$transaction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">tx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 1. Decrement amount from the sender.</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> sender </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">account</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        balance</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">          decrement</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> amount</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      where</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        email</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 2. Verify that the sender's balance didn't go below zero.</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sender</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">balance </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      </span><span class="token keyword" style="color:#00009f">throw</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name known-class-name class-name">Error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation keyword module" style="color:#00009f">from</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c"> doesn't have enough to send </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">amount</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 3. Increment the recipient's balance by amount</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> recipient </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">account</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        balance</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">          increment</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> amount</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      where</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        email</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> to</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> recipient</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// This transfer is successful</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">transfer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'alice@prisma.io'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'bob@prisma.io'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// This transfer fails because Alice doesn't have enough funds in her account</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">transfer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'alice@prisma.io'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'bob@prisma.io'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div></code></pre></div></div></pre><p class="paragraph">In the example above, both <code class="inline-code">update</code> queries run within a database transaction. When the application reaches the end of the function, the transaction is <strong>committed</strong> to the database.</p><p class="paragraph">If your application encounters an error along the way, the async function will throw an exception and automatically <strong>rollback</strong> the transaction.</p><p class="paragraph">To catch the exception, you can wrap <code class="inline-code">$transaction</code> in a try-catch block:</p><pre><div class="code__CodeWrapper-sc-8eixcc-0 cbTKLY codeWrapperDiv"><div class="gatsby-highlight pre-highlight"><pre class="code__Pre-sc-8eixcc-2 glKhkr 
                
                prism-code language-js 
                 
                

              " style="color:#393A34;background-color:#f6f8fa"><div class="code__AbsoluteCopyButton-sc-8eixcc-1 fcPKpO copy-button"><div class="copy__CopyComponent-sc-eodafv-0 jdLDrK"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none" class="light"><rect x="0.5" width="24" height="24" rx="4" fill="#EDF2F7"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="#1A202C" class="dark"><rect x="0.5" width="24" height="24" rx="4" fill="#1A202C"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div><code style="width:max-content;overflow:visible"><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token keyword control-flow" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">$transaction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">tx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Code running in a transaction...</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Handle the rollback...</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span></div></code></pre></div></div></pre></section><section><h4 id="transaction-options" style="position:relative"><a href="transactions.html#transaction-options" aria-label="transaction options permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>Transaction options</h4><p class="paragraph">The transaction API has a second parameter. For interactive transactions, you can use the following optional configuration options in this parameter:</p><ul class="list"><li><code class="inline-code">maxWait</code>: The maximum amount of time Prisma Client will wait to acquire a transaction from the database. The default value is 2 seconds.</li><li><code class="inline-code">timeout</code>: The maximum amount of time the interactive transaction can run before being canceled and rolled back. The default value is 5 seconds.</li><li><code class="inline-code">isolationLevel</code>: Sets the <a href="transactions.html#transaction-isolation-level">transaction isolation level</a>. By default this is set to the value currently configured in your database.</li></ul><p class="paragraph">For example:</p><pre><div class="code__CodeWrapper-sc-8eixcc-0 cbTKLY codeWrapperDiv"><div class="gatsby-highlight pre-highlight"><pre class="code__Pre-sc-8eixcc-2 glKhkr 
                
                prism-code language-ts 
                 
                

              " style="color:#393A34;background-color:#f6f8fa"><div class="code__AbsoluteCopyButton-sc-8eixcc-1 fcPKpO copy-button"><div class="copy__CopyComponent-sc-eodafv-0 jdLDrK"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none" class="light"><rect x="0.5" width="24" height="24" rx="4" fill="#EDF2F7"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="#1A202C" class="dark"><rect x="0.5" width="24" height="24" rx="4" fill="#1A202C"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div><code style="width:max-content;overflow:visible"><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">$transaction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Code running in a transaction...</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    maxWait</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// default: 2000</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    timeout</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// default: 5000</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    isolationLevel</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">TransactionIsolationLevel</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">Serializable</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// optional, default defined by database configuration</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div></code></pre></div></div></pre><p class="paragraph">You can also set these globally on the constructor-level:</p><pre><div class="code__CodeWrapper-sc-8eixcc-0 cbTKLY codeWrapperDiv"><div class="gatsby-highlight pre-highlight"><pre class="code__Pre-sc-8eixcc-2 glKhkr 
                
                prism-code language-ts 
                 
                

              " style="color:#393A34;background-color:#f6f8fa"><div class="code__AbsoluteCopyButton-sc-8eixcc-1 fcPKpO copy-button"><div class="copy__CopyComponent-sc-eodafv-0 jdLDrK"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none" class="light"><rect x="0.5" width="24" height="24" rx="4" fill="#EDF2F7"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="#1A202C" class="dark"><rect x="0.5" width="24" height="24" rx="4" fill="#1A202C"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div><code style="width:max-content;overflow:visible"><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> prisma </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">PrismaClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  transactionOptions</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    isolationLevel</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">TransactionIsolationLevel</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">Serializable</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    maxWait</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// default: 2000</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    timeout</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// default: 5000</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div></code></pre></div></div></pre></section></section><section><h3 id="transaction-isolation-level" style="position:relative"><a href="transactions.html#transaction-isolation-level" aria-label="transaction isolation level permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>Transaction isolation level</h3><span type="info" class="admonition__AdmonitionWrapper-sc-htoeam-3 kwPClj"><p class="paragraph">This feature is not available on MongoDB, because MongoDB does not support isolation levels.</p></span><p class="paragraph">You can set the transaction <button style="display:inline-block" class="customLink__CustomButton-sc-1xpvtl4-0 geWZl">isolation level</button> for transactions.</p><span type="info" class="admonition__AdmonitionWrapper-sc-htoeam-3 kwPClj"><div class="admonition__FlexContainer-sc-htoeam-0 lfvhpa"><div class="admonition__ChildDiv-sc-htoeam-1 dDjWVR">This is available in the following Prisma ORM versions for interactive transactions from version 4.2.0, for sequential operations from version 4.4.0.</div><div class="admonition__ChildDiv-sc-htoeam-1 dDjWVR">In versions before 4.2.0 (for interactive transactions), or 4.4.0 (for sequential operations), you cannot configure the transaction isolation level at a Prisma ORM level. Prisma ORM does not explicitly set the isolation level, so the <a href="transactions.html#database-specific-information-on-isolation-levels">isolation level configured in your database</a> is used.</div></div></span><section><h4 id="set-the-isolation-level" style="position:relative"><a href="transactions.html#set-the-isolation-level" aria-label="set the isolation level permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>Set the isolation level</h4><p class="paragraph">To set the transaction isolation level, use the <code class="inline-code">isolationLevel</code> option in the second parameter of the API.</p><p class="paragraph">For sequential operations:</p><pre><div class="code__CodeWrapper-sc-8eixcc-0 cbTKLY codeWrapperDiv"><div class="gatsby-highlight pre-highlight"><pre class="code__Pre-sc-8eixcc-2 glKhkr 
                
                prism-code language-ts 
                 
                

              " style="color:#393A34;background-color:#f6f8fa"><div class="code__AbsoluteCopyButton-sc-8eixcc-1 fcPKpO copy-button"><div class="copy__CopyComponent-sc-eodafv-0 jdLDrK"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none" class="light"><rect x="0.5" width="24" height="24" rx="4" fill="#EDF2F7"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="#1A202C" class="dark"><rect x="0.5" width="24" height="24" rx="4" fill="#1A202C"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div><code style="width:max-content;overflow:visible"><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">$transaction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Prisma Client operations running in a transaction...</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    isolationLevel</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">TransactionIsolationLevel</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">Serializable</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// optional, default defined by database configuration</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div></code></pre></div></div></pre><p class="paragraph">For an interactive transaction:</p><pre><div class="code__CodeWrapper-sc-8eixcc-0 cbTKLY codeWrapperDiv"><div class="gatsby-highlight pre-highlight"><pre class="code__Pre-sc-8eixcc-2 glKhkr 
                
                prism-code language-jsx 
                 
                

              " style="color:#393A34;background-color:#f6f8fa"><div class="code__AbsoluteCopyButton-sc-8eixcc-1 fcPKpO copy-button"><div class="copy__CopyComponent-sc-eodafv-0 jdLDrK"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none" class="light"><rect x="0.5" width="24" height="24" rx="4" fill="#EDF2F7"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="#1A202C" class="dark"><rect x="0.5" width="24" height="24" rx="4" fill="#1A202C"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div><code style="width:max-content;overflow:visible"><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">$transaction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">prisma</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Code running in a transaction...</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    isolationLevel</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">TransactionIsolationLevel</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Serializable</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// optional, default defined by database configuration</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    maxWait</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// default: 2000</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    timeout</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// default: 5000</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div></code></pre></div></div></pre></section><section><h4 id="supported-isolation-levels" style="position:relative"><a href="transactions.html#supported-isolation-levels" aria-label="supported isolation levels permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>Supported isolation levels</h4><p class="paragraph">Prisma Client supports the following isolation levels if they are available in the underlying database:</p><ul class="list"><li><code class="inline-code">ReadUncommitted</code></li><li><code class="inline-code">ReadCommitted</code></li><li><code class="inline-code">RepeatableRead</code></li><li><code class="inline-code">Snapshot</code></li><li><code class="inline-code">Serializable</code></li></ul><p class="paragraph">The isolation levels available for each database connector are as follows:</p><div class="table__TableWrapper-sc-18kfzv9-0 jewaNT"><table><thead><tr><th>Database</th><th><code class="inline-code">ReadUncommitted</code></th><th><code class="inline-code">ReadCommitted</code></th><th><code class="inline-code">RepeatableRead</code></th><th><code class="inline-code">Snapshot</code></th><th><code class="inline-code">Serializable</code></th></tr></thead><tbody><tr><td>PostgreSQL</td><td>✔️</td><td>✔️</td><td>✔️</td><td>No</td><td>✔️</td></tr><tr><td>MySQL</td><td>✔️</td><td>✔️</td><td>✔️</td><td>No</td><td>✔️</td></tr><tr><td>SQL Server</td><td>✔️</td><td>✔️</td><td>✔️</td><td>✔️</td><td>✔️</td></tr><tr><td>CockroachDB</td><td>No</td><td>No</td><td>No</td><td>No</td><td>✔️</td></tr><tr><td>SQLite</td><td>No</td><td>No</td><td>No</td><td>No</td><td>✔️</td></tr></tbody></table></div><p class="paragraph">By default, Prisma Client sets the isolation level to the value currently configured in your database.</p><p class="paragraph">The isolation levels configured by default in each database are as follows:</p><div class="table__TableWrapper-sc-18kfzv9-0 jewaNT"><table><thead><tr><th>Database</th><th>Default</th></tr></thead><tbody><tr><td>PostgreSQL</td><td><code class="inline-code">ReadCommitted</code></td></tr><tr><td>MySQL</td><td><code class="inline-code">RepeatableRead</code></td></tr><tr><td>SQL Server</td><td><code class="inline-code">ReadCommitted</code></td></tr><tr><td>CockroachDB</td><td><code class="inline-code">Serializable</code></td></tr><tr><td>SQLite</td><td><code class="inline-code">Serializable</code></td></tr></tbody></table></div></section><section><h4 id="database-specific-information-on-isolation-levels" style="position:relative"><a href="transactions.html#database-specific-information-on-isolation-levels" aria-label="database specific information on isolation levels permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>Database-specific information on isolation levels</h4><p class="paragraph">See the following resources:</p><ul class="list"><li><button style="display:inline-block" class="customLink__CustomButton-sc-1xpvtl4-0 geWZl">Transaction isolation levels in PostgreSQL<svg xmlns="http://www.w3.org/2000/svg" width="12" style="margin-left:4px" height="12" viewBox="0 0 12 12" fill="currentColor" color="inherit"><path fill="inherit" d="M6 1h5v5L8.86 3.85 4.7 8 4 7.3l4.15-4.16L6 1Z M2 3h2v1H2v6h6V8h1v2a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1Z"/></svg></button></li><li><button style="display:inline-block" class="customLink__CustomButton-sc-1xpvtl4-0 geWZl">Transaction isolation levels in Microsoft SQL Server<svg xmlns="http://www.w3.org/2000/svg" width="12" style="margin-left:4px" height="12" viewBox="0 0 12 12" fill="currentColor" color="inherit"><path fill="inherit" d="M6 1h5v5L8.86 3.85 4.7 8 4 7.3l4.15-4.16L6 1Z M2 3h2v1H2v6h6V8h1v2a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1Z"/></svg></button></li><li><button style="display:inline-block" class="customLink__CustomButton-sc-1xpvtl4-0 geWZl">Transaction isolation levels in MySQL<svg xmlns="http://www.w3.org/2000/svg" width="12" style="margin-left:4px" height="12" viewBox="0 0 12 12" fill="currentColor" color="inherit"><path fill="inherit" d="M6 1h5v5L8.86 3.85 4.7 8 4 7.3l4.15-4.16L6 1Z M2 3h2v1H2v6h6V8h1v2a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1Z"/></svg></button></li></ul><p class="paragraph">CockroachDB and SQLite only support the <code class="inline-code">Serializable</code> isolation level.</p></section></section><section><h3 id="transaction-timing-issues" style="position:relative"><a href="transactions.html#transaction-timing-issues" aria-label="transaction timing issues permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>Transaction timing issues</h3><span type="info" class="admonition__AdmonitionWrapper-sc-htoeam-3 kwPClj"><ul class="list"><li>The solution in this section does not apply to MongoDB, because MongoDB does not support <button style="display:inline-block" class="customLink__CustomButton-sc-1xpvtl4-0 geWZl">isolation levels</button>.</li><li>The timing issues discussed in this section do not apply to CockroachDB and SQLite, because these databases only support the highest <code class="inline-code">Serializable</code> isolation level.</li></ul></span><p class="paragraph">When two or more transactions run concurrently in certain <button style="display:inline-block" class="customLink__CustomButton-sc-1xpvtl4-0 geWZl">isolation levels</button>, timing issues can cause write conflicts or deadlocks, such as the violation of unique constraints. For example, consider the following sequence of events where Transaction A and Transaction B both attempt to execute a <code class="inline-code">deleteMany</code> and a <code class="inline-code">createMany</code> operation:</p><ol class="o-list"><li>Transaction B: <code class="inline-code">createMany</code> operation creates a new set of rows.</li><li>Transaction B: The application commits transaction B.</li><li>Transaction A: <code class="inline-code">createMany</code> operation.</li><li>Transaction A: The application commits transaction A. The new rows conflict with the rows that transaction B added at step 2.</li></ol><p class="paragraph">This conflict can occur at the isolation level <code class="inline-code">ReadCommited</code>, which is the default isolation level in PostgreSQL and Microsoft SQL Server. To avoid this problem, you can set a higher isolation level (<code class="inline-code">RepeatableRead</code> or <code class="inline-code">Serializable</code>). You can set the isolation level on a transaction. This overrides your database isolation level for that transaction.</p><p class="paragraph">To avoid transaction write conflicts and deadlocks on a transaction:</p><ol class="o-list"><li><p class="paragraph">On your transaction, use the <code class="inline-code">isolationLevel</code> parameter to <code class="inline-code">Prisma.TransactionIsolationLevel.Serializable</code>.</p><p class="paragraph">This ensures that your application commits multiple concurrent or parallel transactions as if they were run serially. When a transaction fails due to a write conflict or deadlock, Prisma Client returns a <a href="../../reference/error-reference.html#p2034">P2034 error</a>.</p></li><li><p class="paragraph">In your application code, add a retry around your transaction to handle any P2034 errors, as shown in this example:</p><pre><div class="code__CodeWrapper-sc-8eixcc-0 cbTKLY codeWrapperDiv"><div class="gatsby-highlight pre-highlight"><pre class="code__Pre-sc-8eixcc-2 glKhkr 
                
                prism-code language-ts 
                 
                

              " style="color:#393A34;background-color:#f6f8fa"><div class="code__AbsoluteCopyButton-sc-8eixcc-1 fcPKpO copy-button"><div class="copy__CopyComponent-sc-eodafv-0 jdLDrK"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none" class="light"><rect x="0.5" width="24" height="24" rx="4" fill="#EDF2F7"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="#1A202C" class="dark"><rect x="0.5" width="24" height="24" rx="4" fill="#1A202C"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div><code style="width:max-content;overflow:visible"><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Prisma</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">PrismaClient</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@prisma/client'</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> prisma </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">PrismaClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">MAX_RETRIES</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> retries </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> result</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">retries </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">MAX_RETRIES</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">$transaction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">          prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">deleteMany</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">            where</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">              </span><span class="token comment" style="color:#999988;font-style:italic">/** args */</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">          prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">post</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createMany</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">            data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">              </span><span class="token comment" style="color:#999988;font-style:italic">/** args */</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">          isolationLevel</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">TransactionIsolationLevel</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">Serializable</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      </span><span class="token keyword" style="color:#00009f">break</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">code</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'P2034'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        retries</span><span class="token operator" style="color:#393A34">++</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        </span><span class="token keyword" style="color:#00009f">continue</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      </span><span class="token keyword" style="color:#00009f">throw</span><span class="token plain"> error</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span></div></code></pre></div></div></pre></li></ol></section></section><section><h2 id="dependent-writes" style="position:relative"><a href="transactions.html#dependent-writes" aria-label="dependent writes permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>Dependent writes</h2><p class="paragraph">Writes are considered <strong>dependent</strong> on each other if:</p><ul class="list"><li>Operations depend on the result of a preceding operation (for example, the database generating an ID)</li></ul><p class="paragraph">The most common scenario is creating a record and using the generated ID to create or update a related record. Examples include:</p><ul class="list"><li>Creating a user and two related blog posts (a one-to-many relationship) - the author ID must be known before creating blog posts</li><li>Creating a team and assigning members (a many-to-many relationship) - the team ID must be known before assigning members</li></ul><p class="paragraph">Dependent writes must succeed together in order to maintain data consistency and prevent unexpected behavior, such as blog post without an author or a team without members.</p><section><h3 id="nested-writes-1" style="position:relative"><a href="transactions.html#nested-writes-1" aria-label="nested writes 1 permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>Nested writes</h3><p class="paragraph">Prisma Client's solution to dependent writes is the <strong>nested writes</strong> feature, which is supported by <code class="inline-code">create</code> and <code class="inline-code">update</code>. The following nested write creates one user and two blog posts:</p><pre><div class="code__CodeWrapper-sc-8eixcc-0 cbTKLY codeWrapperDiv"><div class="gatsby-highlight pre-highlight"><pre class="code__Pre-sc-8eixcc-2 glKhkr 
                
                prism-code language-ts 
                 
                

              " style="color:#393A34;background-color:#f6f8fa"><div class="code__AbsoluteCopyButton-sc-8eixcc-1 fcPKpO copy-button"><div class="copy__CopyComponent-sc-eodafv-0 jdLDrK"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none" class="light"><rect x="0.5" width="24" height="24" rx="4" fill="#EDF2F7"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="#1A202C" class="dark"><rect x="0.5" width="24" height="24" rx="4" fill="#1A202C"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div><code style="width:max-content;overflow:visible"><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> nestedWrite </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    email</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'imani@prisma.io'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    posts</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      create</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'My first day at Prisma'</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'How to configure a unique constraint in PostgreSQL'</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div></code></pre></div></div></pre><p class="paragraph">If any operation fails, Prisma Client rolls back the entire transaction. Nested writes are not currently supported by top-level bulk operations like <code class="inline-code">client.user.deleteMany</code> and <code class="inline-code">client.user.updateMany</code>.</p><section><h4 id="when-to-use-nested-writes" style="position:relative"><a href="transactions.html#when-to-use-nested-writes" aria-label="when to use nested writes permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>When to use nested writes</h4><p class="paragraph">Consider using nested writes if:</p><ul class="list"><li>✔ You want to create two or more records related by ID at the same time (for example, create a blog post and a user)</li><li>✔ You want to update and create records related by ID at the same time (for example, change a user's name and create a new blog post)</li></ul><section class="tip__Wrapper-sc-1dwv1cj-0 gTwDYR"><div><p class="paragraph">If you <a href="transactions.html#scenario-pre-computed-ids-and-the-transaction-api">pre-compute your IDs, you can choose between a nested write or using the <code class="inline-code">$transaction([])</code> API</a>.</p></div></section></section><section><h4 id="scenario-sign-up-flow" style="position:relative"><a href="transactions.html#scenario-sign-up-flow" aria-label="scenario sign up flow permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>Scenario: Sign-up flow</h4><p class="paragraph">Consider the Slack sign-up flow, which:</p><ol class="o-list"><li>Creates a team</li><li>Adds one user to that team, which automatically becomes that team's administrator</li></ol><p class="paragraph">This scenario can be represented by the following schema - note that users can belong to many teams, and teams can have many users (a many-to-many relationship):</p><pre><div class="code__CodeWrapper-sc-8eixcc-0 cbTKLY codeWrapperDiv"><div class="gatsby-highlight pre-highlight"><pre class="code__Pre-sc-8eixcc-2 glKhkr 
                
                prism-code language-prisma 
                 
                

              " style="color:#393A34;background-color:#f6f8fa"><div class="code__AbsoluteCopyButton-sc-8eixcc-1 fcPKpO copy-button"><div class="copy__CopyComponent-sc-eodafv-0 jdLDrK"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none" class="light"><rect x="0.5" width="24" height="24" rx="4" fill="#EDF2F7"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="#1A202C" class="dark"><rect x="0.5" width="24" height="24" rx="4" fill="#1A202C"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div><code style="width:max-content;overflow:visible"><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token keyword" style="color:#00009f">model</span><span class="token type-class-name"> Team</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  id</span><span class="token type-class-name">      Int</span><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@id</span><span class="token plain"> </span><span class="token annotation punctuation" style="color:#393A34">@default</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">autoincrement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  name</span><span class="token type-class-name">    String</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  members</span><span class="token type-class-name"> User</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Many team members</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">model</span><span class="token type-class-name"> User</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  id</span><span class="token type-class-name">    Int</span><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@id</span><span class="token plain"> </span><span class="token annotation punctuation" style="color:#393A34">@default</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">autoincrement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  email</span><span class="token type-class-name"> String</span><span class="token plain"> </span><span class="token annotation punctuation" style="color:#393A34">@unique</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  teams</span><span class="token type-class-name"> Team</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Many teams</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span></div></code></pre></div></div></pre><p class="paragraph">The most straightforward approach is to create a team, then create and attach a user to that team:</p><pre><div class="code__CodeWrapper-sc-8eixcc-0 cbTKLY codeWrapperDiv"><div class="gatsby-highlight pre-highlight"><pre class="code__Pre-sc-8eixcc-2 glKhkr 
                
                prism-code language-ts 
                 
                

              " style="color:#393A34;background-color:#f6f8fa"><div class="code__AbsoluteCopyButton-sc-8eixcc-1 fcPKpO copy-button"><div class="copy__CopyComponent-sc-eodafv-0 jdLDrK"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none" class="light"><rect x="0.5" width="24" height="24" rx="4" fill="#EDF2F7"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="#1A202C" class="dark"><rect x="0.5" width="24" height="24" rx="4" fill="#1A202C"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div><code style="width:max-content;overflow:visible"><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token comment" style="color:#999988;font-style:italic">// Create a team</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> team </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">team</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Aurora Adventures'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Create a user and assign them to the team</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> user </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    email</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'alice@prisma.io'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    team</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      connect</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> team</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div></code></pre></div></div></pre><p class="paragraph">However, this code has a problem - consider the following scenario:</p><ol class="o-list"><li>Creating the team succeeds - "Aurora Adventures" is now taken</li><li>Creating and connecting the user fails - the team "Aurora Adventures" exists, but has no users</li><li>Going through the sign-up flow again and attempting to recreate "Aurora Adventures" fails - the team already exists</li></ol><p class="paragraph">Creating a team and adding a user should be one atomic operation that <strong>succeeds or fails as a whole</strong>.</p><p class="paragraph">To implement atomic writes in a low-level database clients, you must wrap your inserts in <code class="inline-code">BEGIN</code>, <code class="inline-code">COMMIT</code> and <code class="inline-code">ROLLBACK</code> statements. Prisma Client solves the problem with <a href="relation-queries.html#nested-writes">nested writes</a>. The following query creates a team, creates a user, and connects the records in a single transaction:</p><pre><div class="code__CodeWrapper-sc-8eixcc-0 cbTKLY codeWrapperDiv"><div class="gatsby-highlight pre-highlight"><pre class="code__Pre-sc-8eixcc-2 glKhkr 
                
                prism-code language-ts 
                 
                

              " style="color:#393A34;background-color:#f6f8fa"><div class="code__AbsoluteCopyButton-sc-8eixcc-1 fcPKpO copy-button"><div class="copy__CopyComponent-sc-eodafv-0 jdLDrK"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none" class="light"><rect x="0.5" width="24" height="24" rx="4" fill="#EDF2F7"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="#1A202C" class="dark"><rect x="0.5" width="24" height="24" rx="4" fill="#1A202C"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div><code style="width:max-content;overflow:visible"><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> team </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">team</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Aurora Adventures'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    members</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      create</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        email</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'alice@prisma.io'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div></code></pre></div></div></pre><p class="paragraph">Furthermore, if an error occurs at any point, Prisma Client rolls back the entire transaction.</p></section><section><h4 id="nested-writes-faqs" style="position:relative"><a href="transactions.html#nested-writes-faqs" aria-label="nested writes faqs permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>Nested writes FAQs</h4><section><h5 id="why-cant-i-use-the-transaction-api-to-solve-the-same-problem" style="position:relative"><a href="transactions.html#why-cant-i-use-the-transaction-api-to-solve-the-same-problem" aria-label="why cant i use the transaction api to solve the same problem permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>Why can't I use the <code class="inline-code">$transaction([])</code> API to solve the same problem?</h5><p class="paragraph">The <code class="inline-code">$transaction([])</code> API does not allow you to pass IDs between distinct operations. In the following example, <code class="inline-code">createUserOperation.id</code> is not available yet:</p><pre><div class="code__CodeWrapper-sc-8eixcc-0 cbTKLY codeWrapperDiv"><div class="gatsby-highlight pre-highlight"><pre class="code__Pre-sc-8eixcc-2 glKhkr 
                
                prism-code language-ts 
                 
                

              " style="color:#393A34;background-color:#f6f8fa"><div class="code__AbsoluteCopyButton-sc-8eixcc-1 fcPKpO copy-button"><div class="copy__CopyComponent-sc-eodafv-0 jdLDrK"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none" class="light"><rect x="0.5" width="24" height="24" rx="4" fill="#EDF2F7"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="#1A202C" class="dark"><rect x="0.5" width="24" height="24" rx="4" fill="#1A202C"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div><code style="width:max-content;overflow:visible"><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> createUserOperation </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    email</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'ebony@prisma.io'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> createTeamOperation </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">team</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Aurora Adventures'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    members</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      connect</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-deleted-bg-color);symb-color:var(--code-deleted-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> createUserOperation</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Not possible, ID not yet available</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">$transaction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">createUserOperation</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> createTeamOperation</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div></code></pre></div></div></pre></section><section><h5 id="nested-writes-support-nested-updates-but-updates-are-not-dependent-writes---should-i-use-the-transaction-api" style="position:relative"><a href="transactions.html#nested-writes-support-nested-updates-but-updates-are-not-dependent-writes---should-i-use-the-transaction-api" aria-label="nested writes support nested updates but updates are not dependent writes   should i use the transaction api permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>Nested writes support nested updates, but updates are not dependent writes - should I use the <code class="inline-code">$transaction([])</code> API?</h5><p class="paragraph">It is correct to say that because you know the ID of the team, you can update the team and its team members independently within a <code class="inline-code">$transaction([])</code>. The following example performs both operations in a <code class="inline-code">$transaction([])</code>:</p><pre><div class="code__CodeWrapper-sc-8eixcc-0 cbTKLY codeWrapperDiv"><div class="gatsby-highlight pre-highlight"><pre class="code__Pre-sc-8eixcc-2 glKhkr 
                
                prism-code language-ts 
                 
                

              " style="color:#393A34;background-color:#f6f8fa"><div class="code__AbsoluteCopyButton-sc-8eixcc-1 fcPKpO copy-button"><div class="copy__CopyComponent-sc-eodafv-0 jdLDrK"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none" class="light"><rect x="0.5" width="24" height="24" rx="4" fill="#EDF2F7"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="#1A202C" class="dark"><rect x="0.5" width="24" height="24" rx="4" fill="#1A202C"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div><code style="width:max-content;overflow:visible"><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> updateTeam </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">team</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  where</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Aurora Adventures Ltd'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> updateUsers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">updateMany</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  where</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    teams</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      some</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      equals</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Unknown User'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">$transaction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">updateUsers</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> updateTeam</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div></code></pre></div></div></pre><p class="paragraph">However, you can achieve the same result with a nested write:</p><pre><div class="code__CodeWrapper-sc-8eixcc-0 cbTKLY codeWrapperDiv"><div class="gatsby-highlight pre-highlight"><pre class="code__Pre-sc-8eixcc-2 glKhkr 
                
                prism-code language-ts 
                 
                

              " style="color:#393A34;background-color:#f6f8fa"><div class="code__AbsoluteCopyButton-sc-8eixcc-1 fcPKpO copy-button"><div class="copy__CopyComponent-sc-eodafv-0 jdLDrK"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none" class="light"><rect x="0.5" width="24" height="24" rx="4" fill="#EDF2F7"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="#1A202C" class="dark"><rect x="0.5" width="24" height="24" rx="4" fill="#1A202C"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div><code style="width:max-content;overflow:visible"><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> updateTeam </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">team</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  where</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Aurora Adventures Ltd'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Update team name</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    members</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      updateMany</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Update team members that do not have a name</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">          name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Unknown User'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        where</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">          name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">            equals</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div></code></pre></div></div></pre></section><section><h5 id="can-i-perform-multiple-nested-writes---for-example-create-two-new-teams-and-assign-users" style="position:relative"><a href="transactions.html#can-i-perform-multiple-nested-writes---for-example-create-two-new-teams-and-assign-users" aria-label="can i perform multiple nested writes   for example create two new teams and assign users permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>Can I perform multiple nested writes - for example, create two new teams and assign users?</h5><p class="paragraph">Yes, but this is a combination of scenarios and techniques:</p><ul class="list"><li>Creating a team and assigning users is a dependent write - use nested writes</li><li>Creating all teams and users at the same time is an independent write because team/user combination #1 and team/user combination #2 are unrelated writes - use the <code class="inline-code">$transaction([])</code> API</li></ul><pre><div class="code__CodeWrapper-sc-8eixcc-0 cbTKLY codeWrapperDiv"><div class="gatsby-highlight pre-highlight"><pre class="code__Pre-sc-8eixcc-2 glKhkr 
                
                prism-code language-ts 
                 
                

              " style="color:#393A34;background-color:#f6f8fa"><div class="code__AbsoluteCopyButton-sc-8eixcc-1 fcPKpO copy-button"><div class="copy__CopyComponent-sc-eodafv-0 jdLDrK"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none" class="light"><rect x="0.5" width="24" height="24" rx="4" fill="#EDF2F7"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="#1A202C" class="dark"><rect x="0.5" width="24" height="24" rx="4" fill="#1A202C"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div><code style="width:max-content;overflow:visible"><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token comment" style="color:#999988;font-style:italic">// Nested write</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> createOne </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">team</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Aurora Adventures'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    members</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      create</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        email</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'alice@prisma.io'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Nested write</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> createTwo </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">team</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Cool Crew'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    members</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      create</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        email</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'elsa@prisma.io'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// $transaction([]) API</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">$transaction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">createTwo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> createOne</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div></code></pre></div></div></pre></section></section></section></section><section><h2 id="independent-writes" style="position:relative"><a href="transactions.html#independent-writes" aria-label="independent writes permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>Independent writes</h2><p class="paragraph">Writes are considered <strong>independent</strong> if they do not rely on the result of a previous operation. The following groups of independent writes can occur in any order:</p><ul class="list"><li>Updating the status field of a list of orders to "Dispatched"</li><li>Marking a list of emails as "Read"</li></ul><blockquote><p class="paragraph"><strong>Note</strong>: Independent writes may have to occur in a specific order if constraints are present - for example, you must delete blog posts before the blog author if the post have a mandatory <code class="inline-code">authorId</code> field. However, they are still considered independent writes because no operations depend on the <em>result</em> of a previous operation, such as the database returning a generated ID.</p></blockquote><p class="paragraph">Depending on your requirements, Prisma Client has four options for handling independent writes that should succeed or fail together.</p><section><h3 id="bulk-operations" style="position:relative"><a href="transactions.html#bulk-operations" aria-label="bulk operations permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>Bulk operations</h3><p class="paragraph">Bulk writes allow you to write multiple records of the same type in a single transaction - if any operation fails, Prisma Client rolls back the entire transaction. Prisma Client currently supports:</p><ul class="list"><li><code class="inline-code">updateMany</code></li><li><code class="inline-code">deleteMany</code></li><li><code class="inline-code">createMany</code></li></ul><section><h4 id="when-to-use-bulk-operations" style="position:relative"><a href="transactions.html#when-to-use-bulk-operations" aria-label="when to use bulk operations permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>When to use bulk operations</h4><p class="paragraph">Consider bulk operations as a solution if:</p><ul class="list"><li>✔ You want to update a batch of the <em>same type</em> of record, like a batch of emails</li></ul></section><section><h4 id="scenario-marking-emails-as-read" style="position:relative"><a href="transactions.html#scenario-marking-emails-as-read" aria-label="scenario marking emails as read permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>Scenario: Marking emails as read</h4><p class="paragraph">You are building a service like gmail.com, and your customer wants a <strong>"Mark as read"</strong> feature that allows users to mark all emails as read. Each update to the status of an email is an independent write because the emails do not depend on one another - for example, the "Happy Birthday! 🍰" email from your aunt is unrelated to the promotional email from IKEA.</p><p class="paragraph">In the following schema, a <code class="inline-code">User</code> can have many received emails (a one-to-many relationship):</p><pre><div class="code__CodeWrapper-sc-8eixcc-0 cbTKLY codeWrapperDiv"><div class="gatsby-highlight pre-highlight"><pre class="code__Pre-sc-8eixcc-2 glKhkr 
                
                prism-code language-ts 
                 
                

              " style="color:#393A34;background-color:#f6f8fa"><div class="code__AbsoluteCopyButton-sc-8eixcc-1 fcPKpO copy-button"><div class="copy__CopyComponent-sc-eodafv-0 jdLDrK"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none" class="light"><rect x="0.5" width="24" height="24" rx="4" fill="#EDF2F7"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="#1A202C" class="dark"><rect x="0.5" width="24" height="24" rx="4" fill="#1A202C"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div><code style="width:max-content;overflow:visible"><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">model </span><span class="token maybe-class-name">User</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  id    </span><span class="token maybe-class-name">Int</span><span class="token plain">       @id @</span><span class="token keyword" style="color:#00009f">default</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">autoincrement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  email           </span><span class="token known-class-name class-name">String</span><span class="token plain"> @unique</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  receivedEmails  </span><span class="token maybe-class-name">Email</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Many emails</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">model </span><span class="token maybe-class-name">Email</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  id      </span><span class="token maybe-class-name">Int</span><span class="token plain">     @id @</span><span class="token keyword" style="color:#00009f">default</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">autoincrement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  user    </span><span class="token maybe-class-name">User</span><span class="token plain">    @</span><span class="token function" style="color:#d73a49">relation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fields</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">userId</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> references</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  userId  </span><span class="token maybe-class-name">Int</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  subject </span><span class="token known-class-name class-name">String</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  body    </span><span class="token known-class-name class-name">String</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  unread  </span><span class="token known-class-name class-name">Boolean</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span></div></code></pre></div></div></pre><p class="paragraph">Based on this schema, you can use <code class="inline-code">updateMany</code> to mark all unread emails as read:</p><pre><div class="code__CodeWrapper-sc-8eixcc-0 cbTKLY codeWrapperDiv"><div class="gatsby-highlight pre-highlight"><pre class="code__Pre-sc-8eixcc-2 glKhkr 
                
                prism-code language-ts 
                 
                

              " style="color:#393A34;background-color:#f6f8fa"><div class="code__AbsoluteCopyButton-sc-8eixcc-1 fcPKpO copy-button"><div class="copy__CopyComponent-sc-eodafv-0 jdLDrK"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none" class="light"><rect x="0.5" width="24" height="24" rx="4" fill="#EDF2F7"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="#1A202C" class="dark"><rect x="0.5" width="24" height="24" rx="4" fill="#1A202C"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div><code style="width:max-content;overflow:visible"><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">email</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">updateMany</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  where</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    user</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    unread</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    unread</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div></code></pre></div></div></pre></section><section><h4 id="can-i-use-nested-writes-with-bulk-operations" style="position:relative"><a href="transactions.html#can-i-use-nested-writes-with-bulk-operations" aria-label="can i use nested writes with bulk operations permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>Can I use nested writes with bulk operations?</h4><p class="paragraph">No - neither <code class="inline-code">updateMany</code> nor <code class="inline-code">deleteMany</code> currently supports nested writes. For example, you cannot delete multiple teams and all of their members (a cascading delete):</p><pre><div class="code__CodeWrapper-sc-8eixcc-0 cbTKLY codeWrapperDiv"><div class="gatsby-highlight pre-highlight"><pre class="code__Pre-sc-8eixcc-2 glKhkr 
                
                prism-code language-ts 
                 
                

              " style="color:#393A34;background-color:#f6f8fa"><div class="code__AbsoluteCopyButton-sc-8eixcc-1 fcPKpO copy-button"><div class="copy__CopyComponent-sc-eodafv-0 jdLDrK"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none" class="light"><rect x="0.5" width="24" height="24" rx="4" fill="#EDF2F7"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="#1A202C" class="dark"><rect x="0.5" width="24" height="24" rx="4" fill="#1A202C"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div><code style="width:max-content;overflow:visible"><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">team</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">deleteMany</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  where</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      </span><span class="token keyword" style="color:#00009f">in</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">99</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-deleted-bg-color);symb-color:var(--code-deleted-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    members</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Cannot access members here</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div></code></pre></div></div></pre></section><section><h4 id="can-i-use-bulk-operations-with-the-transaction-api" style="position:relative"><a href="transactions.html#can-i-use-bulk-operations-with-the-transaction-api" aria-label="can i use bulk operations with the transaction api permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>Can I use bulk operations with the <code class="inline-code">$transaction([])</code> API?</h4><p class="paragraph">Yes - for example, you can include multiple <code class="inline-code">deleteMany</code> operations inside a <code class="inline-code">$transaction([])</code>.</p></section></section><section><h3 id="transaction-api" style="position:relative"><a href="transactions.html#transaction-api" aria-label="inlinecodetransactioninlinecode api permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a><inlinecode>$transaction([])</inlinecode> API</h3><p class="paragraph">The <code class="inline-code">$transaction([])</code> API is generic solution to independent writes that allows you to run multiple operations as a single, atomic operation - if any operation fails, Prisma Client rolls back the entire transaction.</p><p class="paragraph">Its also worth noting that operations are executed according to the order they are placed in the transaction.</p><pre><div class="code__CodeWrapper-sc-8eixcc-0 cbTKLY codeWrapperDiv"><div class="gatsby-highlight pre-highlight"><pre class="code__Pre-sc-8eixcc-2 glKhkr 
                
                prism-code language-ts 
                 
                

              " style="color:#393A34;background-color:#f6f8fa"><div class="code__AbsoluteCopyButton-sc-8eixcc-1 fcPKpO copy-button"><div class="copy__CopyComponent-sc-eodafv-0 jdLDrK"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none" class="light"><rect x="0.5" width="24" height="24" rx="4" fill="#EDF2F7"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="#1A202C" class="dark"><rect x="0.5" width="24" height="24" rx="4" fill="#1A202C"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div><code style="width:max-content;overflow:visible"><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">$transaction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">iRunFirst</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> iRunSecond</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> iRunThird</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div></code></pre></div></div></pre><blockquote><p class="paragraph"><strong>Note</strong>: Using a query in a transaction does not influence the order of operations in the query itself.</p></blockquote><p class="paragraph">As Prisma Client evolves, use cases for the <code class="inline-code">$transaction([])</code> API will increasingly be replaced by more specialized bulk operations (such as <code class="inline-code">createMany</code>) and nested writes.</p><section><h4 id="when-to-use-the-transaction-api" style="position:relative"><a href="transactions.html#when-to-use-the-transaction-api" aria-label="when to use the transaction api permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>When to use the <code class="inline-code">$transaction([])</code> API</h4><p class="paragraph">Consider the <code class="inline-code">$transaction([])</code> API if:</p><ul class="list"><li>✔ You want to update a batch that includes different types of records, such as emails and users. The records do not need to be related in any way.</li><li>✔ You want to batch raw SQL queries (<code class="inline-code">$executeRaw</code>) - for example, for features that Prisma Client does not yet support.</li></ul></section><section><h4 id="scenario-privacy-legislation" style="position:relative"><a href="transactions.html#scenario-privacy-legislation" aria-label="scenario privacy legislation permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>Scenario: Privacy legislation</h4><p class="paragraph">GDPR and other privacy legislation give users the right to request that an organization deletes all of their personal data. In the following example schema, a <code class="inline-code">User</code> can have many posts and private messages:</p><pre><div class="code__CodeWrapper-sc-8eixcc-0 cbTKLY codeWrapperDiv"><div class="gatsby-highlight pre-highlight"><pre class="code__Pre-sc-8eixcc-2 glKhkr 
                
                prism-code language-prisma 
                 
                

              " style="color:#393A34;background-color:#f6f8fa"><div class="code__AbsoluteCopyButton-sc-8eixcc-1 fcPKpO copy-button"><div class="copy__CopyComponent-sc-eodafv-0 jdLDrK"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none" class="light"><rect x="0.5" width="24" height="24" rx="4" fill="#EDF2F7"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="#1A202C" class="dark"><rect x="0.5" width="24" height="24" rx="4" fill="#1A202C"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div><code style="width:max-content;overflow:visible"><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token keyword" style="color:#00009f">model</span><span class="token type-class-name"> User</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  id</span><span class="token type-class-name">              Int</span><span class="token plain">              </span><span class="token annotation punctuation" style="color:#393A34">@id</span><span class="token plain"> </span><span class="token annotation punctuation" style="color:#393A34">@default</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">autoincrement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  posts</span><span class="token type-class-name">           Post</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  privateMessages</span><span class="token type-class-name"> PrivateMessage</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">model</span><span class="token type-class-name"> Post</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  id</span><span class="token type-class-name">      Int</span><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@id</span><span class="token plain"> </span><span class="token annotation punctuation" style="color:#393A34">@default</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">autoincrement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  user</span><span class="token type-class-name">    User</span><span class="token plain">   </span><span class="token annotation punctuation" style="color:#393A34">@relation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token type-args">fields:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">userId</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token type-args">references:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  userId</span><span class="token type-class-name">  Int</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  title</span><span class="token type-class-name">   String</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  content</span><span class="token type-class-name"> String</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">model</span><span class="token type-class-name"> PrivateMessage</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  id</span><span class="token type-class-name">      Int</span><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@id</span><span class="token plain"> </span><span class="token annotation punctuation" style="color:#393A34">@default</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">autoincrement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  user</span><span class="token type-class-name">    User</span><span class="token plain">   </span><span class="token annotation punctuation" style="color:#393A34">@relation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token type-args">fields:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">userId</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token type-args">references:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  userId</span><span class="token type-class-name">  Int</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  message</span><span class="token type-class-name"> String</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span></div></code></pre></div></div></pre><p class="paragraph">If a user invokes the right to be forgotten, we must delete three records: the user record, private messages, and posts. It is critical that <em>all</em> delete operations succeed together or not at all, which makes this a use case for a transaction. However, using a single bulk operation like <code class="inline-code">deleteMany</code> is not possible in this scenario because we need to delete across three models. Instead, we can use the <code class="inline-code">$transaction([])</code> API to run three operations together - two <code class="inline-code">deleteMany</code> and one <code class="inline-code">delete</code>:</p><pre><div class="code__CodeWrapper-sc-8eixcc-0 cbTKLY codeWrapperDiv"><div class="gatsby-highlight pre-highlight"><pre class="code__Pre-sc-8eixcc-2 glKhkr 
                
                prism-code language-ts 
                 
                

              " style="color:#393A34;background-color:#f6f8fa"><div class="code__AbsoluteCopyButton-sc-8eixcc-1 fcPKpO copy-button"><div class="copy__CopyComponent-sc-eodafv-0 jdLDrK"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none" class="light"><rect x="0.5" width="24" height="24" rx="4" fill="#EDF2F7"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="#1A202C" class="dark"><rect x="0.5" width="24" height="24" rx="4" fill="#1A202C"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div><code style="width:max-content;overflow:visible"><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// User to be deleted</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> deletePosts </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">post</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">deleteMany</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  where</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    userId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> deleteMessages </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">privateMessage</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">deleteMany</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  where</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    userId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> deleteUser </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">delete</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  where</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">$transaction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">deletePosts</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> deleteMessages</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> deleteUser</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Operations succeed or fail together</span><span class="token plain"></span></span></div></code></pre></div></div></pre></section><section><h4 id="scenario-pre-computed-ids-and-the-transaction-api" style="position:relative"><a href="transactions.html#scenario-pre-computed-ids-and-the-transaction-api" aria-label="scenario pre computed ids and the transaction api permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>Scenario: Pre-computed IDs and the <code class="inline-code">$transaction([])</code> API</h4><p class="paragraph">Dependent writes are not supported by the <code class="inline-code">$transaction([])</code> API - if operation A relies on the ID generated by operation B, use <a href="transactions.html#nested-writes">nested writes</a>. However, if you <em>pre-computed</em> IDs (for example, by generating GUIDs), your writes become independent. Consider the sign-up flow from the nested writes example:</p><pre><div class="code__CodeWrapper-sc-8eixcc-0 cbTKLY codeWrapperDiv"><div class="gatsby-highlight pre-highlight"><pre class="code__Pre-sc-8eixcc-2 glKhkr 
                
                prism-code language-ts 
                 
                

              " style="color:#393A34;background-color:#f6f8fa"><div class="code__AbsoluteCopyButton-sc-8eixcc-1 fcPKpO copy-button"><div class="copy__CopyComponent-sc-eodafv-0 jdLDrK"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none" class="light"><rect x="0.5" width="24" height="24" rx="4" fill="#EDF2F7"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="#1A202C" class="dark"><rect x="0.5" width="24" height="24" rx="4" fill="#1A202C"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div><code style="width:max-content;overflow:visible"><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">team</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Aurora Adventures'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    members</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      create</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        email</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'alice@prisma.io'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div></code></pre></div></div></pre><p class="paragraph">Instead of auto-generating IDs, change the <code class="inline-code">id</code> fields of <code class="inline-code">Team</code> and <code class="inline-code">User</code> to a <code class="inline-code">String</code> (if you do not provide a value, a UUID is generated automatically). This example uses UUIDs:</p><pre><div class="code__CodeWrapper-sc-8eixcc-0 cbTKLY codeWrapperDiv"><div class="gatsby-highlight pre-highlight"><pre class="code__Pre-sc-8eixcc-2 glKhkr 
                
                prism-code language-prisma 
                 
                

              " style="color:#393A34;background-color:#f6f8fa"><div class="code__AbsoluteCopyButton-sc-8eixcc-1 fcPKpO copy-button"><div class="copy__CopyComponent-sc-eodafv-0 jdLDrK"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none" class="light"><rect x="0.5" width="24" height="24" rx="4" fill="#EDF2F7"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="#1A202C" class="dark"><rect x="0.5" width="24" height="24" rx="4" fill="#1A202C"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div><code style="width:max-content;overflow:visible"><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token keyword" style="color:#00009f">model</span><span class="token type-class-name"> Team</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-deleted-bg-color);symb-color:var(--code-deleted-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  id</span><span class="token type-class-name">      Int</span><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@id</span><span class="token plain"> </span><span class="token annotation punctuation" style="color:#393A34">@default</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">autoincrement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-added-bg-color);symb-color:var(--code-added-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  id</span><span class="token type-class-name">      String</span><span class="token plain"> </span><span class="token annotation punctuation" style="color:#393A34">@id</span><span class="token plain"> </span><span class="token annotation punctuation" style="color:#393A34">@default</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">uuid</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  name</span><span class="token type-class-name">    String</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  members</span><span class="token type-class-name"> User</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">model</span><span class="token type-class-name"> User</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-deleted-bg-color);symb-color:var(--code-deleted-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  id</span><span class="token type-class-name">    Int</span><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@id</span><span class="token plain"> </span><span class="token annotation punctuation" style="color:#393A34">@default</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">autoincrement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-added-bg-color);symb-color:var(--code-added-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  id</span><span class="token type-class-name">    String</span><span class="token plain"> </span><span class="token annotation punctuation" style="color:#393A34">@id</span><span class="token plain"> </span><span class="token annotation punctuation" style="color:#393A34">@default</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">uuid</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  email</span><span class="token type-class-name"> String</span><span class="token plain"> </span><span class="token annotation punctuation" style="color:#393A34">@unique</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  teams</span><span class="token type-class-name"> Team</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span></div></code></pre></div></div></pre><p class="paragraph">Refactor the sign-up flow example to use the <code class="inline-code">$transaction([])</code> API instead of nested writes:</p><pre><div class="code__CodeWrapper-sc-8eixcc-0 cbTKLY codeWrapperDiv"><div class="gatsby-highlight pre-highlight"><pre class="code__Pre-sc-8eixcc-2 glKhkr 
                
                prism-code language-ts 
                 
                

              " style="color:#393A34;background-color:#f6f8fa"><div class="code__AbsoluteCopyButton-sc-8eixcc-1 fcPKpO copy-button"><div class="copy__CopyComponent-sc-eodafv-0 jdLDrK"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none" class="light"><rect x="0.5" width="24" height="24" rx="4" fill="#EDF2F7"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="#1A202C" class="dark"><rect x="0.5" width="24" height="24" rx="4" fill="#1A202C"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div><code style="width:max-content;overflow:visible"><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> v4 </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'uuid'</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> teamID </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">v4</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> userID </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">v4</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">$transaction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> userID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      email</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'alice@prisma.io'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      team</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> teamID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">team</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> teamID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Aurora Adventures'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div></code></pre></div></div></pre><p class="paragraph">Technically you can still use nested writes with pre-computed APIs if you prefer that syntax:</p><pre><div class="code__CodeWrapper-sc-8eixcc-0 cbTKLY codeWrapperDiv"><div class="gatsby-highlight pre-highlight"><pre class="code__Pre-sc-8eixcc-2 glKhkr 
                
                prism-code language-ts 
                 
                

              " style="color:#393A34;background-color:#f6f8fa"><div class="code__AbsoluteCopyButton-sc-8eixcc-1 fcPKpO copy-button"><div class="copy__CopyComponent-sc-eodafv-0 jdLDrK"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none" class="light"><rect x="0.5" width="24" height="24" rx="4" fill="#EDF2F7"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="#1A202C" class="dark"><rect x="0.5" width="24" height="24" rx="4" fill="#1A202C"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div><code style="width:max-content;overflow:visible"><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> v4 </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'uuid'</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> teamID </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">v4</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> userID </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">v4</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">team</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> teamID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Aurora Adventures'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    members</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      create</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> userID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        email</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'alice@prisma.io'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        team</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">          id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> teamID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div></code></pre></div></div></pre><p class="paragraph">There's no compelling reason to switch to manually generated IDs and the <code class="inline-code">$transaction([])</code> API if you are already using auto-generated IDs and nested writes.</p></section></section></section><section><h2 id="read-modify-write" style="position:relative"><a href="transactions.html#read-modify-write" aria-label="read modify write permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>Read, modify, write</h2><p class="paragraph">In some cases you may need to perform custom logic as part of an atomic operation - also known as the <button style="display:inline-block" class="customLink__CustomButton-sc-1xpvtl4-0 geWZl">read-modify-write pattern<svg xmlns="http://www.w3.org/2000/svg" width="12" style="margin-left:4px" height="12" viewBox="0 0 12 12" fill="currentColor" color="inherit"><path fill="inherit" d="M6 1h5v5L8.86 3.85 4.7 8 4 7.3l4.15-4.16L6 1Z M2 3h2v1H2v6h6V8h1v2a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1Z"/></svg></button>. The following is an example of the read-modify-write pattern:</p><ul class="list"><li>Read a value from the database</li><li>Run some logic to manipulate that value (for example, contacting an external API)</li><li>Write the value back to the database</li></ul><p class="paragraph">All operations should <strong>succeed or fail together</strong> without making unwanted changes to the database, but you do not necessarily need to use an actual database transaction. This section of the guide describes two ways to work with Prisma Client and the read-modify-write pattern:</p><ul class="list"><li>Designing idempotent APIs</li><li>Optimistic concurrency control</li></ul><section><h3 id="idempotent-apis" style="position:relative"><a href="transactions.html#idempotent-apis" aria-label="idempotent apis permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>Idempotent APIs</h3><p class="paragraph">Idempotency is the ability to run the same logic with the same parameters multiple times with the same result: the <strong>effect on the database</strong> is the same whether you run the logic once or one thousand times. For example:</p><ul class="list"><li><strong>NOT IDEMPOTENT</strong>: Upsert (update-or-insert) a user in the database with email address <code class="inline-code">"letoya@prisma.io"</code>. The <code class="inline-code">User</code> table <strong>does not</strong> enforce unique email addresses. The effect on the database is different if you run the logic once (one user created) or ten times (ten users created).</li><li><strong>IDEMPOTENT</strong>: Upsert (update-or-insert) a user in the database with the email address <code class="inline-code">"letoya@prisma.io"</code>. The <code class="inline-code">User</code> table <strong>does</strong> enforce unique email addresses. The effect on the database is the same if you run the logic once (one user created) or ten times (existing user is updated with the same input).</li></ul><p class="paragraph">Idempotency is something you can and should actively design into your application wherever possible.</p><section><h4 id="when-to-design-an-idempotent-api" style="position:relative"><a href="transactions.html#when-to-design-an-idempotent-api" aria-label="when to design an idempotent api permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>When to design an idempotent API</h4><ul class="list"><li>✔ You need to be able to retry the same logic without creating unwanted side-effects in the databases</li></ul></section><section><h4 id="scenario-upgrading-a-slack-team" style="position:relative"><a href="transactions.html#scenario-upgrading-a-slack-team" aria-label="scenario upgrading a slack team permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>Scenario: Upgrading a Slack team</h4><p class="paragraph">You are creating an upgrade flow for Slack that allows teams to unlock paid features. Teams can choose between different plans and pay per user, per month. You use Stripe as your payment gateway, and extend your <code class="inline-code">Team</code> model to store a <code class="inline-code">stripeCustomerId</code>. Subscriptions are managed in Stripe.</p><pre><div class="code__CodeWrapper-sc-8eixcc-0 cbTKLY codeWrapperDiv"><div class="gatsby-highlight pre-highlight"><pre class="code__Pre-sc-8eixcc-2 glKhkr 
                
                prism-code language-prisma 
                 
                

              " style="color:#393A34;background-color:#f6f8fa"><div class="code__AbsoluteCopyButton-sc-8eixcc-1 fcPKpO copy-button"><div class="copy__CopyComponent-sc-eodafv-0 jdLDrK"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none" class="light"><rect x="0.5" width="24" height="24" rx="4" fill="#EDF2F7"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="#1A202C" class="dark"><rect x="0.5" width="24" height="24" rx="4" fill="#1A202C"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div><code style="width:max-content;overflow:visible"><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token keyword" style="color:#00009f">model</span><span class="token type-class-name"> Team</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  id</span><span class="token type-class-name">               Int</span><span class="token plain">     </span><span class="token annotation punctuation" style="color:#393A34">@id</span><span class="token plain"> </span><span class="token annotation punctuation" style="color:#393A34">@default</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">autoincrement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  name</span><span class="token type-class-name">             String</span><span class="token not-class"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token not-class">  User</span><span class="token type-class-name">             User</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-highlight-bg-color);symb-color:var(--code-highlight-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  stripeCustomerId</span><span class="token type-class-name"> String</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span></div></code></pre></div></div></pre><p class="paragraph">The upgrade flow looks like this:</p><ol class="o-list"><li>Count the number of users</li><li>Create a subscription in Stripe that includes the number of users</li><li>Associate the team with the Stripe customer ID to unlock paid features</li></ol><pre><div class="code__CodeWrapper-sc-8eixcc-0 cbTKLY codeWrapperDiv"><div class="gatsby-highlight pre-highlight"><pre class="code__Pre-sc-8eixcc-2 glKhkr 
                
                prism-code language-ts 
                 
                

              " style="color:#393A34;background-color:#f6f8fa"><div class="code__AbsoluteCopyButton-sc-8eixcc-1 fcPKpO copy-button"><div class="copy__CopyComponent-sc-eodafv-0 jdLDrK"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none" class="light"><rect x="0.5" width="24" height="24" rx="4" fill="#EDF2F7"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="#1A202C" class="dark"><rect x="0.5" width="24" height="24" rx="4" fill="#1A202C"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div><code style="width:max-content;overflow:visible"><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> teamId </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> planId </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'plan_id'</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Count team members</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> numTeammates </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  where</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    teams</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      some</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> teamId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Create a customer in Stripe for plan-9454549</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> customer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> stripe</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">customers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  externalId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> teamId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  plan</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> planId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  quantity</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> numTeammates</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Update the team with the customer id to indicate that they are a customer</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// and support querying this customer in Stripe from our application code.</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">team</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    customerId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> customer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  where</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> teamId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div></code></pre></div></div></pre><p class="paragraph">This example has a problem: you can only run the logic <em>once</em>. Consider the following scenario:</p><ol class="o-list"><li><p class="paragraph">Stripe creates a new customer and subscription, and returns a customer ID</p></li><li><p class="paragraph">Updating the team <strong>fails</strong> - the team is not marked as a customer in the Slack database</p></li><li><p class="paragraph">The customer is charged by Stripe, but paid features are not unlocked in Slack because the team lacks a valid <code class="inline-code">customerId</code></p></li><li><p class="paragraph">Running the same code again either:</p><ul class="list"><li>Results in an error because the team (defined by <code class="inline-code">externalId</code>) already exists - Stripe never returns a customer ID</li><li>If <code class="inline-code">externalId</code> is not subject to a unique constraint, Stripe creates yet another subscription (<strong>not idempotent</strong>)</li></ul></li></ol><p class="paragraph">You cannot re-run this code in case of an error and you cannot change to another plan without being charged twice.</p><p class="paragraph">The following refactor (highlighted) introduces a mechanism that checks if a subscription already exists, and either creates the description or updates the existing subscription (which will remain unchanged if the input is identical):</p><pre><div class="code__CodeWrapper-sc-8eixcc-0 cbTKLY codeWrapperDiv"><div class="gatsby-highlight pre-highlight"><pre class="code__Pre-sc-8eixcc-2 glKhkr 
                
                prism-code language-ts 
                 
                

              " style="color:#393A34;background-color:#f6f8fa"><div class="code__AbsoluteCopyButton-sc-8eixcc-1 fcPKpO copy-button"><div class="copy__CopyComponent-sc-eodafv-0 jdLDrK"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none" class="light"><rect x="0.5" width="24" height="24" rx="4" fill="#EDF2F7"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="#1A202C" class="dark"><rect x="0.5" width="24" height="24" rx="4" fill="#1A202C"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div><code style="width:max-content;overflow:visible"><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token comment" style="color:#999988;font-style:italic">// Calculate the number of users times the cost per user</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> numTeammates </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">user</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  where</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    teams</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      some</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> teamId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-highlight-bg-color);symb-color:var(--code-highlight-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Find customer in Stripe</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-highlight-bg-color);symb-color:var(--code-highlight-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> customer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> stripe</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">customers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> externalId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> teamID </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-highlight-bg-color);symb-color:var(--code-highlight-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-highlight-bg-color);symb-color:var(--code-highlight-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">customer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-highlight-bg-color);symb-color:var(--code-highlight-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// If team already exists, update</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-highlight-bg-color);symb-color:var(--code-highlight-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  customer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> stripe</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">customers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-highlight-bg-color);symb-color:var(--code-highlight-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    externalId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> teamId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-highlight-bg-color);symb-color:var(--code-highlight-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    plan</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'plan_id'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-highlight-bg-color);symb-color:var(--code-highlight-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    quantity</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> numTeammates</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-highlight-bg-color);symb-color:var(--code-highlight-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-highlight-bg-color);symb-color:var(--code-highlight-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-highlight-bg-color);symb-color:var(--code-highlight-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  customer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> stripe</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">customers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-highlight-bg-color);symb-color:var(--code-highlight-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// If team does not exist, create customer</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-highlight-bg-color);symb-color:var(--code-highlight-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    externalId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> teamId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-highlight-bg-color);symb-color:var(--code-highlight-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    plan</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'plan_id'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-highlight-bg-color);symb-color:var(--code-highlight-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    quantity</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> numTeammates</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Update the team with the customer id to indicate that they are a customer</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// and support querying this customer in Stripe from our application code.</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">team</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    customerId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> customer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  where</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> teamId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div></code></pre></div></div></pre><p class="paragraph">You can now retry the same logic multiple times with the same input without adverse effect. To further enhance this example, you can introduce a mechanism whereby the subscription is cancelled or temporarily deactivated if the update does not succeed after a set number of attempts.</p></section></section><section><h3 id="optimistic-concurrency-control" style="position:relative"><a href="transactions.html#optimistic-concurrency-control" aria-label="optimistic concurrency control permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>Optimistic concurrency control</h3><p class="paragraph">Optimistic concurrency control (OCC) is a model for handling concurrent operations on a single entity that does not rely on 🔒 locking. Instead, we <strong>optimistically</strong> assume that a record will remain unchanged in between reading and writing, and use a concurrency token (a timestamp or version field) to detect changes to a record.</p><p class="paragraph">If a ❌ conflict occurs (someone else has changed the record since you read it), you cancel the transaction. Depending on your scenario, you can then:</p><ul class="list"><li>Re-try the transaction (book another cinema seat)</li><li>Throw an error (alert the user that they are about to overwrite changes made by someone else)</li></ul><p class="paragraph">This section describes how to build your own optimistic concurrency control. See also: Plans for <button style="display:inline-block" class="customLink__CustomButton-sc-1xpvtl4-0 geWZl">application-level optimistic concurrency control on GitHub<svg xmlns="http://www.w3.org/2000/svg" width="12" style="margin-left:4px" height="12" viewBox="0 0 12 12" fill="currentColor" color="inherit"><path fill="inherit" d="M6 1h5v5L8.86 3.85 4.7 8 4 7.3l4.15-4.16L6 1Z M2 3h2v1H2v6h6V8h1v2a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1Z"/></svg></button></p><span type="info" class="admonition__AdmonitionWrapper-sc-htoeam-3 kwPClj"><ul class="list"><li><p class="paragraph">If you use version 4.4.0 or earlier, you cannot use optimistic concurrency control on <code class="inline-code">update</code> operations, because you cannot filter on non-unique fields. The <code class="inline-code">version</code> field you need to use with optimistic concurrency control is a non-unique field.</p></li><li><p class="paragraph">Since version 5.0.0 you are able to <a href="../../reference/prisma-client-reference.html#filter-on-non-unique-fields-with-userwhereuniqueinput">filter on non-unique fields in <code class="inline-code">update</code> operations</a> so that optimistic concurrency control is being used. The feature was also available via the Preview flag <code class="inline-code">extendedWhereUnique</code> from versions 4.5.0 to 4.16.2.</p></li></ul></span><section><h4 id="when-to-use-optimistic-concurrency-control" style="position:relative"><a href="transactions.html#when-to-use-optimistic-concurrency-control" aria-label="when to use optimistic concurrency control permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>When to use optimistic concurrency control</h4><ul class="list"><li>✔ You anticipate a high number of concurrent requests (multiple people booking cinema seats)</li><li>✔ You anticipate that conflicts between those concurrent requests will be rare</li></ul><p class="paragraph">Avoiding locks in a application with a high number of concurrent requests makes the application more resilient to load and more scalable overall. Although locking is not inherently bad, locking in a high concurrency environment can lead to unintended consequences - even if you are locking individual rows, and only for a short amount of time. For more information, see:</p><ul class="list"><li><button style="display:inline-block" class="customLink__CustomButton-sc-1xpvtl4-0 geWZl">Why ROWLOCK Hints Can Make Queries Slower and Blocking Worse in SQL Server<svg xmlns="http://www.w3.org/2000/svg" width="12" style="margin-left:4px" height="12" viewBox="0 0 12 12" fill="currentColor" color="inherit"><path fill="inherit" d="M6 1h5v5L8.86 3.85 4.7 8 4 7.3l4.15-4.16L6 1Z M2 3h2v1H2v6h6V8h1v2a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1Z"/></svg></button></li><li><button style="display:inline-block" class="customLink__CustomButton-sc-1xpvtl4-0 geWZl">The High Concurrency strategy<svg xmlns="http://www.w3.org/2000/svg" width="12" style="margin-left:4px" height="12" viewBox="0 0 12 12" fill="currentColor" color="inherit"><path fill="inherit" d="M6 1h5v5L8.86 3.85 4.7 8 4 7.3l4.15-4.16L6 1Z M2 3h2v1H2v6h6V8h1v2a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1Z"/></svg></button></li></ul></section><section><h4 id="scenario-reserving-a-seat-at-the-cinema" style="position:relative"><a href="transactions.html#scenario-reserving-a-seat-at-the-cinema" aria-label="scenario reserving a seat at the cinema permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>Scenario: Reserving a seat at the cinema</h4><p class="paragraph">You are creating a booking system for a cinema. Each movie has a set number of seats. The following schema models movies and seats:</p><pre><div class="code__CodeWrapper-sc-8eixcc-0 cbTKLY codeWrapperDiv"><div class="gatsby-highlight pre-highlight"><pre class="code__Pre-sc-8eixcc-2 glKhkr 
                
                prism-code language-ts 
                 
                

              " style="color:#393A34;background-color:#f6f8fa"><div class="code__AbsoluteCopyButton-sc-8eixcc-1 fcPKpO copy-button"><div class="copy__CopyComponent-sc-eodafv-0 jdLDrK"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none" class="light"><rect x="0.5" width="24" height="24" rx="4" fill="#EDF2F7"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="#1A202C" class="dark"><rect x="0.5" width="24" height="24" rx="4" fill="#1A202C"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div><code style="width:max-content;overflow:visible"><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">model </span><span class="token maybe-class-name">Seat</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  id        </span><span class="token maybe-class-name">Int</span><span class="token plain">   @id @</span><span class="token keyword" style="color:#00009f">default</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">autoincrement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  userId    </span><span class="token maybe-class-name">Int</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  claimedBy </span><span class="token maybe-class-name">User</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> @</span><span class="token function" style="color:#d73a49">relation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fields</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">userId</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> references</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  movieId   </span><span class="token maybe-class-name">Int</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  movie     </span><span class="token maybe-class-name">Movie</span><span class="token plain"> @</span><span class="token function" style="color:#d73a49">relation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fields</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">movieId</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> references</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">model </span><span class="token maybe-class-name">Movie</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  id    </span><span class="token maybe-class-name">Int</span><span class="token plain">    @id     @</span><span class="token keyword" style="color:#00009f">default</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">autoincrement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  name  </span><span class="token known-class-name class-name">String</span><span class="token plain"> @unique</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  seats </span><span class="token maybe-class-name">Seat</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span></div></code></pre></div></div></pre><p class="paragraph">The following sample code finds the first available seat and assigns that seat to a user:</p><pre><div class="code__CodeWrapper-sc-8eixcc-0 cbTKLY codeWrapperDiv"><div class="gatsby-highlight pre-highlight"><pre class="code__Pre-sc-8eixcc-2 glKhkr 
                
                prism-code language-ts 
                 
                

              " style="color:#393A34;background-color:#f6f8fa"><div class="code__AbsoluteCopyButton-sc-8eixcc-1 fcPKpO copy-button"><div class="copy__CopyComponent-sc-eodafv-0 jdLDrK"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none" class="light"><rect x="0.5" width="24" height="24" rx="4" fill="#EDF2F7"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="#1A202C" class="dark"><rect x="0.5" width="24" height="24" rx="4" fill="#1A202C"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div><code style="width:max-content;overflow:visible"><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> movieName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Hidden Figures'</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Find first available seat</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> availableSeat </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">seat</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">findFirst</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  where</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    movie</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> movieName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    claimedBy</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Throw an error if no seats are available</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">availableSeat</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token keyword" style="color:#00009f">throw</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name known-class-name class-name">Error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">Oh no! </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">movieName</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c"> is all booked.</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Claim the seat</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">seat</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    claimedBy</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> userId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  where</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> availableSeat</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div></code></pre></div></div></pre><p class="paragraph">However, this code suffers from the "double-booking problem" - it is possible for two people to book the same seats:</p><ol class="o-list"><li>Seat 3A returned to Sorcha (<code class="inline-code">findFirst</code>)</li><li>Seat 3A returned to Ellen (<code class="inline-code">findFirst</code>)</li><li>Seat 3A claimed by Sorcha (<code class="inline-code">update</code>)</li><li>Seat 3A claimed by Ellen (<code class="inline-code">update</code> - overwrites Sorcha's claim)</li></ol><p class="paragraph">Even though Sorcha has successfully booked the seat, the system ultimately stores Ellen's claim. To solve this problem with optimistic concurrency control, add a <code class="inline-code">version</code> field to the seat:</p><pre><div class="code__CodeWrapper-sc-8eixcc-0 cbTKLY codeWrapperDiv"><div class="gatsby-highlight pre-highlight"><pre class="code__Pre-sc-8eixcc-2 glKhkr 
                
                prism-code language-prisma 
                 
                

              " style="color:#393A34;background-color:#f6f8fa"><div class="code__AbsoluteCopyButton-sc-8eixcc-1 fcPKpO copy-button"><div class="copy__CopyComponent-sc-eodafv-0 jdLDrK"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none" class="light"><rect x="0.5" width="24" height="24" rx="4" fill="#EDF2F7"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="#1A202C" class="dark"><rect x="0.5" width="24" height="24" rx="4" fill="#1A202C"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div><code style="width:max-content;overflow:visible"><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token keyword" style="color:#00009f">model</span><span class="token type-class-name"> Seat</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  id</span><span class="token type-class-name">        Int</span><span class="token plain">   </span><span class="token annotation punctuation" style="color:#393A34">@id</span><span class="token plain"> </span><span class="token annotation punctuation" style="color:#393A34">@default</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">autoincrement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  userId</span><span class="token type-class-name">    Int</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  claimedBy</span><span class="token type-class-name"> User</span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token annotation punctuation" style="color:#393A34">@relation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token type-args">fields:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">userId</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token type-args">references:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  movieId</span><span class="token type-class-name">   Int</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  movie</span><span class="token type-class-name">     Movie</span><span class="token plain"> </span><span class="token annotation punctuation" style="color:#393A34">@relation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token type-args">fields:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">movieId</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token type-args">references:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-highlight-bg-color);symb-color:var(--code-highlight-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  version</span><span class="token type-class-name">   Int</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span></div></code></pre></div></div></pre><p class="paragraph">Next, adjust the code to check the <code class="inline-code">version</code> field before updating:</p><pre><div class="code__CodeWrapper-sc-8eixcc-0 cbTKLY codeWrapperDiv"><div class="gatsby-highlight pre-highlight"><pre class="code__Pre-sc-8eixcc-2 glKhkr 
                
                prism-code language-ts 
                 
                

              " style="color:#393A34;background-color:#f6f8fa"><div class="code__AbsoluteCopyButton-sc-8eixcc-1 fcPKpO copy-button"><div class="copy__CopyComponent-sc-eodafv-0 jdLDrK"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none" class="light"><rect x="0.5" width="24" height="24" rx="4" fill="#EDF2F7"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="#1A202C" class="dark"><rect x="0.5" width="24" height="24" rx="4" fill="#1A202C"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div><code style="width:max-content;overflow:visible"><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> userEmail </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'alice@prisma.io'</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> movieName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Hidden Figures'</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Find the first available seat</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// availableSeat.version might be 0</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> availableSeat </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">seat</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">findFirst</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  where</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token maybe-class-name">Movie</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> movieName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    claimedBy</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">availableSeat</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token keyword" style="color:#00009f">throw</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name known-class-name class-name">Error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">Oh no! </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">movieName</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c"> is all booked.</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-highlight-bg-color);symb-color:var(--code-highlight-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Only mark the seat as claimed if the availableSeat.version</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-highlight-bg-color);symb-color:var(--code-highlight-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// matches the version we're updating. Additionally, increment the</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-highlight-bg-color);symb-color:var(--code-highlight-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// version when we perform this update so all other clients trying</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-highlight-bg-color);symb-color:var(--code-highlight-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// to book this same seat will have an outdated version.</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-highlight-bg-color);symb-color:var(--code-highlight-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> seats </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">seat</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">updateMany</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-highlight-bg-color);symb-color:var(--code-highlight-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-highlight-bg-color);symb-color:var(--code-highlight-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    claimedBy</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> userEmail</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-highlight-bg-color);symb-color:var(--code-highlight-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    version</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-highlight-bg-color);symb-color:var(--code-highlight-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      increment</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-highlight-bg-color);symb-color:var(--code-highlight-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-highlight-bg-color);symb-color:var(--code-highlight-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-highlight-bg-color);symb-color:var(--code-highlight-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  where</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-highlight-bg-color);symb-color:var(--code-highlight-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> availableSeat</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-highlight-bg-color);symb-color:var(--code-highlight-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    version</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> availableSeat</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">version</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// This version field is the key; only claim seat if in-memory version matches database version, indicating that the field has not been updated</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-highlight-bg-color);symb-color:var(--code-highlight-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-highlight-bg-color);symb-color:var(--code-highlight-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-highlight-bg-color);symb-color:var(--code-highlight-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-highlight-bg-color);symb-color:var(--code-highlight-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">seats</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">count</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-highlight-bg-color);symb-color:var(--code-highlight-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token keyword" style="color:#00009f">throw</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name known-class-name class-name">Error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">That seat is already booked! Please try again.</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line highlighted-line" style="background-color:var(--code-highlight-bg-color);symb-color:var(--code-highlight-color);class-name:highlighted-line"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span></div></code></pre></div></div></pre><p class="paragraph">It is now impossible for two people to book the same seat:</p><ol class="o-list"><li>Seat 3A returned to Sorcha (<code class="inline-code">version</code> is 0)</li><li>Seat 3A returned to Ellen (<code class="inline-code">version</code> is 0)</li><li>Seat 3A claimed by Sorcha (<code class="inline-code">version</code> is incremented to 1, booking succeeds)</li><li>Seat 3A claimed by Ellen (in-memory <code class="inline-code">version</code> (0) does not match database <code class="inline-code">version</code> (1) - booking does not succeed)</li></ol></section></section><section><h3 id="interactive-transactions-1" style="position:relative"><a href="transactions.html#interactive-transactions-1" aria-label="interactive transactions 1 permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>Interactive transactions</h3><p class="paragraph">If you have an existing application, it can be a significant undertaking to refactor your application to use optimistic concurrency control. Interactive Transactions offers a useful escape hatch for cases like this.</p><p class="paragraph">To create an interactive transaction, pass an async function into <a href="transactions.html#transaction-api">$transaction</a>. </p><p class="paragraph">The first argument passed into this async function is an instance of Prisma Client. Below, we will call this instance <code class="inline-code">tx</code>. Any Prisma Client call invoked on this <code class="inline-code">tx</code> instance is encapsulated into the transaction.</p><p class="paragraph">In the example below, Alice and Bob each have $100 in their account. If they try to send more money than they have, the transfer is rejected.</p><p class="paragraph">The expected outcome would be for Alice to make 1 transfer for $100 and the other transfer would be rejected. This would result in Alice having $0 and Bob having $200.</p><pre><div class="code__CodeWrapper-sc-8eixcc-0 cbTKLY codeWrapperDiv"><div class="gatsby-highlight pre-highlight"><pre class="code__Pre-sc-8eixcc-2 glKhkr 
                
                prism-code language-ts 
                 
                

              " style="color:#393A34;background-color:#f6f8fa"><div class="code__AbsoluteCopyButton-sc-8eixcc-1 fcPKpO copy-button"><div class="copy__CopyComponent-sc-eodafv-0 jdLDrK"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none" class="light"><rect x="0.5" width="24" height="24" rx="4" fill="#EDF2F7"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="#1A202C" class="dark"><rect x="0.5" width="24" height="24" rx="4" fill="#1A202C"/><path d="M15.5001 6.40002H17.0002C17.398 6.40002 17.7795 6.54752 18.0608 6.81007C18.3422 7.07263 18.5002 7.42872 18.5002 7.80002V17.6C18.5002 17.9713 18.3422 18.3274 18.0608 18.59C17.7795 18.8525 17.398 19 17.0002 19H8.00002C7.60219 19 7.22066 18.8525 6.93935 18.59C6.65804 18.3274 6.5 17.9713 6.5 17.6V7.80002C6.5 7.42872 6.65804 7.07263 6.93935 6.81007C7.22066 6.54752 7.60219 6.40002 8.00002 6.40002H9.50005" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.75 5H10.25C9.83579 5 9.5 5.33579 9.5 5.75V7.25C9.5 7.66421 9.83579 8 10.25 8H14.75C15.1642 8 15.5 7.66421 15.5 7.25V5.75C15.5 5.33579 15.1642 5 14.75 5Z" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div><code style="width:max-content;overflow:visible"><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">PrismaClient</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@prisma/client'</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> prisma </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">PrismaClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">transfer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">from</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> to</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> amount</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> prisma</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">$transaction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 1. Decrement amount from the sender.</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> sender </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">account</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        balance</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">          decrement</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> amount</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      where</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        email</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 2. Verify that the sender's balance didn't go below zero.</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sender</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">balance</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      </span><span class="token keyword" style="color:#00009f">throw</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name known-class-name class-name">Error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation keyword module" style="color:#00009f">from</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c"> doesn't have enough to send </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">amount</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 3. Increment the recipient's balance by amount</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> recipient </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">account</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        balance</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">          increment</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> amount</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      where</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">        email</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> to</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> recipient</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// This transfer is successful</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">transfer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'alice@prisma.io'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'bob@prisma.io'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// This transfer fails because Alice doesn't have enough funds in her account</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain">  </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">transfer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'alice@prisma.io'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'bob@prisma.io'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain" style="display:inline-block">
</span></span></div><div class="code__Line-sc-8eixcc-3 eskRzB token-line " style="background-color:;symb-color:;class-name:"><span class="code__LineContent-sc-8eixcc-5 fEIrRl  "><span class="token plain"></span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span></div></code></pre></div></div></pre><p class="paragraph">In the example above, both <code class="inline-code">update</code> queries run within a database transaction. When the application reaches the end of the function, the transaction is <strong>committed</strong> to the database.</p><p class="paragraph">If the application encounters an error along the way, the async function will throw an exception and automatically <strong>rollback</strong> the transaction.</p><p class="paragraph">You can learn more about interactive transactions in our <a href="transactions.html#interactive-transactions">Transactions and Batch Queries documentation</a>.</p><span type="warning" class="admonition__AdmonitionWrapper-sc-htoeam-3 kzCMZj"><p class="paragraph"><strong>Use interactive transactions with caution</strong>. Keeping transactions
open for a long time hurts database performance and can even cause deadlocks.
Try to avoid performing network requests and executing slow queries inside your
transaction functions. We recommend you get in and out as quick as possible!</p></span></section></section><section><h2 id="conclusion" style="position:relative"><a href="transactions.html#conclusion" aria-label="conclusion permalink" class="title-link before"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M1.5 6.33337H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M1.5 11.6666H15.5" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M6.75 1L5 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            <path d="M12 1L10.25 17" stroke="#CBD5E0" stroke-width="2" strokeLineCap="round" strokeLineJoin="round"/>
            </svg></a>Conclusion</h2><p class="paragraph">Prisma Client supports multiple ways of handling transactions, either directly through the API or by supporting your ability to introduce optimistic concurrency control and idempotency into your application. If you feel like you have use cases in your application that are not covered by any of the suggested options, please open a <button style="display:inline-block" class="customLink__CustomButton-sc-1xpvtl4-0 geWZl">GitHub issue<svg xmlns="http://www.w3.org/2000/svg" width="12" style="margin-left:4px" height="12" viewBox="0 0 12 12" fill="currentColor" color="inherit"><path fill="inherit" d="M6 1h5v5L8.86 3.85 4.7 8 4 7.3l4.15-4.16L6 1Z M2 3h2v1H2v6h6V8h1v2a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1Z"/></svg></button> to start a discussion.</p></section><div class="pageBottom__PageBottomWrapper-sc-10oj3zv-0 kdzDYs"><div class="pageBottom__Feedback-sc-10oj3zv-1 butCWs"><h4>Was this helpful?</h4><div class="sentiments"><button id="happy" class=""><svg xmlns="http://www.w3.org/2000/svg" width="41" height="40" viewBox="0 0 41 40" fill="none"><circle cx="20.5" cy="20" r="19.5" stroke="#CBD5E0"><title>This page was helpful.</title></circle><path d="M17.5 17L20.5999 9C21.316 9 22.0028 9.28446 22.5091 9.79081C22.9081 10.1898 23.5 10.9839 23.5 11.7V15H28.3939C28.6548 14.997 28.9133 15.0509 29.1513 15.1577C29.3894 15.2645 29.6013 15.4219 29.7726 15.6188C29.9438 15.8157 30.0701 16.0474 30.1429 16.298C30.2156 16.5486 30.233 16.812 30.1939 17.07L29.9326 19.0738M17.5 17V26.9999M17.5 17H14.3C13.8226 17 13.3648 17.1896 13.0272 17.5272C12.6896 17.8648 12.5 18.3226 12.5 18.8V25.1999C12.5 25.6773 12.6896 26.1351 13.0272 26.4727C13.3648 26.8102 13.8226 26.9999 14.3 26.9999H17.5M17.5 26.9999H27.1519C27.586 27.0048 28.0072 26.8527 28.338 26.5715C28.6688 26.2903 28.8868 25.8991 28.9519 25.4699L29.3306 23M29.9326 19.0738H25.5M29.9326 19.0738L29.3306 23M29.3306 23H25" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></button><button id="unhappy" class=""><svg xmlns="http://www.w3.org/2000/svg" width="41" height="40" viewBox="0 0 41 40" fill="none"><circle cx="20.5" cy="20" r="19.5" stroke="#CBD5E0"><title>This page was not helpful.</title></circle><path d="M23.4999 23L20.4 31C19.6839 31 18.9971 30.7155 18.4908 30.2092C18.0918 29.8102 17.4999 29.0161 17.4999 28.3L17.4999 25H12.606C12.3451 25.003 12.0867 24.9491 11.8486 24.8423C11.6105 24.7355 11.3986 24.5781 11.2274 24.3812C11.0561 24.1843 10.9298 23.9526 10.857 23.702C10.7843 23.4514 10.7669 23.188 10.806 22.93L11.0673 20.9262M23.4999 23L23.4999 13.0001M23.4999 23H26.6999C27.1773 23 27.6351 22.8104 27.9727 22.4728C28.3103 22.1352 28.4999 21.6774 28.4999 21.2V14.8001C28.4999 14.3227 28.3103 13.8649 27.9727 13.5273C27.6351 13.1898 27.1773 13.0001 26.6999 13.0001L23.4999 13.0001M23.4999 13.0001L13.848 13.0001C13.4139 12.9952 12.9927 13.1474 12.6619 13.4285C12.3311 13.7097 12.1131 14.1009 12.048 14.5301L11.6693 17M11.0673 20.9262L15.4999 20.9262M11.0673 20.9262L11.6693 17M11.6693 17L15.9999 17" stroke="#A0AEC0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></button></div></div><div class="pageBottom__Wrapper-sc-10oj3zv-2 fwLvxX"><div class="pageBottom__Content-sc-10oj3zv-3 daWQPr"><div class="Toastify"></div></div></div><button class="customLink__CustomButton-sc-1xpvtl4-0 geWZl edit-git" style="display:inline-block">Edit this page on GitHub<svg xmlns="http://www.w3.org/2000/svg" width="12" style="margin-left:4px" height="12" viewBox="0 0 12 12" fill="currentColor" color="inherit"><path fill="inherit" d="M6 1h5v5L8.86 3.85 4.7 8 4 7.3l4.15-4.16L6 1Z M2 3h2v1H2v6h6V8h1v2a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1Z"/></svg></button></div></div></article><div id="toc-holder" class="layout__TOCWrapper-sc-bupt9j-5 hTRqWl"><nav aria-label="Table of contents"><div class="toc__ChapterTitle-sc-40h8sh-0 ljSUQr">ON THIS PAGE</div><ul class="toc__HeadingList-sc-40h8sh-1 iQoQzq"><li class="toc__ListItem-sc-40h8sh-2 kduPiy"><a href="transactions.html#transactions-overview">Transactions overview</a></li><li class="toc__ListItem-sc-40h8sh-2 kduPiy"><a href="transactions.html#about-transactions-in-prisma-client">About transactions in Prisma Client</a></li><li class="toc__ListItem-sc-40h8sh-2 kduPiy"><a href="transactions.html#nested-writes">Nested writes</a></li><li class="toc__ListItem-sc-40h8sh-2 kduPiy"><a href="transactions.html#batchbulk-operations">Batch/bulk operations</a></li><li class="toc__ListItem-sc-40h8sh-2 kduPiy"><a href="transactions.html#the-transaction-api">The <inlinecode>$transaction</inlinecode> API</a><ul class="toc__HeadingList-sc-40h8sh-1 iQoQzq"><li class="toc__ListItem-sc-40h8sh-2 kduPiy"><a href="transactions.html#sequential-prisma-client-operations">Sequential Prisma Client operations</a></li><li class="toc__ListItem-sc-40h8sh-2 kduPiy"><a href="transactions.html#interactive-transactions">Interactive transactions</a></li><li class="toc__ListItem-sc-40h8sh-2 kduPiy"><a href="transactions.html#transaction-isolation-level">Transaction isolation level</a></li><li class="toc__ListItem-sc-40h8sh-2 kduPiy"><a href="transactions.html#transaction-timing-issues">Transaction timing issues</a></li></ul></li><li class="toc__ListItem-sc-40h8sh-2 kduPiy"><a href="transactions.html#dependent-writes">Dependent writes</a><ul class="toc__HeadingList-sc-40h8sh-1 iQoQzq"><li class="toc__ListItem-sc-40h8sh-2 kduPiy"><a href="transactions.html#nested-writes-1">Nested writes</a></li></ul></li><li class="toc__ListItem-sc-40h8sh-2 kduPiy"><a href="transactions.html#independent-writes">Independent writes</a><ul class="toc__HeadingList-sc-40h8sh-1 iQoQzq"><li class="toc__ListItem-sc-40h8sh-2 kduPiy"><a href="transactions.html#bulk-operations">Bulk operations</a></li><li class="toc__ListItem-sc-40h8sh-2 kduPiy"><a href="transactions.html#transaction-api"><inlinecode>$transaction([])</inlinecode> API</a></li></ul></li><li class="toc__ListItem-sc-40h8sh-2 kduPiy"><a href="transactions.html#read-modify-write">Read, modify, write</a><ul class="toc__HeadingList-sc-40h8sh-1 iQoQzq"><li class="toc__ListItem-sc-40h8sh-2 kduPiy"><a href="transactions.html#idempotent-apis">Idempotent APIs</a></li><li class="toc__ListItem-sc-40h8sh-2 kduPiy"><a href="transactions.html#optimistic-concurrency-control">Optimistic concurrency control</a></li><li class="toc__ListItem-sc-40h8sh-2 kduPiy"><a href="transactions.html#interactive-transactions-1">Interactive transactions</a></li></ul></li><li class="toc__ListItem-sc-40h8sh-2 kduPiy"><a href="transactions.html#conclusion">Conclusion</a></li></ul></nav></div></div></div></div><div class="layout__FooterWrapper-sc-bupt9j-6 eAoMQv"><div class="footer__FooterWrapper-sc-1ha7kr1-0 gyaQPC"><div class="footer__Container-sc-1ha7kr1-2 cRpoei"><div class="footer__Container-sc-1ha7kr1-1 HLahV"><div class="footer__FooterWrapper-sc-1ha7kr1-7 cCVpUT"><div class="footer__Row-sc-1ha7kr1-3 iihKZd"><div class="footer__Column-sc-1ha7kr1-9 eFLlKD"><h4 class="footer__Title-sc-1ha7kr1-10 ebqDAJ">Product</h4><button color="indigo" target="_self" class="customLink__CustomButton-sc-1xpvtl4-0 hyHLmQ footer__StyledLink-sc-1ha7kr1-11 bXdhxN">ORM</button><button color="indigo" target="_self" class="customLink__CustomButton-sc-1xpvtl4-0 hyHLmQ footer__StyledLink-sc-1ha7kr1-11 bXdhxN"><div class="link-title-label">Accelerate</div></button><button color="indigo" target="_self" class="customLink__CustomButton-sc-1xpvtl4-0 hyHLmQ footer__StyledLink-sc-1ha7kr1-11 bXdhxN"><div class="link-title-label">Pulse<span class="label">Early Access</span></div></button><button color="indigo" target="_self" class="customLink__CustomButton-sc-1xpvtl4-0 hyHLmQ footer__StyledLink-sc-1ha7kr1-11 bXdhxN">Pricing</button></div><div class="footer__Column-sc-1ha7kr1-9 eFLlKD"><h4 class="footer__Title-sc-1ha7kr1-10 ebqDAJ">Resources</h4><button color="indigo" target="_self" class="customLink__CustomButton-sc-1xpvtl4-0 hyHLmQ footer__StyledLink-sc-1ha7kr1-11 bXdhxN">Docs</button><button color="indigo" target="_self" class="customLink__CustomButton-sc-1xpvtl4-0 hyHLmQ footer__StyledLink-sc-1ha7kr1-11 bXdhxN">Get started</button><button referrerPolicy="no-referrer" color="indigo" target="_blank" class="customLink__CustomButton-sc-1xpvtl4-0 hyHLmQ footer__StyledLink-sc-1ha7kr1-11 bXdhxN">prisma-examples<i class="fa-solid fa-arrow-up-right undefined" style="text-align:center;font-size:1rem;color:currentColor;margin:"></i></button><button color="indigo" target="_self" class="customLink__CustomButton-sc-1xpvtl4-0 hyHLmQ footer__StyledLink-sc-1ha7kr1-11 bXdhxN">Prisma ORM in your stack</button><button color="indigo" target="_self" class="customLink__CustomButton-sc-1xpvtl4-0 hyHLmQ footer__StyledLink-sc-1ha7kr1-11 bXdhxN">Ecosystem</button><button color="indigo" target="_self" class="customLink__CustomButton-sc-1xpvtl4-0 hyHLmQ footer__StyledLink-sc-1ha7kr1-11 bXdhxN">Tutorials</button><button referrerPolicy="no-referrer" color="indigo" target="_blank" class="customLink__CustomButton-sc-1xpvtl4-0 hyHLmQ footer__StyledLink-sc-1ha7kr1-11 bXdhxN">Playground<i class="fa-solid fa-arrow-up-right undefined" style="text-align:center;font-size:1rem;color:currentColor;margin:"></i></button><button color="indigo" target="_self" class="customLink__CustomButton-sc-1xpvtl4-0 hyHLmQ footer__StyledLink-sc-1ha7kr1-11 bXdhxN">Customer stories</button><button color="indigo" target="_self" class="customLink__CustomButton-sc-1xpvtl4-0 hyHLmQ footer__StyledLink-sc-1ha7kr1-11 bXdhxN">Data guide</button><button referrerPolicy="no-referrer" color="indigo" target="_blank" class="customLink__CustomButton-sc-1xpvtl4-0 hyHLmQ footer__StyledLink-sc-1ha7kr1-11 bXdhxN">Data Platform status<i class="fa-solid fa-arrow-up-right undefined" style="text-align:center;font-size:1rem;color:currentColor;margin:"></i></button><button referrerPolicy="no-referrer" color="indigo" target="_blank" class="customLink__CustomButton-sc-1xpvtl4-0 hyHLmQ footer__StyledLink-sc-1ha7kr1-11 bXdhxN">VS Code extension<i class="fa-solid fa-arrow-up-right undefined" style="text-align:center;font-size:1rem;color:currentColor;margin:"></i></button></div><div class="footer__Column-sc-1ha7kr1-9 eFLlKD"><h4 class="footer__Title-sc-1ha7kr1-10 ebqDAJ">Contact us</h4><button color="indigo" target="_self" class="customLink__CustomButton-sc-1xpvtl4-0 hyHLmQ footer__StyledLink-sc-1ha7kr1-11 bXdhxN">Community</button><button color="indigo" target="_self" class="customLink__CustomButton-sc-1xpvtl4-0 hyHLmQ footer__StyledLink-sc-1ha7kr1-11 bXdhxN">Support</button><button color="indigo" target="_self" class="customLink__CustomButton-sc-1xpvtl4-0 hyHLmQ footer__StyledLink-sc-1ha7kr1-11 bXdhxN">Enterprise</button></div><div class="footer__Column-sc-1ha7kr1-9 eFLlKD"><h4 class="footer__Title-sc-1ha7kr1-10 ebqDAJ">Company</h4><button color="indigo" target="_self" class="customLink__CustomButton-sc-1xpvtl4-0 hyHLmQ footer__StyledLink-sc-1ha7kr1-11 bXdhxN">About</button><button color="indigo" target="_self" class="customLink__CustomButton-sc-1xpvtl4-0 hyHLmQ footer__StyledLink-sc-1ha7kr1-11 bXdhxN">Blog</button><button referrerPolicy="no-referrer" color="indigo" target="_blank" class="customLink__CustomButton-sc-1xpvtl4-0 hyHLmQ footer__StyledLink-sc-1ha7kr1-11 bXdhxN">Data DX<i class="fa-solid fa-arrow-up-right undefined" style="text-align:center;font-size:1rem;color:currentColor;margin:"></i></button><button color="indigo" target="_self" class="customLink__CustomButton-sc-1xpvtl4-0 hyHLmQ footer__StyledLink-sc-1ha7kr1-11 bXdhxN">Careers<!-- --> </button><button color="indigo" target="_self" class="customLink__CustomButton-sc-1xpvtl4-0 hyHLmQ footer__StyledLink-sc-1ha7kr1-11 bXdhxN">Events</button><button referrerPolicy="no-referrer" color="indigo" target="_blank" class="customLink__CustomButton-sc-1xpvtl4-0 hyHLmQ footer__StyledLink-sc-1ha7kr1-11 bXdhxN">Causes<i class="fa-solid fa-arrow-up-right undefined" style="text-align:center;font-size:1rem;color:currentColor;margin:"></i></button><button color="indigo" target="_self" class="customLink__CustomButton-sc-1xpvtl4-0 hyHLmQ footer__StyledLink-sc-1ha7kr1-11 bXdhxN">OSS Friends</button><button referrerPolicy="no-referrer" color="indigo" target="_blank" class="customLink__CustomButton-sc-1xpvtl4-0 hyHLmQ footer__StyledLink-sc-1ha7kr1-11 bXdhxN">Terms &amp; Privacy<i class="fa-solid fa-arrow-up-right undefined" style="text-align:center;font-size:1rem;color:currentColor;margin:"></i></button><button referrerPolicy="no-referrer" color="indigo" target="_blank" class="customLink__CustomButton-sc-1xpvtl4-0 hyHLmQ footer__StyledLink-sc-1ha7kr1-11 bXdhxN">Service Level Agreement<i class="fa-solid fa-arrow-up-right undefined" style="text-align:center;font-size:1rem;color:currentColor;margin:"></i></button></div></div><div class="footer__NewsletterRow-sc-1ha7kr1-8 ksIreH"><h4 class="footer__Title-sc-1ha7kr1-10 ebqDAJ">Newsletter</h4><div class="FooterNewsletterForm__Container-sc-1diux8q-0 iKeFqQ"><form action="https://prisma.us14.list-manage.com/subscribe/post-json" method="POST" target="hiddenFrame"><input type="hidden" name="u" value="dbacf466dc6e90901d8936391"><input type="hidden" name="id" value="83e066a034"><input type="hidden" name="c" value="?"><input type="hidden" name="f_id" value="00b0c2e1f0"><label class="input-name" for="MERGE1"><div class="leading-icon"><i class="fa-light fa-user undefined" style="text-align:center;font-size:1.125rem;color:currentColor;margin:"></i></div><input type="text" class="input-el" name="FNAME" id="MERGE1" placeholder="Name" value=""></label><label class="input-email" for="MERGE0"><div class="leading-icon"><i class="fa-light fa-envelope undefined" style="text-align:center;font-size:1.125rem;color:currentColor;margin:"></i></div><input type="email" class="input-el" name="EMAIL" id="MERGE0" value="" placeholder="Email Address" autoCapitalize="off" autoCorrect="off"></label><button type="primary" color="indigo" class="button__StyledBtn-sc-187srku-1 kKQHTI"><input type="submit" value="Subscribe for updates" name="subscribe" id="mc-embedded-subscribe" class="button"></button></form><iframe name="hiddenFrame" src="about:blank" style="display:none"></iframe></div></div></div><div class="footer__SocialLinksWrapper-sc-1ha7kr1-4 OgrUt"><div class="footer__PrismaLogo-sc-1ha7kr1-5 ilLHHY"><div class="prisma-logo-img"><img src="https://prismalens.vercel.app/header/logo-white.svg" width="90" height="27" alt="prisma_logo"></div><div class="footer__PrismaDataText-sc-1ha7kr1-6 kxtyct">© <!-- -->2024<!-- --> Prisma Data, Inc.</div></div><div color="indigo" class="footer__SocialLinksContainer-sc-1ha7kr1-12 iAgQES"><a href="https://discord.gg/KQyTW2H5ca" target="_blank" rel="noopener"><i class="fa-brands fa-discord undefined" style="text-align:center;font-size:inherit;color:currentColor;margin:"></i></a><a href="https://twitter.com/prisma" target="_blank" rel="noopener"><i class="fa-brands fa-x-twitter undefined" style="text-align:center;font-size:inherit;color:currentColor;margin:"></i></a><a href="https://www.youtube.com/c/PrismaData" target="_blank" rel="noopener"><i class="fa-brands fa-youtube undefined" style="text-align:center;font-size:inherit;color:currentColor;margin:"></i></a><a href="https://slack.prisma.io" target="_blank" rel="noopener"><i class="fa-brands fa-slack undefined" style="text-align:center;font-size:inherit;color:currentColor;margin:"></i></a><a href="https://github.com/prisma" target="_blank" rel="noopener"><i class="fa-brands fa-github undefined" style="text-align:center;font-size:inherit;color:currentColor;margin:"></i></a></div></div></div></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div>           </body></html>
